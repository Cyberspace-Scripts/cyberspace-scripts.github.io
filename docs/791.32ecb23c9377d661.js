"use strict";(self.webpackChunkplanning_poker=self.webpackChunkplanning_poker||[]).push([[791],{5791:(xN,iu,S)=>{S.r(iu),S.d(iu,{DashboardModule:()=>hN});var C=S(6895),Ro=S(7282),o=S(4650),te=S(7423),$e=S(7044);let Jg=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-side-bar"]],decls:26,vars:3,consts:[[1,"main-nav","custom-scroll","on"],[1,"logo-warpper"],["src","assets/img/logo_small.png","alt","logo"],[1,"sidebar-main"],[1,"sidebar-top"],[2,"display","inline"],[1,"user-popup","status","one"],[1,"bg-size",2,"background-image","url('assets/img/avatar.jpeg')"],[1,"icon-btn","btn-light","button-effect","nav-link","active"],["nz-icon","","nzType","bug","nzTheme","fill"],[1,"sidebar-bottom"],[1,"icon-btn","btn-light","button-effect","nav-link"],["nz-icon","","nzType","bulb","nzTheme","outline"],["nz-icon","",3,"nzType","nzTheme"],[1,"icon-btn","btn-light","nav-link"],["nz-icon","",3,"nzType"]],template:function(t,i){1&t&&(o.TgZ(0,"nav",0)(1,"div",1),o._UZ(2,"img",2),o.qZA(),o.TgZ(3,"div",3)(4,"ul",4)(5,"li")(6,"div",5)(7,"div",6),o._UZ(8,"div",7),o.qZA()()(),o.TgZ(9,"li")(10,"div",5)(11,"a",8),o._UZ(12,"span",9),o.qZA()()()(),o.TgZ(13,"ul",10)(14,"li")(15,"div",5)(16,"a",11),o._UZ(17,"span",12),o.qZA()()(),o.TgZ(18,"li")(19,"div",5)(20,"a",11),o._UZ(21,"span",13),o.qZA()()(),o.TgZ(22,"li")(23,"div",5)(24,"a",14),o._UZ(25,"span",15),o.qZA()()()()()()),2&t&&(o.xp6(21),o.Q6J("nzType","setting")("nzTheme","fill"),o.xp6(4),o.Q6J("nzType","home"))},dependencies:[te.Ls,$e.w],styles:['[_ngcontent-%COMP%]:root{--green: #005C53;--blue: #042940;--cyan: #45C4B0;--pink: #F2668B;--yellow: #F2C94C;--orange: #F2994A;--red: #D92525;--grey: #A67458}.main-nav[_ngcontent-%COMP%]{height:100vh;max-height:100vh;overflow:auto;overflow-x:hidden;border-right:1px solid #eff1f2;padding:40px 0}.main-nav.on[_ngcontent-%COMP%]{transition:all .3s ease;transform:translate(0);min-width:100px;animation:fadeInLeft .3s ease-in-out}.game-container[_ngcontent-%COMP%]   .main-nav[_ngcontent-%COMP%]{min-width:100px;width:100px;height:100vh;max-height:100vh;overflow:auto;overflow-x:hidden;padding:40px 0;border:1px solid red}.sidebar-main[_ngcontent-%COMP%]{height:calc(100vh - 140px);display:inline-flex;flex-direction:column;width:100%;justify-content:space-between}.sidebar-main[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding-left:0;list-style-type:none;margin-bottom:0;padding-right:0}.sidebar-main[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-top:25px;text-align:center}.main-nav[_ngcontent-%COMP%]   .logo-warpper[_ngcontent-%COMP%]{text-align:center;padding-bottom:35px;border-bottom:1px solid #eff1f2}.main-nav[_ngcontent-%COMP%]   .logo-warpper[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:40px}.custom-scroll[_ngcontent-%COMP%]{scroll-behavior:smooth}.button-effect[_ngcontent-%COMP%]:before{position:absolute;top:50%;left:50%;z-index:2;display:block;content:"";width:0;height:0;background:rgba(255,255,255,.2);border-radius:100%;transform:translate(-50%,-50%);opacity:0}.main-nav[_ngcontent-%COMP%]   .user-popup[_ngcontent-%COMP%]{height:53px;width:53px;padding:3px;border-radius:100%;margin:0 auto;position:relative}.main-nav[_ngcontent-%COMP%]   .user-popup[_ngcontent-%COMP%]   .user-popup[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{height:47px;width:47px;border-radius:100%;margin:0 auto}.status[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:before{content:"";position:absolute;height:100%;width:100%;background-color:#1c9dea;left:0;z-index:-1;top:0;border-radius:100%}.bg-size[_ngcontent-%COMP%]{background-size:cover;background-position:center center;display:block;height:47px;width:47px;border-radius:100%;margin:0 auto}.button-effect[_ngcontent-%COMP%]{display:inline-flex;overflow:hidden;position:relative}.anticon[_ngcontent-%COMP%]{font-size:18px}']}),n})(),Kg=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-dashboard-shell"]],decls:3,vars:0,consts:[[1,"game-container"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o._UZ(1,"app-side-bar")(2,"router-outlet"),o.qZA())},dependencies:[Ro.lC,Jg],styles:[".game-container[_ngcontent-%COMP%]{display:flex;height:100vh;flex-direction:row}"]}),n})();var E,xt=S(9300),De=S(4004),Lo=S(4707),yi=S(3900),Wg=S(4986),wr=S(9751),vi=S(8996),Ci=S(9646),Xe=S(5813),ot=S(8675),Ir=S(1520),br=S(5026),En=S(1884),Po=S(2011),Xg=(S(5881),S(3942)),v=S(5861),Bo=S(9681),ou=S(4859),Jt=S(1877),J=S(2090),e_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},dt={},Sr=Sr||{},V=e_||self;function Go(){}function Uo(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function zi(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Nr="closure_uid_"+(1e9*Math.random()>>>0),n_=0;function i_(n,e,t){return n.call.apply(n.bind,arguments)}function o_(n,e,t){if(!n)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var s=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(s,i),n.apply(e,s)}}return function(){return n.apply(e,arguments)}}function Ee(n,e,t){return(Ee=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i_:o_).apply(null,arguments)}function Zo(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var i=t.slice();return i.push.apply(i,arguments),n.apply(this,i)}}function Ie(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(i,s,r){for(var a=Array(arguments.length-2),l=2;l<arguments.length;l++)a[l-2]=arguments[l];return e.prototype[s].apply(i,a)}}function Tt(){this.s=this.s,this.o=this.o}Tt.prototype.s=!1,Tt.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function t_(n){Object.prototype.hasOwnProperty.call(n,Nr)&&n[Nr]||(n[Nr]=++n_)}(this)},Tt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const su=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Ar(n){const e=n.length;if(0<e){const t=Array(e);for(let i=0;i<e;i++)t[i]=n[i];return t}return[]}function ru(n,e){for(let t=1;t<arguments.length;t++){const i=arguments[t];if(Uo(i)){const s=n.length||0,r=i.length||0;n.length=s+r;for(let a=0;a<r;a++)n[s+a]=i[a]}else n.push(i)}}function Me(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}Me.prototype.h=function(){this.defaultPrevented=!0};var r_=function(){if(!V.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{V.addEventListener("test",Go,e),V.removeEventListener("test",Go,e)}catch{}return n}();function qo(n){return/^[\s\xa0]*$/.test(n)}var au=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Or(n,e){return n<e?-1:n>e?1:0}function $o(){var n=V.navigator;return n&&(n=n.userAgent)?n:""}function st(n){return-1!=$o().indexOf(n)}function Dr(n){return Dr[" "](n),n}Dr[" "]=Go;var Qo,n,l_=st("Opera"),Mn=st("Trident")||st("MSIE"),lu=st("Edge"),Er=lu||Mn,cu=st("Gecko")&&!(-1!=$o().toLowerCase().indexOf("webkit")&&!st("Edge"))&&!(st("Trident")||st("MSIE"))&&!st("Edge"),c_=-1!=$o().toLowerCase().indexOf("webkit")&&!st("Edge");function uu(){var n=V.document;return n?n.documentMode:void 0}e:{var Mr="",kr=(n=$o(),cu?/rv:([^\);]+)(\)|;)/.exec(n):lu?/Edge\/([\d\.]+)/.exec(n):Mn?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):c_?/WebKit\/(\S+)/.exec(n):l_?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(kr&&(Mr=kr?kr[1]:""),Mn){var Fr=uu();if(null!=Fr&&Fr>parseFloat(Mr)){Qo=String(Fr);break e}}Qo=Mr}var u_={};var d_=V.document&&Mn&&(uu()||parseInt(Qo,10))||void 0;function xi(n,e){if(Me.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,i=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(cu){e:{try{Dr(e.nodeName);var s=!0;break e}catch{}s=!1}s||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:p_[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&xi.X.h.call(this)}}Ie(xi,Me);var p_={2:"touch",3:"pen",4:"mouse"};xi.prototype.h=function(){xi.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Ti="closure_listenable_"+(1e6*Math.random()|0),f_=0;function m_(n,e,t,i,s){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!i,this.ha=s,this.key=++f_,this.ba=this.ea=!1}function jo(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function Rr(n,e,t){for(const i in n)e.call(t,n[i],i,n)}function du(n){const e={};for(const t in n)e[t]=n[t];return e}const pu="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fu(n,e){let t,i;for(let s=1;s<arguments.length;s++){for(t in i=arguments[s],i)n[t]=i[t];for(let r=0;r<pu.length;r++)t=pu[r],Object.prototype.hasOwnProperty.call(i,t)&&(n[t]=i[t])}}function Yo(n){this.src=n,this.g={},this.h=0}function Lr(n,e){var t=e.type;if(t in n.g){var r,i=n.g[t],s=su(i,e);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(jo(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Pr(n,e,t,i){for(var s=0;s<n.length;++s){var r=n[s];if(!r.ba&&r.listener==e&&r.capture==!!t&&r.ha==i)return s}return-1}Yo.prototype.add=function(n,e,t,i,s){var r=n.toString();(n=this.g[r])||(n=this.g[r]=[],this.h++);var a=Pr(n,e,i,s);return-1<a?(e=n[a],t||(e.ea=!1)):((e=new m_(e,this.src,r,!!i,s)).ea=t,n.push(e)),e};var Br="closure_lm_"+(1e6*Math.random()|0),Gr={};function mu(n,e,t,i,s){if(i&&i.once)return _u(n,e,t,i,s);if(Array.isArray(e)){for(var r=0;r<e.length;r++)mu(n,e[r],t,i,s);return null}return t=$r(t),n&&n[Ti]?n.N(e,t,zi(i)?!!i.capture:!!i,s):gu(n,e,t,!1,i,s)}function gu(n,e,t,i,s,r){if(!e)throw Error("Invalid event type");var a=zi(s)?!!s.capture:!!s,l=Zr(n);if(l||(n[Br]=l=new Yo(n)),(t=l.add(e,t,i,a,r)).proxy)return t;if(i=function g_(){const e=__;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=i,i.src=n,i.listener=t,n.addEventListener)r_||(s=a),void 0===s&&(s=!1),n.addEventListener(e.toString(),i,s);else if(n.attachEvent)n.attachEvent(vu(e.toString()),i);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(i)}return t}function _u(n,e,t,i,s){if(Array.isArray(e)){for(var r=0;r<e.length;r++)_u(n,e[r],t,i,s);return null}return t=$r(t),n&&n[Ti]?n.O(e,t,zi(i)?!!i.capture:!!i,s):gu(n,e,t,!0,i,s)}function yu(n,e,t,i,s){if(Array.isArray(e))for(var r=0;r<e.length;r++)yu(n,e[r],t,i,s);else i=zi(i)?!!i.capture:!!i,t=$r(t),n&&n[Ti]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Pr(r=n.g[e],t,i,s))&&(jo(r[t]),Array.prototype.splice.call(r,t,1),0==r.length&&(delete n.g[e],n.h--))):n&&(n=Zr(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Pr(e,t,i,s)),(t=-1<n?e[n]:null)&&Ur(t))}function Ur(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Ti])Lr(e.i,n);else{var t=n.type,i=n.proxy;e.removeEventListener?e.removeEventListener(t,i,n.capture):e.detachEvent?e.detachEvent(vu(t),i):e.addListener&&e.removeListener&&e.removeListener(i),(t=Zr(e))?(Lr(t,n),0==t.h&&(t.src=null,e[Br]=null)):jo(n)}}}function vu(n){return n in Gr?Gr[n]:Gr[n]="on"+n}function __(n,e){if(n.ba)n=!0;else{e=new xi(e,this);var t=n.listener,i=n.ha||n.src;n.ea&&Ur(n),n=t.call(i,e)}return n}function Zr(n){return(n=n[Br])instanceof Yo?n:null}var qr="__closure_events_fn_"+(1e9*Math.random()>>>0);function $r(n){return"function"==typeof n?n:(n[qr]||(n[qr]=function(e){return n.handleEvent(e)}),n[qr])}function ye(){Tt.call(this),this.i=new Yo(this),this.P=this,this.I=null}function be(n,e){var t,i=n.I;if(i)for(t=[];i;i=i.I)t.push(i);if(n=n.P,i=e.type||e,"string"==typeof e)e=new Me(e,n);else if(e instanceof Me)e.target=e.target||n;else{var s=e;fu(e=new Me(i,n),s)}if(s=!0,t)for(var r=t.length-1;0<=r;r--){var a=e.g=t[r];s=Ho(a,i,!0,e)&&s}if(s=Ho(a=e.g=n,i,!0,e)&&s,s=Ho(a,i,!1,e)&&s,t)for(r=0;r<t.length;r++)s=Ho(a=e.g=t[r],i,!1,e)&&s}function Ho(n,e,t,i){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var s=!0,r=0;r<e.length;++r){var a=e[r];if(a&&!a.ba&&a.capture==t){var l=a.listener,c=a.ha||a.src;a.ea&&Lr(n.i,a),s=!1!==l.call(c,i)&&s}}return s&&!i.defaultPrevented}Ie(ye,Tt),ye.prototype[Ti]=!0,ye.prototype.removeEventListener=function(n,e,t,i){yu(this,n,e,t,i)},ye.prototype.M=function(){if(ye.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],i=0;i<t.length;i++)jo(t[i]);delete n.g[e],n.h--}}this.I=null},ye.prototype.N=function(n,e,t,i){return this.i.add(String(n),e,!1,t,i)},ye.prototype.O=function(n,e,t,i){return this.i.add(String(n),e,!0,t,i)};var Qr=V.JSON.stringify;function y_(){var n=xu;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var jr,Cu=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new C_,n=>n.reset());class C_{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function z_(n){V.setTimeout(()=>{throw n},0)}function zu(n,e){jr||function x_(){var n=V.Promise.resolve(void 0);jr=function(){n.then(T_)}}(),Yr||(jr(),Yr=!0),xu.add(n,e)}var Yr=!1,xu=new class v_{constructor(){this.h=this.g=null}add(e,t){const i=Cu.get();i.set(e,t),this.h?this.h.next=i:this.g=i,this.h=i}};function T_(){for(var n;n=y_();){try{n.h.call(n.g)}catch(t){z_(t)}var e=Cu;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Yr=!1}function Jo(n,e){ye.call(this),this.h=n||1,this.g=e||V,this.j=Ee(this.lb,this),this.l=Date.now()}function Hr(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function Jr(n,e,t){if("function"==typeof n)t&&(n=Ee(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ee(n.handleEvent,n)}return 2147483647<Number(e)?-1:V.setTimeout(n,e||0)}function Tu(n){n.g=Jr(()=>{n.g=null,n.i&&(n.i=!1,Tu(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Ie(Jo,ye),(E=Jo.prototype).ca=!1,E.R=null,E.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),be(this,"tick"),this.ca&&(Hr(this),this.start()))}},E.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},E.M=function(){Jo.X.M.call(this),Hr(this),delete this.g};class w_ extends Tt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Tu(this)}M(){super.M(),this.g&&(V.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function wi(n){Tt.call(this),this.h=n,this.g={}}Ie(wi,Tt);var wu=[];function Iu(n,e,t,i){Array.isArray(t)||(t&&(wu[0]=t.toString()),t=wu);for(var s=0;s<t.length;s++){var r=mu(e,t[s],i||n.handleEvent,!1,n.h||n);if(!r)break;n.g[r.key]=r}}function bu(n){Rr(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ur(e)},n),n.g={}}function Ko(){this.g=!0}function kn(n,e,t,i){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function N_(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var i=t[n];if(!(2>i.length)){var s=i[1];if(Array.isArray(s)&&!(1>s.length)){var r=s[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var a=1;a<s.length;a++)s[a]=""}}}return Qr(t)}catch{return e}}(n,t)+(i?" "+i:"")})}wi.prototype.M=function(){wi.X.M.call(this),bu(this)},wi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ko.prototype.Aa=function(){this.g=!1},Ko.prototype.info=function(){};var Kt={},Su=null;function Wo(){return Su=Su||new ye}function Nu(n){Me.call(this,Kt.Pa,n)}function Ii(n){const e=Wo();be(e,new Nu(e))}function Au(n,e){Me.call(this,Kt.STAT_EVENT,n),this.stat=e}function Pe(n){const e=Wo();be(e,new Au(e,n))}function Ou(n,e){Me.call(this,Kt.Qa,n),this.size=e}function bi(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return V.setTimeout(function(){n()},e)}Kt.Pa="serverreachability",Ie(Nu,Me),Kt.STAT_EVENT="statevent",Ie(Au,Me),Kt.Qa="timingevent",Ie(Ou,Me);var Xo={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Du={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Kr(){}function Mu(){}Kr.prototype.h=null;var ea,Si={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Wr(){Me.call(this,"d")}function Xr(){Me.call(this,"c")}function es(){}function Ni(n,e,t,i){this.l=n,this.j=e,this.m=t,this.U=i||1,this.S=new wi(this),this.O=A_,this.T=new Jo(n=Er?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new ku}function ku(){this.i=null,this.g="",this.h=!1}Ie(Wr,Me),Ie(Xr,Me),Ie(es,Kr),es.prototype.g=function(){return new XMLHttpRequest},es.prototype.i=function(){return{}},ea=new es;var A_=45e3,ta={},ts={};function na(n,e,t){n.K=1,n.v=ss(pt(e)),n.s=t,n.P=!0,Fu(n,null)}function Fu(n,e){n.F=Date.now(),Ai(n),n.A=pt(n.v);var t=n.A,i=n.U;Array.isArray(i)||(i=[String(i)]),$u(t.i,"t",i),n.C=0,t=n.l.H,n.h=new ku,n.g=mh(n.l,t?e:null,!n.s),0<n.N&&(n.L=new w_(Ee(n.La,n,n.g),n.N)),Iu(n.S,n.g,"readystatechange",n.ib),e=n.H?du(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),Ii(),function I_(n,e,t,i,s,r){n.info(function(){if(n.g)if(r)for(var a="",l=r.split("&"),c=0;c<l.length;c++){var u=l[c].split("=");if(1<u.length){var h=u[0];u=u[1];var d=h.split("_");a=2<=d.length&&"type"==d[1]?a+(h+"=")+u+"&":a+(h+"=redacted&")}}else a=null;else a=r;return"XMLHTTP REQ ("+i+") [attempt "+s+"]: "+e+"\n"+t+"\n"+a})}(n.j,n.u,n.A,n.m,n.U,n.s)}function Vu(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function Ru(n,e,t){let s,i=!0;for(;!n.I&&n.C<t.length;){if(s=O_(n,t),s==ts){4==e&&(n.o=4,Pe(14),i=!1),kn(n.j,n.m,null,"[Incomplete Response]");break}if(s==ta){n.o=4,Pe(15),kn(n.j,n.m,t,"[Invalid Chunk]"),i=!1;break}kn(n.j,n.m,s,null),ia(n,s)}Vu(n)&&s!=ts&&s!=ta&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Pe(16),i=!1),n.i=n.i&&i,i?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),ha(e),e.K=!0,Pe(11))):(kn(n.j,n.m,t,"[Invalid Chunked Response]"),Wt(n),Oi(n))}function O_(n,e){var t=n.C,i=e.indexOf("\n",t);return-1==i?ts:(t=Number(e.substring(t,i)),isNaN(t)?ta:(i+=1)+t>e.length?ts:(e=e.substr(i,t),n.C=i+t,e))}function Ai(n){n.V=Date.now()+n.O,Lu(n,n.O)}function Lu(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=bi(Ee(n.gb,n),e)}function ns(n){n.B&&(V.clearTimeout(n.B),n.B=null)}function Oi(n){0==n.l.G||n.I||hh(n.l,n)}function Wt(n){ns(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Hr(n.T),bu(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function ia(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||oa(t.h,n)))if(!n.J&&oa(t.h,n)&&3==t.G){try{var i=t.Fa.g.parse(e)}catch{i=null}if(Array.isArray(i)&&3==i.length){var s=i;if(0==s[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;hs(t),cs(t)}ua(t),Pe(18)}}else t.Ba=s[1],0<t.Ba-t.T&&37500>s[2]&&t.L&&0==t.A&&!t.v&&(t.v=bi(Ee(t.cb,t),6e3));if(1>=Yu(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else en(t,11)}else if((n.J||t.g==n)&&hs(t),!qo(e))for(s=t.Fa.g.parse(e),e=0;e<s.length;e++){let u=s[e];if(t.T=u[0],u=u[1],2==t.G)if("c"==u[0]){t.I=u[1],t.ka=u[2];const h=u[3];null!=h&&(t.ma=h,t.j.info("VER="+t.ma));const d=u[4];null!=d&&(t.Ca=d,t.j.info("SVER="+t.Ca));const p=u[5];null!=p&&"number"==typeof p&&0<p&&(t.J=i=1.5*p,t.j.info("backChannelRequestTimeoutMs_="+i)),i=t;const g=n.g;if(g){const y=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var r=i.h;r.g||-1==y.indexOf("spdy")&&-1==y.indexOf("quic")&&-1==y.indexOf("h2")||(r.j=r.l,r.g=new Set,r.h&&(sa(r,r.h),r.h=null))}if(i.D){const w=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;w&&(i.za=w,ne(i.F,i.D,w))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var a=n;if((i=t).sa=fh(i,i.H?i.ka:null,i.V),a.J){Hu(i.h,a);var l=a,c=i.J;c&&l.setTimeout(c),l.B&&(ns(l),Ai(l)),i.g=a}else ch(i);0<t.i.length&&us(t)}else"stop"!=u[0]&&"close"!=u[0]||en(t,7);else 3==t.G&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?en(t,7):ca(t):"noop"!=u[0]&&t.l&&t.l.wa(u),t.A=0)}Ii()}catch{}}function Pu(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Uo(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function E_(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Uo(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const i in n)e[t++]=i;return e}}}(n),i=function D_(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Uo(n)){for(var e=[],t=n.length,i=0;i<t;i++)e.push(n[i]);return e}for(i in e=[],t=0,n)e[t++]=n[i];return e}(n),s=i.length,r=0;r<s;r++)e.call(void 0,i[r],t&&t[r],n)}(E=Ni.prototype).setTimeout=function(n){this.O=n},E.ib=function(n){n=n.target;const e=this.L;e&&3==ft(n)?e.l():this.La(n)},E.La=function(n){try{if(n==this.g)e:{const h=ft(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>h)&&(3!=h||Er||this.g&&(this.h.h||this.g.fa()||ih(this.g)))){this.I||4!=h||7==e||Ii(),ns(this);var t=this.g.aa();this.Y=t;t:if(Vu(this)){var i=ih(this.g);n="";var s=i.length,r=4==ft(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Wt(this),Oi(this);var a="";break t}this.h.i=new V.TextDecoder}for(e=0;e<s;e++)this.h.h=!0,n+=this.h.i.decode(i[e],{stream:r&&e==s-1});i.splice(0,s),this.h.g+=n,this.C=0,a=this.h.g}else a=this.g.fa();if(this.i=200==t,function b_(n,e,t,i,s,r,a){n.info(function(){return"XMLHTTP RESP ("+i+") [ attempt "+s+"]: "+e+"\n"+t+"\n"+r+" "+a})}(this.j,this.u,this.A,this.m,this.U,h,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qo(l)){var u=l;break t}}u=null}if(!(t=u)){this.i=!1,this.o=3,Pe(12),Wt(this),Oi(this);break e}kn(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ia(this,t)}this.P?(Ru(this,h,a),Er&&this.i&&3==h&&(Iu(this.S,this.T,"tick",this.hb),this.T.start())):(kn(this.j,this.m,a,null),ia(this,a)),4==h&&Wt(this),this.i&&!this.I&&(4==h?hh(this.l,this):(this.i=!1,Ai(this)))}else 400==t&&0<a.indexOf("Unknown SID")?(this.o=3,Pe(12)):(this.o=0,Pe(13)),Wt(this),Oi(this)}}}catch{}},E.hb=function(){if(this.g){var n=ft(this.g),e=this.g.fa();this.C<e.length&&(ns(this),Ru(this,n,e),this.i&&4!=n&&Ai(this))}},E.cancel=function(){this.I=!0,Wt(this)},E.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function S_(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(Ii(),Pe(17)),Wt(this),this.o=2,Oi(this)):Lu(this,this.V-n)};var Bu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Xt(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Xt){this.h=void 0!==e?e:n.h,is(this,n.j),this.s=n.s,this.g=n.g,os(this,n.m),this.l=n.l,e=n.i;var t=new Mi;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Gu(this,t),this.o=n.o}else n&&(t=String(n).match(Bu))?(this.h=!!e,is(this,t[1]||"",!0),this.s=Di(t[2]||""),this.g=Di(t[3]||"",!0),os(this,t[4]),this.l=Di(t[5]||"",!0),Gu(this,t[6]||"",!0),this.o=Di(t[7]||"")):(this.h=!!e,this.i=new Mi(null,this.h))}function pt(n){return new Xt(n)}function is(n,e,t){n.j=t?Di(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function os(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Gu(n,e,t){e instanceof Mi?(n.i=e,function P_(n,e){e&&!n.j&&(wt(n),n.i=null,n.g.forEach(function(t,i){var s=i.toLowerCase();i!=s&&(Zu(this,i),$u(this,s,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ei(e,R_)),n.i=new Mi(e,n.h))}function ne(n,e,t){n.i.set(e,t)}function ss(n){return ne(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Di(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ei(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,k_),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function k_(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Xt.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ei(e,Uu,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ei(e,Uu,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ei(t,"/"==t.charAt(0)?V_:F_,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ei(t,L_)),n.join("")};var Uu=/[#\/\?@]/g,F_=/[#\?:]/g,V_=/[#\?]/g,R_=/[#\?@]/g,L_=/#/g;function Mi(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function wt(n){n.g||(n.g=new Map,n.h=0,n.i&&function M_(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var i=n[t].indexOf("="),s=null;if(0<=i){var r=n[t].substring(0,i);s=n[t].substring(i+1)}else r=n[t];e(r,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Zu(n,e){wt(n),e=Fn(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function qu(n,e){return wt(n),e=Fn(n,e),n.g.has(e)}function $u(n,e,t){Zu(n,e),0<t.length&&(n.i=null,n.g.set(Fn(n,e),Ar(t)),n.h+=t.length)}function Fn(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function Qu(n){this.l=n||G_,n=V.PerformanceNavigationTiming?0<(n=V.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(V.g&&V.g.Ga&&V.g.Ga()&&V.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(E=Mi.prototype).add=function(n,e){wt(this),this.i=null,n=Fn(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},E.forEach=function(n,e){wt(this),this.g.forEach(function(t,i){t.forEach(function(s){n.call(e,s,i,this)},this)},this)},E.oa=function(){wt(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let i=0;i<e.length;i++){const s=n[i];for(let r=0;r<s.length;r++)t.push(e[i])}return t},E.W=function(n){wt(this);let e=[];if("string"==typeof n)qu(this,n)&&(e=e.concat(this.g.get(Fn(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},E.set=function(n,e){return wt(this),this.i=null,qu(this,n=Fn(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},E.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},E.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var i=e[t];const r=encodeURIComponent(String(i)),a=this.W(i);for(i=0;i<a.length;i++){var s=r;""!==a[i]&&(s+="="+encodeURIComponent(String(a[i]))),n.push(s)}}return this.i=n.join("&")};var G_=10;function ju(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Yu(n){return n.h?1:n.g?n.g.size:0}function oa(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function sa(n,e){n.g?n.g.add(e):n.h=e}function Hu(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Ju(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ar(n.i)}function ra(){}function U_(){this.g=new ra}function Z_(n,e,t){const i=t||"";try{Pu(n,function(s,r){let a=s;zi(s)&&(a=Qr(s)),e.push(i+r+"="+encodeURIComponent(a))})}catch(s){throw e.push(i+"type="+encodeURIComponent("_badmap")),s}}function rs(n,e,t,i,s){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,s(i)}catch{}}function ki(n){this.l=n.ac||null,this.j=n.jb||!1}function as(n,e){ye.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=aa,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Qu.prototype.cancel=function(){if(this.i=Ju(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},ra.prototype.stringify=function(n){return V.JSON.stringify(n,void 0)},ra.prototype.parse=function(n){return V.JSON.parse(n,void 0)},Ie(ki,Kr),ki.prototype.g=function(){return new as(this.l,this.j)},ki.prototype.i=function(n){return function(){return n}}({}),Ie(as,ye);var aa=0;function Ku(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Fi(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Vi(n)}function Vi(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(E=as.prototype).open=function(n,e){if(this.readyState!=aa)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Vi(this)},E.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||V).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},E.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Fi(this)),this.readyState=aa},E.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Vi(this)),this.g&&(this.readyState=3,Vi(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof V.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Ku(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},E.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Fi(this):Vi(this),3==this.readyState&&Ku(this)}},E.Va=function(n){this.g&&(this.response=this.responseText=n,Fi(this))},E.Ua=function(n){this.g&&(this.response=n,Fi(this))},E.ga=function(){this.g&&Fi(this)},E.setRequestHeader=function(n,e){this.v.append(n,e)},E.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},E.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(as.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var $_=V.JSON.parse;function le(n){ye.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Wu,this.K=this.L=!1}Ie(le,ye);var Wu="",Q_=/^https?$/i,j_=["POST","PUT"];function Xu(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,eh(n),ls(n)}function eh(n){n.D||(n.D=!0,be(n,"complete"),be(n,"error"))}function th(n){if(n.h&&typeof Sr<"u"&&(!n.C[1]||4!=ft(n)||2!=n.aa()))if(n.v&&4==ft(n))Jr(n.Ha,0,n);else if(be(n,"readystatechange"),4==ft(n)){n.h=!1;try{const l=n.aa();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var i;if(i=0===l){var s=String(n.H).match(Bu)[1]||null;if(!s&&V.self&&V.self.location){var r=V.self.location.protocol;s=r.substr(0,r.length-1)}i=!Q_.test(s?s.toLowerCase():"")}t=i}if(t)be(n,"complete"),be(n,"success");else{n.m=6;try{var a=2<ft(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.aa()+"]",eh(n)}}finally{ls(n)}}}function ls(n,e){if(n.g){nh(n);const t=n.g,i=n.C[0]?Go:null;n.g=null,n.C=null,e||be(n,"ready");try{t.onreadystatechange=i}catch{}}}function nh(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(V.clearTimeout(n.A),n.A=null)}function ft(n){return n.g?n.g.readyState:0}function ih(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case Wu:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function oh(n){let e="";return Rr(n,function(t,i){e+=i,e+=":",e+=t,e+="\r\n"}),e}function la(n,e,t){e:{for(i in t){var i=!1;break e}i=!0}i||(t=oh(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):ne(n,e,t))}function Ri(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function sh(n){this.Ca=0,this.i=[],this.j=new Ko,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Ri("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Ri("baseRetryDelayMs",5e3,n),this.bb=Ri("retryDelaySeedMs",1e4,n),this.$a=Ri("forwardChannelMaxRetries",2,n),this.ta=Ri("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new Qu(n&&n.concurrentRequestLimit),this.Fa=new U_,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function ca(n){if(rh(n),3==n.G){var e=n.U++,t=pt(n.F);ne(t,"SID",n.I),ne(t,"RID",e),ne(t,"TYPE","terminate"),Li(n,t),(e=new Ni(n,n.j,e,void 0)).K=2,e.v=ss(pt(t)),t=!1,V.navigator&&V.navigator.sendBeacon&&(t=V.navigator.sendBeacon(e.v.toString(),"")),!t&&V.Image&&((new Image).src=e.v,t=!0),t||(e.g=mh(e.l,null),e.g.da(e.v)),e.F=Date.now(),Ai(e)}ph(n)}function cs(n){n.g&&(ha(n),n.g.cancel(),n.g=null)}function rh(n){cs(n),n.u&&(V.clearTimeout(n.u),n.u=null),hs(n),n.h.cancel(),n.m&&("number"==typeof n.m&&V.clearTimeout(n.m),n.m=null)}function us(n){ju(n.h)||n.m||(n.m=!0,zu(n.Ja,n),n.C=0)}function ah(n,e){var t;t=e?e.m:n.U++;const i=pt(n.F);ne(i,"SID",n.I),ne(i,"RID",t),ne(i,"AID",n.T),Li(n,i),n.o&&n.s&&la(i,n.o,n.s),t=new Ni(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=lh(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),sa(n.h,t),na(t,i,e)}function Li(n,e){n.ia&&Rr(n.ia,function(t,i){ne(e,i,t)}),n.l&&Pu({},function(t,i){ne(e,i,t)})}function lh(n,e,t){t=Math.min(n.i.length,t);var i=n.l?Ee(n.l.Ra,n.l,n):null;e:{var s=n.i;let r=-1;for(;;){const a=["count="+t];-1==r?0<t?(r=s[0].h,a.push("ofs="+r)):r=0:a.push("ofs="+r);let l=!0;for(let c=0;c<t;c++){let u=s[c].h;const h=s[c].g;if(u-=r,0>u)r=Math.max(0,s[c].h-100),l=!1;else try{Z_(h,a,"req"+u+"_")}catch{i&&i(h)}}if(l){i=a.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,i}function ch(n){n.g||n.u||(n.Z=1,zu(n.Ia,n),n.A=0)}function ua(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=bi(Ee(n.Ia,n),dh(n,n.A)),n.A++,0))}function ha(n){null!=n.B&&(V.clearTimeout(n.B),n.B=null)}function uh(n){n.g=new Ni(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=pt(n.sa);ne(e,"RID","rpc"),ne(e,"SID",n.I),ne(e,"CI",n.L?"0":"1"),ne(e,"AID",n.T),ne(e,"TYPE","xmlhttp"),Li(n,e),n.o&&n.s&&la(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=ss(pt(e)),t.s=null,t.P=!0,Fu(t,n)}function hs(n){null!=n.v&&(V.clearTimeout(n.v),n.v=null)}function hh(n,e){var t=null;if(n.g==e){hs(n),ha(n),n.g=null;var i=2}else{if(!oa(n.h,e))return;t=e.D,Hu(n.h,e),i=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==i){t=e.s?e.s.length:0,e=Date.now()-e.F;var s=n.C;be(i=Wo(),new Ou(i,t)),us(n)}else ch(n);else if(3==(s=e.o)||0==s&&0<n.pa||!(1==i&&function H_(n,e){return!(Yu(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=bi(Ee(n.Ja,n,e),dh(n,n.C)),n.C++,0)))}(n,e)||2==i&&ua(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),s){case 1:en(n,5);break;case 4:en(n,10);break;case 3:en(n,6);break;default:en(n,2)}}function dh(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function en(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var i=Ee(n.kb,n);t||(t=new Xt("//www.google.com/images/cleardot.gif"),V.location&&"http"==V.location.protocol||is(t,"https"),ss(t)),function q_(n,e){const t=new Ko;if(V.Image){const i=new Image;i.onload=Zo(rs,t,i,"TestLoadImage: loaded",!0,e),i.onerror=Zo(rs,t,i,"TestLoadImage: error",!1,e),i.onabort=Zo(rs,t,i,"TestLoadImage: abort",!1,e),i.ontimeout=Zo(rs,t,i,"TestLoadImage: timeout",!1,e),V.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n}else e(!1)}(t.toString(),i)}else Pe(2);n.G=0,n.l&&n.l.va(e),ph(n),rh(n)}function ph(n){if(n.G=0,n.la=[],n.l){const e=Ju(n.h);(0!=e.length||0!=n.i.length)&&(ru(n.la,e),ru(n.la,n.i),n.h.i.length=0,Ar(n.i),n.i.length=0),n.l.ua()}}function fh(n,e,t){var i=t instanceof Xt?pt(t):new Xt(t,void 0);if(""!=i.g)e&&(i.g=e+"."+i.g),os(i,i.m);else{var s=V.location;i=s.protocol,e=e?e+"."+s.hostname:s.hostname,s=+s.port;var r=new Xt(null,void 0);i&&is(r,i),e&&(r.g=e),s&&os(r,s),t&&(r.l=t),i=r}return e=n.za,(t=n.D)&&e&&ne(i,t,e),ne(i,"VER",n.ma),Li(n,i),i}function mh(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new le(t&&n.Da&&!n.ra?new ki({jb:!0}):n.ra)).Ka(n.H),e}function gh(){}function ds(){if(Mn&&!(10<=Number(d_)))throw Error("Environmental error: no available transport.")}function He(n,e){ye.call(this),this.g=new sh(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!qo(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qo(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Vn(this)}function _h(n){Wr.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function yh(){Xr.call(this),this.status=1}function Vn(n){this.g=n}(E=le.prototype).Ka=function(n){this.L=n},E.da=function(n,e,t,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ea.g(),this.C=function Eu(n){return n.h||(n.h=n.i())}(this.u?this.u:ea),this.g.onreadystatechange=Ee(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(r){return void Xu(this,r)}if(n=t||"",t=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var s in i)t.set(s,i[s]);else{if("function"!=typeof i.keys||"function"!=typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const r of i.keys())t.set(r,i.get(r))}i=Array.from(t.keys()).find(r=>"content-type"==r.toLowerCase()),s=V.FormData&&n instanceof V.FormData,!(0<=su(j_,e))||i||s||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[r,a]of t)this.g.setRequestHeader(r,a);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{nh(this),0<this.B&&((this.K=function Y_(n){return Mn&&function h_(){return function a_(n){var e=u_;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=au(String(Qo)).split("."),t=au("9").split("."),i=Math.max(e.length,t.length);for(let a=0;0==n&&a<i;a++){var s=e[a]||"",r=t[a]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],r=/(\d*)(\D*)(.*)/.exec(r)||["","","",""],0==s[0].length&&0==r[0].length)break;n=Or(0==s[1].length?0:parseInt(s[1],10),0==r[1].length?0:parseInt(r[1],10))||Or(0==s[2].length,0==r[2].length)||Or(s[2],r[2]),s=s[3],r=r[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ee(this.qa,this)):this.A=Jr(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(r){Xu(this,r)}},E.qa=function(){typeof Sr<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,be(this,"timeout"),this.abort(8))},E.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,be(this,"complete"),be(this,"abort"),ls(this))},E.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ls(this,!0)),le.X.M.call(this)},E.Ha=function(){this.s||(this.F||this.v||this.l?th(this):this.fb())},E.fb=function(){th(this)},E.aa=function(){try{return 2<ft(this)?this.g.status:-1}catch{return-1}},E.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},E.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),$_(e)}},E.Ea=function(){return this.m},E.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(E=sh.prototype).ma=8,E.G=1,E.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const s=new Ni(this,this.j,n,void 0);let r=this.s;if(this.S&&(r?(r=du(r),fu(r,this.S)):r=this.S),null!==this.o||this.N||(s.H=r,r=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var i=this.i[t];if(void 0===(i="__data__"in i.g&&"string"==typeof(i=i.g.__data__)?i.length:void 0))break;if(4096<(e+=i)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=lh(this,s,e),ne(t=pt(this.F),"RID",n),ne(t,"CVER",22),this.D&&ne(t,"X-HTTP-Session-Id",this.D),Li(this,t),r&&(this.N?e="headers="+encodeURIComponent(String(oh(r)))+"&"+e:this.o&&la(t,this.o,r)),sa(this.h,s),this.Ya&&ne(t,"TYPE","init"),this.O?(ne(t,"$req",e),ne(t,"SID","null"),s.Z=!0,na(s,t,null)):na(s,t,e),this.G=2}}else 3==this.G&&(n?ah(this,n):0==this.i.length||ju(this.h)||ah(this))},E.Ia=function(){if(this.u=null,uh(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=bi(Ee(this.eb,this),n)}},E.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,Pe(10),cs(this),uh(this))},E.cb=function(){null!=this.v&&(this.v=null,cs(this),ua(this),Pe(19))},E.kb=function(n){n?(this.j.info("Successfully pinged google.com"),Pe(2)):(this.j.info("Failed to ping google.com"),Pe(1))},(E=gh.prototype).xa=function(){},E.wa=function(){},E.va=function(){},E.ua=function(){},E.Ra=function(){},ds.prototype.g=function(n,e){return new He(n,e)},Ie(He,ye),He.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;Pe(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=fh(n,null,n.V),us(n)},He.prototype.close=function(){ca(this.g)},He.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Qr(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&us(e)},He.prototype.M=function(){this.g.l=null,delete this.j,ca(this.g),delete this.g,He.X.M.call(this)},Ie(_h,Wr),Ie(yh,Xr),Ie(Vn,gh),Vn.prototype.xa=function(){be(this.g,"a")},Vn.prototype.wa=function(n){be(this.g,new _h(n))},Vn.prototype.va=function(n){be(this.g,new yh)},Vn.prototype.ua=function(){be(this.g,"b")},ds.prototype.createWebChannel=ds.prototype.g,He.prototype.send=He.prototype.u,He.prototype.open=He.prototype.m,He.prototype.close=He.prototype.close,Xo.NO_ERROR=0,Xo.TIMEOUT=8,Xo.HTTP_ERROR=6,Du.COMPLETE="complete",Mu.EventType=Si,Si.OPEN="a",Si.CLOSE="b",Si.ERROR="c",Si.MESSAGE="d",ye.prototype.listen=ye.prototype.N,le.prototype.listenOnce=le.prototype.O,le.prototype.getLastError=le.prototype.Oa,le.prototype.getLastErrorCode=le.prototype.Ea,le.prototype.getStatus=le.prototype.aa,le.prototype.getResponseJson=le.prototype.Sa,le.prototype.getResponseText=le.prototype.fa,le.prototype.send=le.prototype.da,le.prototype.setWithCredentials=le.prototype.Ka;var J_=dt.createWebChannelTransport=function(){return new ds},K_=dt.getStatEventTarget=function(){return Wo()},da=dt.ErrorCode=Xo,W_=dt.EventType=Du,X_=dt.Event=Kt,vh=dt.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},ey=dt.FetchXmlHttpFactory=ki,ps=dt.WebChannel=Mu,ty=dt.XhrIo=le;const Ch="@firebase/firestore";class ve{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ve.UNAUTHENTICATED=new ve(null),ve.GOOGLE_CREDENTIALS=new ve("google-credentials-uid"),ve.FIRST_PARTY=new ve("first-party-uid"),ve.MOCK_USER=new ve("mock-user");let Rn="9.13.0";const It=new Jt.Yd("@firebase/firestore");function pa(){return It.logLevel}function x(n,...e){if(It.logLevel<=Jt.in.DEBUG){const t=e.map(fa);It.debug(`Firestore (${Rn}): ${n}`,...t)}}function de(n,...e){if(It.logLevel<=Jt.in.ERROR){const t=e.map(fa);It.error(`Firestore (${Rn}): ${n}`,...t)}}function tn(n,...e){if(It.logLevel<=Jt.in.WARN){const t=e.map(fa);It.warn(`Firestore (${Rn}): ${n}`,...t)}}function fa(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function O(n="Unexpected state"){const e=`FIRESTORE (${Rn}) INTERNAL ASSERTION FAILED: `+n;throw de(e),new Error(e)}function M(n,e){n||O()}function b(n,e){return n}const m={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends J.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ge{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class zh{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oy{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ve.UNAUTHENTICATED))}shutdown(){}}class sy{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class ry{constructor(e){this.t=e,this.currentUser=ve.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var i=this;let s=this.i;const r=u=>this.i!==s?(s=this.i,t(u)):Promise.resolve();let a=new ge;this.o=()=>{this.i++,this.currentUser=this.u(),a.resolve(),a=new ge,e.enqueueRetryable(()=>r(this.currentUser))};const l=()=>{const u=a;e.enqueueRetryable((0,v.Z)(function*(){yield u.promise,yield r(i.currentUser)}))},c=u=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),l()};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new ge)}},0),l()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(M("string"==typeof i.accessToken),new zh(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return M(null===e||"string"==typeof e),new ve(e)}}class ay{constructor(e,t,i,s){this.h=e,this.l=t,this.m=i,this.g=s,this.type="FirstParty",this.user=ve.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(M(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class ly{constructor(e,t,i,s){this.h=e,this.l=t,this.m=i,this.g=s}getToken(){return Promise.resolve(new ay(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ve.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xh{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class cy{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const i=r=>{null!=r.error&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const a=r.token!==this.A;return this.A=r.token,x("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable(()=>i(r))};const s=r=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.appCheck.addTokenListener(this.o)};this.T.onInit(r=>s(r)),setTimeout(()=>{if(!this.appCheck){const r=this.T.getImmediate({optional:!0});r?s(r):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(M("string"==typeof t.token),this.A=t.token,new xh(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function uy(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}class Th{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const s=uy(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%e.length))}return i}}function R(n,e){return n<e?-1:n>e?1:0}function Ln(n,e,t){return n.length===e.length&&n.every((i,s)=>t(i,e[s]))}function wh(n){return n+"\0"}class ie{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(m.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new z(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(m.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ie.fromMillis(Date.now())}static fromDate(e){return ie.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new ie(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?R(this.nanoseconds,e.nanoseconds):R(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class k{constructor(e){this.timestamp=e}static fromTimestamp(e){return new k(e)}static min(){return new k(new ie(0,0))}static max(){return new k(new ie(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Pi{constructor(e,t,i){void 0===t?t=0:t>e.length&&O(),void 0===i?i=e.length-t:i>e.length-t&&O(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return 0===Pi.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Pi?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=e.get(s),a=t.get(s);if(r<a)return-1;if(r>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class q extends Pi{construct(e,t,i){return new q(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new z(m.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(s=>s.length>0))}return new q(t)}static emptyPath(){return new q([])}}const hy=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ce extends Pi{construct(e,t,i){return new ce(e,t,i)}static isValidIdentifier(e){return hy.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ce.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ce(["__name__"])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(0===i.length)throw new z(m.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let a=!1;for(;s<e.length;){const l=e[s];if("\\"===l){if(s+1===e.length)throw new z(m.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if("\\"!==c&&"."!==c&&"`"!==c)throw new z(m.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,s+=2}else"`"===l?(a=!a,s++):"."!==l||a?(i+=l,s++):(r(),s++)}if(r(),a)throw new z(m.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ce(t)}static emptyPath(){return new ce([])}}class I{constructor(e){this.path=e}static fromPath(e){return new I(q.fromString(e))}static fromName(e){return new I(q.fromString(e).popFirst(5))}static empty(){return new I(q.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===q.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return q.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new I(new q(e.slice()))}}class fs{constructor(e,t,i,s){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=s}}function ma(n){return n.fields.find(e=>2===e.kind)}function nn(n){return n.fields.filter(e=>2!==e.kind)}fs.UNKNOWN_ID=-1;class ms{constructor(e,t){this.fieldPath=e,this.kind=t}}class Bi{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Bi(0,Je.min())}}function Ih(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=k.fromTimestamp(1e9===i?new ie(t+1,0):new ie(t,i));return new Je(s,I.empty(),e)}function bh(n){return new Je(n.readTime,n.key,-1)}class Je{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Je(k.min(),I.empty(),-1)}static max(){return new Je(k.max(),I.empty(),-1)}}function ga(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=I.comparator(n.documentKey,e.documentKey),0!==t?t:R(n.largestBatchId,e.largestBatchId))}const Sh="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Nh{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function bt(n){return _a.apply(this,arguments)}function _a(){return _a=(0,v.Z)(function*(n){if(n.code!==m.FAILED_PRECONDITION||n.message!==Sh)throw n;x("LocalStore","Unexpectedly lost primary lease")}),_a.apply(this,arguments)}class f{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&O(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new f((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof f?t:f.resolve(t)}catch(t){return f.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):f.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):f.reject(t)}static resolve(e){return new f((t,i)=>{t(e)})}static reject(e){return new f((t,i)=>{i(e)})}static waitFor(e){return new f((t,i)=>{let s=0,r=0,a=!1;e.forEach(l=>{++s,l.next(()=>{++r,a&&r===s&&t()},c=>i(c))}),a=!0,r===s&&t()})}static or(e){let t=f.resolve(!1);for(const i of e)t=t.next(s=>s?f.resolve(s):i());return t}static forEach(e,t){const i=[];return e.forEach((s,r)=>{i.push(t.call(this,s,r))}),this.waitFor(i)}static mapArray(e,t){return new f((i,s)=>{const r=e.length,a=new Array(r);let l=0;for(let c=0;c<r;c++){const u=c;t(e[u]).next(h=>{a[u]=h,++l,l===r&&i(a)},h=>s(h))}})}static doWhile(e,t){return new f((i,s)=>{const r=()=>{!0===e()?t().next(()=>{r()},s):i()};r()})}}class gs{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new ge,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Gi(e,t.error)):this.P.resolve()},this.transaction.onerror=i=>{const s=ya(i.target.error);this.P.reject(new Gi(e,s))}}static open(e,t,i,s){try{return new gs(t,e.transaction(s,i))}catch(r){throw new Gi(t,r)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(x("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new my(t)}}class tt{constructor(e,t,i){this.name=e,this.version=t,this.S=i,12.2===tt.D((0,J.z$)())&&de("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return x("SimpleDb","Removing database:",e),on(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,J.hl)())return!1;if(tt.N())return!0;const e=(0,J.z$)(),t=tt.D(e),i=0<t&&t<10,s=tt.k(e),r=0<s&&s<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||i||r)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),i=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(i)}static k(e){const t=e.match(/Android ([\d.]+)/i),i=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(i)}F(e){var t=this;return(0,v.Z)(function*(){return t.db||(x("SimpleDb","Opening database:",t.name),t.db=yield new Promise((i,s)=>{const r=indexedDB.open(t.name,t.version);r.onsuccess=a=>{i(a.target.result)},r.onblocked=()=>{s(new Gi(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=a=>{const l=a.target.error;s("VersionError"===l.name?new z(m.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===l.name?new z(m.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+l):new Gi(e,l))},r.onupgradeneeded=a=>{x("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',a.oldVersion),t.S.$(a.target.result,r.transaction,a.oldVersion,t.version).next(()=>{x("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=i=>t.B(i)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,i,s){var r=this;return(0,v.Z)(function*(){const a="readonly"===t;let l=0;for(;;){++l;try{r.db=yield r.F(e);const c=gs.open(r.db,e,a?"readonly":"readwrite",i),u=s(c).next(h=>(c.V(),h)).catch(h=>(c.abort(h),f.reject(h))).toPromise();return u.catch(()=>{}),yield c.v,u}catch(c){const u=c,h="FirebaseError"!==u.name&&l<3;if(x("SimpleDb","Transaction failed with error:",u.message,"Retrying:",h),r.close(),!h)return Promise.reject(u)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class fy{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return on(this.U.delete())}}class Gi extends z{constructor(e,t){super(m.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function St(n){return"IndexedDbTransactionError"===n.name}class my{constructor(e){this.store=e}put(e,t){let i;return void 0!==t?(x("SimpleDb","PUT",this.store.name,e,t),i=this.store.put(t,e)):(x("SimpleDb","PUT",this.store.name,"<auto-key>",e),i=this.store.put(e)),on(i)}add(e){return x("SimpleDb","ADD",this.store.name,e,e),on(this.store.add(e))}get(e){return on(this.store.get(e)).next(t=>(void 0===t&&(t=null),x("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return x("SimpleDb","DELETE",this.store.name,e),on(this.store.delete(e))}count(){return x("SimpleDb","COUNT",this.store.name),on(this.store.count())}W(e,t){const i=this.options(e,t);if(i.index||"function"!=typeof this.store.getAll){const s=this.cursor(i),r=[];return this.H(s,(a,l)=>{r.push(l)}).next(()=>r)}{const s=this.store.getAll(i.range);return new f((r,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{r(l.target.result)}})}}J(e,t){const i=this.store.getAll(e,null===t?void 0:t);return new f((s,r)=>{i.onerror=a=>{r(a.target.error)},i.onsuccess=a=>{s(a.target.result)}})}Y(e,t){x("SimpleDb","DELETE ALL",this.store.name);const i=this.options(e,t);i.X=!1;const s=this.cursor(i);return this.H(s,(r,a,l)=>l.delete())}Z(e,t){let i;t?i=e:(i={},t=e);const s=this.cursor(i);return this.H(s,t)}tt(e){const t=this.cursor({});return new f((i,s)=>{t.onerror=r=>{const a=ya(r.target.error);s(a)},t.onsuccess=r=>{const a=r.target.result;a?e(a.primaryKey,a.value).next(l=>{l?a.continue():i()}):i()}})}H(e,t){const i=[];return new f((s,r)=>{e.onerror=a=>{r(a.target.error)},e.onsuccess=a=>{const l=a.target.result;if(!l)return void s();const c=new fy(l),u=t(l.primaryKey,l.value,c);if(u instanceof f){const h=u.catch(d=>(c.done(),f.reject(d)));i.push(h)}c.isDone?s():null===c.G?l.continue():l.continue(c.G)}}).next(()=>f.waitFor(i))}options(e,t){let i;return void 0!==e&&("string"==typeof e?i=e:t=e),{index:i,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const i=this.store.index(e.index);return e.X?i.openKeyCursor(e.range,t):i.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function on(n){return new f((e,t)=>{n.onsuccess=i=>{e(i.target.result)},n.onerror=i=>{const s=ya(i.target.error);t(s)}})}let Ah=!1;function ya(n){const e=tt.D((0,J.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const i=new z("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ah||(Ah=!0,setTimeout(()=>{throw i},0)),i}}return n}class gy{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;x("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,v.Z)(function*(){t.task=null;try{x("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(i){St(i)?x("IndexBackiller","Ignoring IndexedDB error during index backfill: ",i):yield bt(i)}yield t.nt(6e4)}))}}class _y{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,v.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",i=>t.it(i,e))})()}it(e,t){const i=new Set;let s=t,r=!0;return f.doWhile(()=>!0===r&&s>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(a=>{if(null!==a&&!i.has(a))return x("IndexBackiller",`Processing collection: ${a}`),this.rt(e,a,s).next(l=>{s-=l,i.add(a)});r=!1})).next(()=>t-s)}rt(e,t,i){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(s=>this.localStore.localDocuments.getNextDocuments(e,t,s,i).next(r=>{const a=r.changes;return this.localStore.indexManager.updateIndexEntries(e,a).next(()=>this.ot(s,r)).next(l=>(x("IndexBackiller",`Updating offset: ${l}`),this.localStore.indexManager.updateCollectionGroup(e,t,l))).next(()=>a.size)}))}ot(e,t){let i=e;return t.changes.forEach((s,r)=>{const a=bh(r);ga(a,i)>0&&(i=a)}),new Je(i.readTime,i.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Qe{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ut(i),this.ct=i=>t.writeSequenceNumber(i))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Oh(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function sn(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Dh(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}Qe.at=-1;class ue{constructor(e,t){this.comparator=e,this.root=t||Se.EMPTY}insert(e,t){return new ue(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Se.BLACK,null,null))}remove(e){return new ue(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Se.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(0===i)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(0===s)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _s(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _s(this.root,e,this.comparator,!1)}getReverseIterator(){return new _s(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _s(this.root,e,this.comparator,!0)}}class _s{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(0===r){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Se{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=i??Se.RED,this.left=s??Se.EMPTY,this.right=r??Se.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new Se(e??this.key,t??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):0===r?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Se.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),0===t(e,s.key)){if(s.right.isEmpty())return Se.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Se.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Se.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw O();const e=this.left.check();if(e!==this.right.check())throw O();return e+(this.isRed()?0:1)}}Se.EMPTY=null,Se.RED=!0,Se.BLACK=!1,Se.EMPTY=new class{constructor(){this.size=0}get key(){throw O()}get value(){throw O()}get color(){throw O()}get left(){throw O()}get right(){throw O()}copy(n,e,t,i,s){return this}insert(n,e,t){return new Se(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class H{constructor(e){this.comparator=e,this.data=new ue(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Eh(this.data.getIterator())}getIteratorFrom(e){return new Eh(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof H)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(0!==this.comparator(s,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new H(this.comparator);return t.data=e,t}}class Eh{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pn(n){return n.hasNext()?n.getNext():void 0}class Ke{constructor(e){this.fields=e,e.sort(ce.comparator)}static empty(){return new Ke([])}unionWith(e){let t=new H(ce.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ke(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ln(this.fields,e.fields,(t,i)=>t.isEqual(i))}}class _e{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _e(t)}static fromUint8Array(e){const t=function(i){let s="";for(let r=0;r<i.length;++r)s+=String.fromCharCode(i[r]);return s}(e);return new _e(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return R(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_e.EMPTY_BYTE_STRING=new _e("");const vy=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Nt(n){if(M(!!n),"string"==typeof n){let e=0;const t=vy.exec(n);if(M(!!t),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:he(n.seconds),nanos:he(n.nanos)}}function he(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function rn(n){return"string"==typeof n?_e.fromBase64String(n):_e.fromUint8Array(n)}function va(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Mh(n){const e=n.mapValue.fields.__previous_value__;return va(e)?Mh(e):e}function Ui(n){const e=Nt(n.mapValue.fields.__local_write_time__.timestampValue);return new ie(e.seconds,e.nanos)}class Cy{constructor(e,t,i,s,r,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.useFetchStreams=c}}class At{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new At("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof At&&e.projectId===this.projectId&&e.database===this.database}}function Zi(n){return null==n}function qi(n){return 0===n&&1/n==-1/0}function kh(n){return"number"==typeof n&&Number.isInteger(n)&&!qi(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}const Ot={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},ys={nullValue:"NULL_VALUE"};function an(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?va(n)?4:Lh(n)?9007199254740991:10:O()}function rt(n,e){if(n===e)return!0;const t=an(n);if(t!==an(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ui(n).isEqual(Ui(e));case 3:return function(i,s){if("string"==typeof i.timestampValue&&"string"==typeof s.timestampValue&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const r=Nt(i.timestampValue),a=Nt(s.timestampValue);return r.seconds===a.seconds&&r.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return s=e,rn(n.bytesValue).isEqual(rn(s.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,s){return he(i.geoPointValue.latitude)===he(s.geoPointValue.latitude)&&he(i.geoPointValue.longitude)===he(s.geoPointValue.longitude)}(n,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return he(i.integerValue)===he(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const r=he(i.doubleValue),a=he(s.doubleValue);return r===a?qi(r)===qi(a):isNaN(r)&&isNaN(a)}return!1}(n,e);case 9:return Ln(n.arrayValue.values||[],e.arrayValue.values||[],rt);case 10:return function(i,s){const r=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Oh(r)!==Oh(a))return!1;for(const l in r)if(r.hasOwnProperty(l)&&(void 0===a[l]||!rt(r[l],a[l])))return!1;return!0}(n,e);default:return O()}var s}function $i(n,e){return void 0!==(n.values||[]).find(t=>rt(t,e))}function Dt(n,e){if(n===e)return 0;const t=an(n),i=an(e);if(t!==i)return R(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return R(n.booleanValue,e.booleanValue);case 2:return function(s,r){const a=he(s.integerValue||s.doubleValue),l=he(r.integerValue||r.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return Fh(n.timestampValue,e.timestampValue);case 4:return Fh(Ui(n),Ui(e));case 5:return R(n.stringValue,e.stringValue);case 6:return function(s,r){const a=rn(s),l=rn(r);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,r){const a=s.split("/"),l=r.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=R(a[c],l[c]);if(0!==u)return u}return R(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,r){const a=R(he(s.latitude),he(r.latitude));return 0!==a?a:R(he(s.longitude),he(r.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,r){const a=s.values||[],l=r.values||[];for(let c=0;c<a.length&&c<l.length;++c){const u=Dt(a[c],l[c]);if(u)return u}return R(a.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,r){if(s===Ot.mapValue&&r===Ot.mapValue)return 0;if(s===Ot.mapValue)return 1;if(r===Ot.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=r.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let h=0;h<l.length&&h<u.length;++h){const d=R(l[h],u[h]);if(0!==d)return d;const p=Dt(a[l[h]],c[u[h]]);if(0!==p)return p}return R(l.length,u.length)}(n.mapValue,e.mapValue);default:throw O()}}function Fh(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return R(n,e);const t=Nt(n),i=Nt(e),s=R(t.seconds,i.seconds);return 0!==s?s:R(t.nanos,i.nanos)}function Bn(n){return Ca(n)}function Ca(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(i){const s=Nt(i);return`time(${s.seconds},${s.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?rn(n.bytesValue).toBase64():"referenceValue"in n?I.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(i){let s="[",r=!0;for(const a of i.values||[])r?r=!1:s+=",",s+=Ca(a);return s+"]"}(n.arrayValue):"mapValue"in n?function(i){const s=Object.keys(i.fields||{}).sort();let r="{",a=!0;for(const l of s)a?a=!1:r+=",",r+=`${l}:${Ca(i.fields[l])}`;return r+"}"}(n.mapValue):O();var e}function ln(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function za(n){return!!n&&"integerValue"in n}function Qi(n){return!!n&&"arrayValue"in n}function Vh(n){return!!n&&"nullValue"in n}function Rh(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function vs(n){return!!n&&"mapValue"in n}function ji(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return sn(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ji(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ji(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Lh(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function zy(n){return"nullValue"in n?ys:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ln(At.empty(),I.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:O()}function xy(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ln(At.empty(),I.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Ot:O()}function Ph(n,e){const t=Dt(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Bh(n,e){const t=Dt(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ne{constructor(e){this.value=e}static empty(){return new Ne({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!vs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ji(t)}setAll(e){let t=ce.emptyPath(),i={},s=[];e.forEach((a,l)=>{if(!t.isImmediateParentOf(l)){const c=this.getFieldsMap(t);this.applyChanges(c,i,s),i={},s=[],t=l.popLast()}a?i[l.lastSegment()]=ji(a):s.push(l.lastSegment())});const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());vs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return rt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];vs(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){sn(t,(s,r)=>e[s]=r);for(const s of i)delete e[s]}clone(){return new Ne(ji(this.value))}}function Gh(n){const e=[];return sn(n.fields,(t,i)=>{const s=new ce([t]);if(vs(i)){const r=Gh(i.mapValue).fields;if(0===r.length)e.push(s);else for(const a of r)e.push(s.child(a))}else e.push(s)}),new Ke(e)}class W{constructor(e,t,i,s,r,a){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.data=r,this.documentState=a}static newInvalidDocument(e){return new W(e,0,k.min(),k.min(),Ne.empty(),0)}static newFoundDocument(e,t,i){return new W(e,1,t,k.min(),i,0)}static newNoDocument(e,t){return new W(e,2,t,k.min(),Ne.empty(),0)}static newUnknownDocument(e,t){return new W(e,3,t,k.min(),Ne.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ne.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ne.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=k.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof W&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new W(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ty{constructor(e,t=null,i=[],s=[],r=null,a=null,l=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=a,this.endAt=l,this.ht=null}}function Uh(n,e=null,t=[],i=[],s=null,r=null,a=null){return new Ty(n,e,t,i,s,r,a)}function cn(n){const e=b(n);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>{return(s=i).field.canonicalString()+s.op.toString()+Bn(s.value);var s}).join(","),t+="|ob:",t+=e.orderBy.map(i=>{return(s=i).field.canonicalString()+s.dir;var s}).join(","),Zi(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Bn(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Bn(i)).join(",")),e.ht=t}return e.ht}function Yi(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<n.orderBy.length;s++)if(!Ey(n.orderBy[s],e.orderBy[s]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let s=0;s<n.filters.length;s++)if((t=n.filters[s]).op!==(i=e.filters[s]).op||!t.field.isEqual(i.field)||!rt(t.value,i.value))return!1;var t,i;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!jh(n.startAt,e.startAt)&&jh(n.endAt,e.endAt)}function Cs(n){return I.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function zs(n,e){return n.filters.filter(t=>t instanceof Ae&&t.field.isEqual(e))}function Zh(n,e,t){let i=ys,s=!0;for(const r of zs(n,e)){let a=ys,l=!0;switch(r.op){case"<":case"<=":a=zy(r.value);break;case"==":case"in":case">=":a=r.value;break;case">":a=r.value,l=!1;break;case"!=":case"not-in":a=ys}Ph({value:i,inclusive:s},{value:a,inclusive:l})<0&&(i=a,s=l)}if(null!==t)for(let r=0;r<n.orderBy.length;++r)if(n.orderBy[r].field.isEqual(e)){const a=t.position[r];Ph({value:i,inclusive:s},{value:a,inclusive:t.inclusive})<0&&(i=a,s=t.inclusive);break}return{value:i,inclusive:s}}function qh(n,e,t){let i=Ot,s=!0;for(const r of zs(n,e)){let a=Ot,l=!0;switch(r.op){case">=":case">":a=xy(r.value),l=!1;break;case"==":case"in":case"<=":a=r.value;break;case"<":a=r.value,l=!1;break;case"!=":case"not-in":a=Ot}Bh({value:i,inclusive:s},{value:a,inclusive:l})>0&&(i=a,s=l)}if(null!==t)for(let r=0;r<n.orderBy.length;++r)if(n.orderBy[r].field.isEqual(e)){const a=t.position[r];Bh({value:i,inclusive:s},{value:a,inclusive:t.inclusive})>0&&(i=a,s=t.inclusive);break}return{value:i,inclusive:s}}class Ae extends class{}{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,i):new Iy(e,t,i):"array-contains"===t?new Ny(e,i):"in"===t?new Ay(e,i):"not-in"===t?new Oy(e,i):"array-contains-any"===t?new Dy(e,i):new Ae(e,t,i)}static lt(e,t,i){return"in"===t?new by(e,i):new Sy(e,i)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Dt(t,this.value)):null!==t&&an(this.value)===an(t)&&this.ft(Dt(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return O()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Iy extends Ae{constructor(e,t,i){super(e,t,i),this.key=I.fromName(i.referenceValue)}matches(e){const t=I.comparator(e.key,this.key);return this.ft(t)}}class by extends Ae{constructor(e,t){super(e,"in",t),this.keys=$h(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Sy extends Ae{constructor(e,t){super(e,"not-in",t),this.keys=$h(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function $h(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(i=>I.fromName(i.referenceValue))}class Ny extends Ae{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qi(t)&&$i(t.arrayValue,this.value)}}class Ay extends Ae{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&$i(this.value.arrayValue,t)}}class Oy extends Ae{constructor(e,t){super(e,"not-in",t)}matches(e){if($i(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!$i(this.value.arrayValue,t)}}class Dy extends Ae{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qi(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>$i(this.value.arrayValue,i))}}class Et{constructor(e,t){this.position=e,this.inclusive=t}}class Gn{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ey(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function Qh(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],a=n.position[s];if(i=r.field.isKeyField()?I.comparator(I.fromName(a.referenceValue),t.key):Dt(a,t.data.field(r.field)),"desc"===r.dir&&(i*=-1),0!==i)break}return i}function jh(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!rt(n.position[t],e.position[t]))return!1;return!0}class mt{constructor(e,t=null,i=[],s=[],r=null,a="F",l=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=a,this.startAt=l,this.endAt=c,this._t=null,this.wt=null}}function Yh(n,e,t,i,s,r,a,l){return new mt(n,e,t,i,s,r,a,l)}function Un(n){return new mt(n)}function Hh(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function xa(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Ta(n){for(const e of n.filters)if(e.dt())return e.field;return null}function wa(n){return null!==n.collectionGroup}function Zn(n){const e=b(n);if(null===e._t){e._t=[];const t=Ta(e),i=xa(e);if(null!==t&&null===i)t.isKeyField()||e._t.push(new Gn(t)),e._t.push(new Gn(ce.keyField(),"asc"));else{let s=!1;for(const r of e.explicitOrderBy)e._t.push(r),r.field.isKeyField()&&(s=!0);if(!s){const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new Gn(ce.keyField(),r))}}}return e._t}function Be(n){const e=b(n);if(!e.wt)if("F"===e.limitType)e.wt=Uh(e.path,e.collectionGroup,Zn(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const r of Zn(e))t.push(new Gn(r.field,"desc"===r.dir?"asc":"desc"));const i=e.endAt?new Et(e.endAt.position,e.endAt.inclusive):null,s=e.startAt?new Et(e.startAt.position,e.startAt.inclusive):null;e.wt=Uh(e.path,e.collectionGroup,t,e.filters,e.limit,i,s)}return e.wt}function xs(n,e,t){return new mt(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Hi(n,e){return Yi(Be(n),Be(e))&&n.limitType===e.limitType}function Jh(n){return`${cn(Be(n))}|lt:${n.limitType}`}function Ia(n){return`Query(target=${function wy(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(i=t).field.canonicalString()} ${i.op} ${Bn(i.value)}`;var i}).join(", ")}]`),Zi(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(i=t).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>Bn(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>Bn(t)).join(",")),`Target(${e})`}(Be(n))}; limitType=${n.limitType})`}function ba(n,e){return e.isFoundDocument()&&function(t,i){const s=i.key.path;return null!==t.collectionGroup?i.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(s):I.isDocumentKey(t.path)?t.path.isEqual(s):t.path.isImmediateParentOf(s)}(n,e)&&function(t,i){for(const s of t.explicitOrderBy)if(!s.field.isKeyField()&&null===i.data.field(s.field))return!1;return!0}(n,e)&&function(t,i){for(const s of t.filters)if(!s.matches(i))return!1;return!0}(n,e)&&(i=e,!((t=n).startAt&&!function(s,r,a){const l=Qh(s,r,a);return s.inclusive?l<=0:l<0}(t.startAt,Zn(t),i)||t.endAt&&!function(s,r,a){const l=Qh(s,r,a);return s.inclusive?l>=0:l>0}(t.endAt,Zn(t),i)));var t,i}function Kh(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Wh(n){return(e,t)=>{let i=!1;for(const s of Zn(n)){const r=My(s,e,t);if(0!==r)return r;i=i||s.field.isKeyField()}return 0}}function My(n,e,t){const i=n.field.isKeyField()?I.comparator(e.key,t.key):function(s,r,a){const l=r.data.field(s),c=a.data.field(s);return null!==l&&null!==c?Dt(l,c):O()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return O()}}function Xh(n,e){if(n.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:qi(e)?"-0":e}}function ed(n){return{integerValue:""+n}}function td(n,e){return kh(e)?ed(e):Xh(n,e)}class Ts{constructor(){this._=void 0}}function ky(n,e,t){return n instanceof qn?function(i,s){const r={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&(r.fields.__previous_value__=s),{mapValue:r}}(t,e):n instanceof un?id(n,e):n instanceof hn?od(n,e):function(i,s){const r=nd(i,s),a=sd(r)+sd(i.yt);return za(r)&&za(i.yt)?ed(a):Xh(i.It,a)}(n,e)}function Fy(n,e,t){return n instanceof un?id(n,e):n instanceof hn?od(n,e):t}function nd(n,e){return n instanceof $n?za(t=e)||(i=t)&&"doubleValue"in i?e:{integerValue:0}:null;var i,t}class qn extends Ts{}class un extends Ts{constructor(e){super(),this.elements=e}}function id(n,e){const t=rd(e);for(const i of n.elements)t.some(s=>rt(s,i))||t.push(i);return{arrayValue:{values:t}}}class hn extends Ts{constructor(e){super(),this.elements=e}}function od(n,e){let t=rd(e);for(const i of n.elements)t=t.filter(s=>!rt(s,i));return{arrayValue:{values:t}}}class $n extends Ts{constructor(e,t){super(),this.It=e,this.yt=t}}function sd(n){return he(n.integerValue||n.doubleValue)}function rd(n){return Qi(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Ji{constructor(e,t){this.field=e,this.transform=t}}class Ry{constructor(e,t){this.version=e,this.transformResults=t}}class oe{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new oe}static exists(e){return new oe(void 0,e)}static updateTime(e){return new oe(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function ws(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Is{}function ad(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new jn(n.key,oe.none()):new Qn(n.key,n.data,oe.none());{const t=n.data,i=Ne.empty();let s=new H(ce.comparator);for(let r of e.fields)if(!s.has(r)){let a=t.field(r);null===a&&r.length>1&&(r=r.popLast(),a=t.field(r)),null===a?i.delete(r):i.set(r,a),s=s.add(r)}return new gt(n.key,i,new Ke(s.toArray()),oe.none())}}function Ly(n,e,t){n instanceof Qn?function(i,s,r){const a=i.value.clone(),l=ud(i.fieldTransforms,s,r.transformResults);a.setAll(l),s.convertToFoundDocument(r.version,a).setHasCommittedMutations()}(n,e,t):n instanceof gt?function(i,s,r){if(!ws(i.precondition,s))return void s.convertToUnknownDocument(r.version);const a=ud(i.fieldTransforms,s,r.transformResults),l=s.data;l.setAll(cd(i)),l.setAll(a),s.convertToFoundDocument(r.version,l).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Ki(n,e,t,i){return n instanceof Qn?function(s,r,a,l){if(!ws(s.precondition,r))return a;const c=s.value.clone(),u=hd(s.fieldTransforms,l,r);return c.setAll(u),r.convertToFoundDocument(r.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof gt?function(s,r,a,l){if(!ws(s.precondition,r))return a;const c=hd(s.fieldTransforms,l,r),u=r.data;return u.setAll(cd(s)),u.setAll(c),r.convertToFoundDocument(r.version,u).setHasLocalMutations(),null===a?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,e,t,i):(a=t,ws(n.precondition,r=e)?(r.convertToNoDocument(r.version).setHasLocalMutations(),null):a);var r,a}function Py(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),r=nd(i.transform,s||null);null!=r&&(null===t&&(t=Ne.empty()),t.set(i.field,r))}return t||null}function ld(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(i=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===i||t&&i&&Ln(t,i,(s,r)=>function Vy(n,e){return n.field.isEqual(e.field)&&(i=e.transform,(t=n.transform)instanceof un&&i instanceof un||t instanceof hn&&i instanceof hn?Ln(t.elements,i.elements,rt):t instanceof $n&&i instanceof $n?rt(t.yt,i.yt):t instanceof qn&&i instanceof qn);var t,i}(s,r))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,i}class Qn extends Is{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class gt extends Is{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function cd(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function ud(n,e,t){const i=new Map;M(n.length===t.length);for(let s=0;s<t.length;s++){const r=n[s],a=r.transform,l=e.data.field(r.field);i.set(r.field,Fy(a,l,t[s]))}return i}function hd(n,e,t){const i=new Map;for(const s of n){const r=s.transform,a=t.data.field(s.field);i.set(s.field,ky(r,a,e))}return i}class jn extends Is{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Sa extends Is{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class By{constructor(e){this.count=e}}var me,$;function dd(n){switch(n){default:return O();case m.CANCELLED:case m.UNKNOWN:case m.DEADLINE_EXCEEDED:case m.RESOURCE_EXHAUSTED:case m.INTERNAL:case m.UNAVAILABLE:case m.UNAUTHENTICATED:return!1;case m.INVALID_ARGUMENT:case m.NOT_FOUND:case m.ALREADY_EXISTS:case m.PERMISSION_DENIED:case m.FAILED_PRECONDITION:case m.ABORTED:case m.OUT_OF_RANGE:case m.UNIMPLEMENTED:case m.DATA_LOSS:return!0}}function pd(n){if(void 0===n)return de("GRPC error has no .code"),m.UNKNOWN;switch(n){case me.OK:return m.OK;case me.CANCELLED:return m.CANCELLED;case me.UNKNOWN:return m.UNKNOWN;case me.DEADLINE_EXCEEDED:return m.DEADLINE_EXCEEDED;case me.RESOURCE_EXHAUSTED:return m.RESOURCE_EXHAUSTED;case me.INTERNAL:return m.INTERNAL;case me.UNAVAILABLE:return m.UNAVAILABLE;case me.UNAUTHENTICATED:return m.UNAUTHENTICATED;case me.INVALID_ARGUMENT:return m.INVALID_ARGUMENT;case me.NOT_FOUND:return m.NOT_FOUND;case me.ALREADY_EXISTS:return m.ALREADY_EXISTS;case me.PERMISSION_DENIED:return m.PERMISSION_DENIED;case me.FAILED_PRECONDITION:return m.FAILED_PRECONDITION;case me.ABORTED:return m.ABORTED;case me.OUT_OF_RANGE:return m.OUT_OF_RANGE;case me.UNIMPLEMENTED:return m.UNIMPLEMENTED;case me.DATA_LOSS:return m.DATA_LOSS;default:return O()}}($=me||(me={}))[$.OK=0]="OK",$[$.CANCELLED=1]="CANCELLED",$[$.UNKNOWN=2]="UNKNOWN",$[$.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$[$.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$[$.NOT_FOUND=5]="NOT_FOUND",$[$.ALREADY_EXISTS=6]="ALREADY_EXISTS",$[$.PERMISSION_DENIED=7]="PERMISSION_DENIED",$[$.UNAUTHENTICATED=16]="UNAUTHENTICATED",$[$.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$[$.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$[$.ABORTED=10]="ABORTED",$[$.OUT_OF_RANGE=11]="OUT_OF_RANGE",$[$.UNIMPLEMENTED=12]="UNIMPLEMENTED",$[$.INTERNAL=13]="INTERNAL",$[$.UNAVAILABLE=14]="UNAVAILABLE",$[$.DATA_LOSS=15]="DATA_LOSS";class Mt{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0!==i)for(const[s,r]of i)if(this.equalsFn(s,e))return r}has(e){return void 0!==this.get(e)}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(void 0===s)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(void 0===i)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return 1===i.length?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){sn(this.inner,(t,i)=>{for(const[s,r]of i)e(s,r)})}isEmpty(){return Dh(this.inner)}size(){return this.innerSize}}const Gy=new ue(I.comparator);function je(){return Gy}const fd=new ue(I.comparator);function Wi(...n){let e=fd;for(const t of n)e=e.insert(t.key,t);return e}function md(n){let e=fd;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function at(){return Xi()}function gd(){return Xi()}function Xi(){return new Mt(n=>n.toString(),(n,e)=>n.isEqual(e))}const Uy=new ue(I.comparator),Zy=new H(I.comparator);function L(...n){let e=Zy;for(const t of n)e=e.add(t);return e}const qy=new H(R);function bs(){return qy}class eo{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,to.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new eo(k.min(),s,bs(),je(),L())}}class to{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new to(i,t,L(),L(),L())}}class Ss{constructor(e,t,i,s){this.Tt=e,this.removedTargetIds=t,this.key=i,this.Et=s}}class _d{constructor(e,t){this.targetId=e,this.At=t}}class yd{constructor(e,t,i=_e.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class vd{constructor(){this.Rt=0,this.bt=zd(),this.Pt=_e.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=L(),t=L(),i=L();return this.bt.forEach((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:O()}}),new to(this.Pt,this.vt,e,t,i)}Nt(){this.Vt=!1,this.bt=zd()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class $y{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=je(),this.qt=Cd(),this.Kt=new H(R)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const i=this.zt(t);switch(e.state){case 0:this.Ht(t)&&i.Ct(e.resumeToken);break;case 1:i.Ft(),i.St||i.Nt(),i.Ct(e.resumeToken);break;case 2:i.Ft(),i.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(i.$t(),i.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),i.Ct(e.resumeToken));break;default:O()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((i,s)=>{this.Ht(s)&&t(s)})}Yt(e){const t=e.targetId,i=e.At.count,s=this.Xt(t);if(s){const r=s.target;if(Cs(r))if(0===i){const a=new I(r.path);this.jt(t,a,W.newNoDocument(a,k.min()))}else M(1===i);else this.Zt(t)!==i&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((r,a)=>{const l=this.Xt(a);if(l){if(r.current&&Cs(l.target)){const c=new I(l.target.path);null!==this.Ut.get(c)||this.ee(a,c)||this.jt(a,c,W.newNoDocument(c,e))}r.Dt&&(t.set(a,r.xt()),r.Nt())}});let i=L();this.qt.forEach((r,a)=>{let l=!0;a.forEachWhile(c=>{const u=this.Xt(c);return!u||2===u.purpose||(l=!1,!1)}),l&&(i=i.add(r))}),this.Ut.forEach((r,a)=>a.setReadTime(e));const s=new eo(e,t,this.Kt,this.Ut,i);return this.Ut=je(),this.qt=Cd(),this.Kt=new H(R),s}Qt(e,t){if(!this.Ht(e))return;const i=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,i),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,i){if(!this.Ht(e))return;const s=this.zt(e);this.ee(e,t)?s.kt(t,1):s.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),i&&(this.Ut=this.Ut.insert(t,i))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new vd,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new H(R),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||x("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new vd),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function Cd(){return new ue(I.comparator)}function zd(){return new ue(I.comparator)}const Qy={asc:"ASCENDING",desc:"DESCENDING"},jy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Yy{constructor(e,t){this.databaseId=e,this.gt=t}}function no(n,e){return n.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function xd(n,e){return n.gt?e.toBase64():e.toUint8Array()}function Hy(n,e){return no(n,e.toTimestamp())}function Ce(n){return M(!!n),k.fromTimestamp(function(e){const t=Nt(e);return new ie(t.seconds,t.nanos)}(n))}function Na(n,e){return(t=n,new q(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Td(n){const e=q.fromString(n);return M(Dd(e)),e}function io(n,e){return Na(n.databaseId,e.path)}function lt(n,e){const t=Td(e);if(t.get(1)!==n.databaseId.projectId)throw new z(m.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(m.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new I(Id(t))}function Aa(n,e){return Na(n.databaseId,e)}function wd(n){const e=Td(n);return 4===e.length?q.emptyPath():Id(e)}function oo(n){return new q(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function Id(n){return M(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function bd(n,e,t){return{name:io(n,e),fields:t.value.mapValue.fields}}function Sd(n,e,t){const i=lt(n,e.name),s=Ce(e.updateTime),r=new Ne({mapValue:{fields:e.fields}}),a=W.newFoundDocument(i,s,r);return t&&a.setHasCommittedMutations(),t?a.setHasCommittedMutations():a}function so(n,e){let t;if(e instanceof Qn)t={update:bd(n,e.key,e.value)};else if(e instanceof jn)t={delete:io(n,e.key)};else if(e instanceof gt)t={update:bd(n,e.key,e.data),updateMask:ov(e.fieldMask)};else{if(!(e instanceof Sa))return O();t={verify:io(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,r){const a=r.transform;if(a instanceof qn)return{fieldPath:r.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof un)return{fieldPath:r.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof hn)return{fieldPath:r.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof $n)return{fieldPath:r.field.canonicalString(),increment:a.yt};throw O()}(0,i))),e.precondition.isNone||(t.currentDocument=void 0!==(s=e.precondition).updateTime?{updateTime:Hy(n,s.updateTime)}:void 0!==s.exists?{exists:s.exists}:O()),t;var s}function Oa(n,e){const t=e.currentDocument?void 0!==(s=e.currentDocument).updateTime?oe.updateTime(Ce(s.updateTime)):void 0!==s.exists?oe.exists(s.exists):oe.none():oe.none(),i=e.updateTransforms?e.updateTransforms.map(s=>function(r,a){let l=null;"setToServerValue"in a?(M("REQUEST_TIME"===a.setToServerValue),l=new qn):"appendMissingElements"in a?l=new un(a.appendMissingElements.values||[]):"removeAllFromArray"in a?l=new hn(a.removeAllFromArray.values||[]):"increment"in a?l=new $n(r,a.increment):O();const c=ce.fromServerFormat(a.fieldPath);return new Ji(c,l)}(n,s)):[];var s;if(e.update){const s=lt(n,e.update.name),r=new Ne({mapValue:{fields:e.update.fields}});if(e.updateMask){const a=new Ke((e.updateMask.fieldPaths||[]).map(u=>ce.fromServerFormat(u)));return new gt(s,r,a,t,i)}return new Qn(s,r,t,i)}if(e.delete){const s=lt(n,e.delete);return new jn(s,t)}if(e.verify){const s=lt(n,e.verify);return new Sa(s,t)}return O()}function Nd(n,e){return{documents:[Aa(n,e.path)]}}function Da(n,e){const t={structuredQuery:{}},i=e.path;null!==e.collectionGroup?(t.parent=Aa(n,i),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Aa(n,i.popLast()),t.structuredQuery.from=[{collectionId:i.lastSegment()}]);const s=function(c){if(0===c.length)return;const u=c.map(h=>function(d){if("=="===d.op){if(Rh(d.value))return{unaryFilter:{field:Yn(d.field),op:"IS_NAN"}};if(Vh(d.value))return{unaryFilter:{field:Yn(d.field),op:"IS_NULL"}}}else if("!="===d.op){if(Rh(d.value))return{unaryFilter:{field:Yn(d.field),op:"IS_NOT_NAN"}};if(Vh(d.value))return{unaryFilter:{field:Yn(d.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yn(d.field),op:tv(d.op),value:d.value}}}(h));return 1===u.length?u[0]:{compositeFilter:{op:"AND",filters:u}}}(e.filters);s&&(t.structuredQuery.where=s);const r=function(c){if(0!==c.length)return c.map(u=>{return{field:Yn((h=u).field),direction:ev(h.dir)};var h})}(e.orderBy);r&&(t.structuredQuery.orderBy=r);const a=(u=e.limit,n.gt||Zi(u)?u:{value:u});var u,l,c;return null!==a&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt={before:(l=e.startAt).inclusive,values:l.position}),e.endAt&&(t.structuredQuery.endAt={before:!(c=e.endAt).inclusive,values:c.position}),t}function Ad(n){let e=wd(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){M(1===i);const h=t.from[0];h.allDescendants?s=h.collectionId:e=e.child(h.collectionId)}let r=[];t.where&&(r=Od(t.where));let a=[];t.orderBy&&(a=t.orderBy.map(h=>{return new Gn(Hn((d=h).field),function(p){switch(p){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(d.direction));var d}));let l=null;t.limit&&(l=function(h){let d;return d="object"==typeof h?h.value:h,Zi(d)?null:d}(t.limit));let c=null;var h;t.startAt&&(c=new Et((h=t.startAt).values||[],!!h.before));let u=null;return t.endAt&&(u=function(h){return new Et(h.values||[],!h.before)}(t.endAt)),Yh(e,s,a,r,l,"F",c,u)}function Od(n){return n?void 0!==n.unaryFilter?[iv(n)]:void 0!==n.fieldFilter?[nv(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>Od(e)).reduce((e,t)=>e.concat(t)):O():[]}function ev(n){return Qy[n]}function tv(n){return jy[n]}function Yn(n){return{fieldPath:n.canonicalString()}}function Hn(n){return ce.fromServerFormat(n.fieldPath)}function nv(n){return Ae.create(Hn(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return O()}}(n.fieldFilter.op),n.fieldFilter.value)}function iv(n){switch(n.unaryFilter.op){case"IS_NAN":const e=Hn(n.unaryFilter.field);return Ae.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=Hn(n.unaryFilter.field);return Ae.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hn(n.unaryFilter.field);return Ae.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Hn(n.unaryFilter.field);return Ae.create(s,"!=",{nullValue:"NULL_VALUE"});default:return O()}}function ov(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Dd(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Ge(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ed(e)),e=sv(n.get(t),e);return Ed(e)}function sv(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const r=n.charAt(s);switch(r){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=r}}return t}function Ed(n){return n+"\x01\x01"}function ct(n){const e=n.length;if(M(e>=2),2===e)return M("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),q.emptyPath();const t=e-2,i=[];let s="";for(let r=0;r<e;){const a=n.indexOf("\x01",r);switch((a<0||a>t)&&O(),n.charAt(a+1)){case"\x01":const l=n.substring(r,a);let c;0===s.length?c=l:(s+=l,c=s,s=""),i.push(c);break;case"\x10":s+=n.substring(r,a),s+="\0";break;case"\x11":s+=n.substring(r,a+1);break;default:O()}r=a+2}return new q(i)}const Md=["userId","batchId"];function Ns(n,e){return[n,Ge(e)]}function kd(n,e,t){return[n,Ge(e),t]}const rv={},av=["prefixPath","collectionGroup","readTime","documentId"],lv=["prefixPath","collectionGroup","documentId"],cv=["collectionGroup","readTime","prefixPath","documentId"],uv=["canonicalId","targetId"],hv=["targetId","path"],dv=["path","targetId"],pv=["collectionId","parent"],fv=["indexId","uid"],mv=["uid","sequenceNumber"],gv=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],_v=["indexId","uid","orderedDocumentKey"],yv=["userId","collectionPath","documentId"],vv=["userId","collectionPath","largestBatchId"],Cv=["userId","collectionGroup","largestBatchId"],Fd=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],zv=[...Fd,"documentOverlays"],Vd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Rd=Vd,xv=[...Rd,"indexConfiguration","indexState","indexEntries"];class Ea extends Nh{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function ze(n,e){const t=b(n);return tt.M(t.ie,e)}class Ma{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&Ly(r,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ki(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Ki(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=gd();return this.mutations.forEach(s=>{const r=e.get(s.key),a=r.overlayedDocument;let l=this.applyToLocalView(a,r.mutatedFields);l=t.has(s.key)?null:l;const c=ad(a,l);null!==c&&i.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(k.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),L())}isEqual(e){return this.batchId===e.batchId&&Ln(this.mutations,e.mutations,(t,i)=>ld(t,i))&&Ln(this.baseMutations,e.baseMutations,(t,i)=>ld(t,i))}}class ka{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){M(e.mutations.length===i.length);let s=Uy;const r=e.mutations;for(let a=0;a<r.length;a++)s=s.insert(r[a].key,i[a].version);return new ka(e,t,i,s)}}class Fa{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class kt{constructor(e,t,i,s,r=k.min(),a=k.min(),l=_e.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l}withSequenceNumber(e){return new kt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new kt(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new kt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ld{constructor(e){this.re=e}}function Pd(n,e){const t=e.key,i={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:As(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document={name:io(s=n.re,(r=e).key),fields:r.data.value.mapValue.fields,updateTime:no(s,r.version.toTimestamp())};else if(e.isNoDocument())i.noDocument={path:t.path.toArray(),readTime:dn(e.version)};else{if(!e.isUnknownDocument())return O();i.unknownDocument={path:t.path.toArray(),version:dn(e.version)}}var s,r;return i}function As(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function dn(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function pn(n){const e=new ie(n.seconds,n.nanoseconds);return k.fromTimestamp(e)}function fn(n,e){const t=(e.baseMutations||[]).map(r=>Oa(n.re,r));for(let r=0;r<e.mutations.length-1;++r){const a=e.mutations[r];r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(a.updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r)}const i=e.mutations.map(r=>Oa(n.re,r)),s=ie.fromMillis(e.localWriteTimeMs);return new Ma(e.batchId,s,t,i)}function ro(n){const e=pn(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?pn(n.lastLimboFreeSnapshotVersion):k.min();let i;var s;return void 0!==n.query.documents?(M(1===(s=n.query).documents.length),i=Be(Un(wd(s.documents[0])))):i=Be(Ad(n.query)),new kt(i,n.targetId,0,n.lastListenSequenceNumber,e,t,_e.fromBase64String(n.resumeToken))}function Bd(n,e){const t=dn(e.snapshotVersion),i=dn(e.lastLimboFreeSnapshotVersion);let s;s=Cs(e.target)?Nd(n.re,e.target):Da(n.re,e.target);const r=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:cn(e.target),readTime:t,resumeToken:r,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:s}}function Va(n){const e=Ad({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?xs(e,e.limit,"L"):e}function Ra(n,e){return new Fa(e.largestBatchId,Oa(n.re,e.overlayMutation))}function Gd(n,e){const t=e.path.lastSegment();return[n,Ge(e.path.popLast()),t]}function Ud(n,e,t,i){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:dn(i.readTime),documentKey:Ge(i.documentKey.path),largestBatchId:i.largestBatchId}}class wv{getBundleMetadata(e,t){return Zd(e).get(t).next(i=>{if(i)return{id:(s=i).bundleId,createTime:pn(s.createTime),version:s.version};var s})}saveBundleMetadata(e,t){return Zd(e).put({bundleId:(i=t).id,createTime:dn(Ce(i.createTime)),version:i.version});var i}getNamedQuery(e,t){return qd(e).get(t).next(i=>{if(i)return{name:(s=i).name,query:Va(s.bundledQuery),readTime:pn(s.readTime)};var s})}saveNamedQuery(e,t){return qd(e).put({name:(i=t).name,readTime:dn(Ce(i.readTime)),bundledQuery:i.bundledQuery});var i}}function Zd(n){return ze(n,"bundles")}function qd(n){return ze(n,"namedQueries")}class Os{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new Os(e,t.uid||"")}getOverlay(e,t){return ao(e).get(Gd(this.userId,t)).next(i=>i?Ra(this.It,i):null)}getOverlays(e,t){const i=at();return f.forEach(t,s=>this.getOverlay(e,s).next(r=>{null!==r&&i.set(s,r)})).next(()=>i)}saveOverlays(e,t,i){const s=[];return i.forEach((r,a)=>{const l=new Fa(t,a);s.push(this.ue(e,l))}),f.waitFor(s)}removeOverlaysForBatchId(e,t,i){const s=new Set;t.forEach(a=>s.add(Ge(a.getCollectionPath())));const r=[];return s.forEach(a=>{const l=IDBKeyRange.bound([this.userId,a,i],[this.userId,a,i+1],!1,!0);r.push(ao(e).Y("collectionPathOverlayIndex",l))}),f.waitFor(r)}getOverlaysForCollection(e,t,i){const s=at(),r=Ge(t),a=IDBKeyRange.bound([this.userId,r,i],[this.userId,r,Number.POSITIVE_INFINITY],!0);return ao(e).W("collectionPathOverlayIndex",a).next(l=>{for(const c of l){const u=Ra(this.It,c);s.set(u.getKey(),u)}return s})}getOverlaysForCollectionGroup(e,t,i,s){const r=at();let a;const l=IDBKeyRange.bound([this.userId,t,i],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ao(e).Z({index:"collectionGroupOverlayIndex",range:l},(c,u,h)=>{const d=Ra(this.It,u);r.size()<s||d.largestBatchId===a?(r.set(d.getKey(),d),a=d.largestBatchId):h.done()}).next(()=>r)}ue(e,t){return ao(e).put(function(i,s,r){const[a,l,c]=Gd(s,r.mutation.key);return{userId:s,collectionPath:l,documentId:c,collectionGroup:r.mutation.key.getCollectionGroup(),largestBatchId:r.largestBatchId,overlayMutation:so(i.re,r.mutation)}}(this.It,this.userId,t))}}function ao(n){return ze(n,"documentOverlays")}class mn{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(he(e.integerValue));else if("doubleValue"in e){const i=he(e.doubleValue);isNaN(i)?this.le(t,13):(this.le(t,15),qi(i)?t.fe(0):t.fe(i))}else if("timestampValue"in e){const i=e.timestampValue;this.le(t,20),"string"==typeof i?t.de(i):(t.de(`${i.seconds||""}`),t.fe(i.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(rn(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const i=e.geoPointValue;this.le(t,45),t.fe(i.latitude||0),t.fe(i.longitude||0)}else"mapValue"in e?Lh(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):O()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const i=e.fields||{};this.le(t,55);for(const s of Object.keys(i))this._e(s,t),this.ae(i[s],t)}pe(e,t){const i=e.values||[];this.le(t,50);for(const s of i)this.ae(s,t)}ge(e,t){this.le(t,37),I.fromName(e).path.forEach(i=>{this.le(t,60),this.Ie(i,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function Iv(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function $d(n){const e=64-function(t){let i=0;for(let s=0;s<8;++s){const r=Iv(255&t[s]);if(i+=r,8!==r)break}return i}(n);return Math.ceil(e/8)}mn.Te=new mn;class bv{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Ae(i.value),i=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let i=t.next();for(;!i.done;)this.Pe(i.value),i=t.next();this.ve()}Ve(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Ae(i);else if(i<2048)this.Ae(960|i>>>6),this.Ae(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|i>>>12),this.Ae(128|63&i>>>6),this.Ae(128|63&i);else{const s=t.codePointAt(0);this.Ae(240|s>>>18),this.Ae(128|63&s>>>12),this.Ae(128|63&s>>>6),this.Ae(128|63&s)}}this.Re()}Se(e){for(const t of e){const i=t.charCodeAt(0);if(i<128)this.Pe(i);else if(i<2048)this.Pe(960|i>>>6),this.Pe(128|63&i);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|i>>>12),this.Pe(128|63&i>>>6),this.Pe(128|63&i);else{const s=t.codePointAt(0);this.Pe(240|s>>>18),this.Pe(128|63&s>>>12),this.Pe(128|63&s>>>6),this.Pe(128|63&s)}}this.ve()}De(e){const t=this.Ce(e),i=$d(t);this.xe(1+i),this.buffer[this.position++]=255&i;for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=255&t[s]}Ne(e){const t=this.Ce(e),i=$d(t);this.xe(1+i),this.buffer[this.position++]=~(255&i);for(let s=t.length-i;s<t.length;++s)this.buffer[this.position++]=~(255&t[s])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(s){const r=new DataView(new ArrayBuffer(8));return r.setFloat64(0,s,!1),new Uint8Array(r.buffer)}(e),i=0!=(128&t[0]);t[0]^=i?255:128;for(let s=1;s<t.length;++s)t[s]^=i?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let i=2*this.buffer.length;i<t&&(i=t);const s=new Uint8Array(i);s.set(this.buffer),this.buffer=s}}class Sv{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class Nv{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class lo{constructor(){this.Be=new bv,this.Le=new Sv(this.Be),this.Ue=new Nv(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class gn{constructor(e,t,i,s){this.indexId=e,this.documentKey=t,this.arrayValue=i,this.directionalValue=s}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,i=new Uint8Array(t);return i.set(this.directionalValue,0),t!==e?i.set([0],this.directionalValue.length):++i[i.length-1],new gn(this.indexId,this.documentKey,this.arrayValue,i)}}function _n(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Qd(n.arrayValue,e.arrayValue),0!==t?t:(t=Qd(n.directionalValue,e.directionalValue),0!==t?t:I.comparator(n.documentKey,e.documentKey)))}function Qd(n,e){for(let t=0;t<n.length&&t<e.length;++t){const i=n[t]-e[t];if(0!==i)return i}return n.length-e.length}class Av{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const i=t;i.dt()?this.je=i:this.Qe.push(i)}}We(e){const t=ma(e);if(void 0!==t&&!this.ze(t))return!1;const i=nn(e);let s=0,r=0;for(;s<i.length&&this.ze(i[s]);++s);if(s===i.length)return!0;if(void 0!==this.je){const a=i[s];if(!this.He(this.je,a)||!this.Je(this.Ge[r++],a))return!1;++s}for(;s<i.length;++s){const a=i[s];if(r>=this.Ge.length||!this.Je(this.Ge[r++],a))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Ov{constructor(){this.Ye=new La}addToCollectionParentIndex(e,t){return this.Ye.add(t),f.resolve()}getCollectionParents(e,t){return f.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return f.resolve()}deleteFieldIndex(e,t){return f.resolve()}getDocumentsMatchingTarget(e,t){return f.resolve(null)}getIndexType(e,t){return f.resolve(0)}getFieldIndexes(e,t){return f.resolve([])}getNextCollectionGroupToUpdate(e){return f.resolve(null)}getMinOffset(e,t){return f.resolve(Je.min())}getMinOffsetFromCollectionGroup(e,t){return f.resolve(Je.min())}updateCollectionGroup(e,t,i){return f.resolve()}updateIndexEntries(e,t){return f.resolve()}}class La{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new H(q.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new H(q.comparator)).toArray()}}const Ds=new Uint8Array(0);class Dv{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new La,this.Ze=new Mt(i=>cn(i),(i,s)=>Yi(i,s)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const i=t.lastSegment(),s=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const r={collectionId:i,parent:Ge(s)};return jd(e).put(r)}return f.resolve()}getCollectionParents(e,t){const i=[],s=IDBKeyRange.bound([t,""],[wh(t),""],!1,!0);return jd(e).W(s).next(r=>{for(const a of r){if(a.collectionId!==t)break;i.push(ct(a.parent))}return i})}addFieldIndex(e,t){const i=Es(e),s={indexId:(a=t).indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind])};var a;delete s.indexId;const r=i.add(s);if(t.indexState){const a=uo(e);return r.next(l=>{a.put(Ud(l,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return r.next()}deleteFieldIndex(e,t){const i=Es(e),s=uo(e),r=co(e);return i.delete(t.indexId).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const i=co(e);let s=!0;const r=new Map;return f.forEach(this.tn(t),a=>this.en(e,a).next(l=>{s&&(s=!!l),r.set(a,l)})).next(()=>{if(s){let a=L();const l=[];return f.forEach(r,(c,u)=>{var h;x("IndexedDbIndexManager",`Using index ${h=c,`id=${h.indexId}|cg=${h.collectionGroup}|f=${h.fields.map(B=>`${B.fieldPath}:${B.kind}`).join(",")}`} to execute ${cn(t)}`);const d=function(B,re){const U=ma(re);if(void 0===U)return null;for(const Q of zs(B,U.fieldPath))switch(Q.op){case"array-contains-any":return Q.value.arrayValue.values||[];case"array-contains":return[Q.value]}return null}(u,c),p=function(B,re){const U=new Map;for(const Q of nn(re))for(const fe of zs(B,Q.fieldPath))switch(fe.op){case"==":case"in":U.set(Q.fieldPath.canonicalString(),fe.value);break;case"not-in":case"!=":return U.set(Q.fieldPath.canonicalString(),fe.value),Array.from(U.values())}return null}(u,c),g=function(B,re){const U=[];let Q=!0;for(const fe of nn(re)){const Dn=0===fe.kind?Zh(B,fe.fieldPath,B.startAt):qh(B,fe.fieldPath,B.startAt);U.push(Dn.value),Q&&(Q=Dn.inclusive)}return new Et(U,Q)}(u,c),y=function(B,re){const U=[];let Q=!0;for(const fe of nn(re)){const Dn=0===fe.kind?qh(B,fe.fieldPath,B.endAt):Zh(B,fe.fieldPath,B.endAt);U.push(Dn.value),Q&&(Q=Dn.inclusive)}return new Et(U,Q)}(u,c),w=this.nn(c,u,g),N=this.nn(c,u,y),G=this.sn(c,u,p),Y=this.rn(c.indexId,d,w,g.inclusive,N,y.inclusive,G);return f.forEach(Y,B=>i.J(B,t.limit).next(re=>{re.forEach(U=>{const Q=I.fromSegments(U.documentKey);a.has(Q)||(a=a.add(Q),l.push(Q))})}))}).next(()=>l)}return f.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,i,s,r,a,l){const c=(null!=t?t.length:1)*Math.max(i.length,r.length),u=c/(null!=t?t.length:1),h=[];for(let d=0;d<c;++d){const p=t?this.on(t[d/u]):Ds,g=this.un(e,p,i[d%u],s),y=this.cn(e,p,r[d%u],a),w=l.map(N=>this.un(e,p,N,!0));h.push(...this.createRange(g,y,w))}return h}un(e,t,i,s){const r=new gn(e,I.empty(),t,i);return s?r:r.Ke()}cn(e,t,i,s){const r=new gn(e,I.empty(),t,i);return s?r.Ke():r}en(e,t){const i=new Av(t),s=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,s).next(r=>{let a=null;for(const l of r)i.We(l)&&(!a||l.fields.length>a.fields.length)&&(a=l);return a})}getIndexType(e,t){let i=2;return f.forEach(this.tn(t),s=>this.en(e,s).next(r=>{r?0!==i&&r.fields.length<function(a){let l=new H(ce.comparator),c=!1;for(const u of a.filters){const h=u;h.field.isKeyField()||("array-contains"===h.op||"array-contains-any"===h.op?c=!0:l=l.add(h.field))}for(const u of a.orderBy)u.field.isKeyField()||(l=l.add(u.field));return l.size+(c?1:0)}(s)&&(i=1):i=0})).next(()=>i)}an(e,t){const i=new lo;for(const s of nn(e)){const r=t.data.field(s.fieldPath);if(null==r)return null;const a=i.qe(s.kind);mn.Te.ce(r,a)}return i.$e()}on(e){const t=new lo;return mn.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const i=new lo;return mn.Te.ce(ln(this.databaseId,t),i.qe(function(s){const r=nn(s);return 0===r.length?0:r[r.length-1].kind}(e))),i.$e()}sn(e,t,i){if(null===i)return[];let s=[];s.push(new lo);let r=0;for(const a of nn(e)){const l=i[r++];for(const c of s)if(this.ln(t,a.fieldPath)&&Qi(l))s=this.fn(s,a,l);else{const u=c.qe(a.kind);mn.Te.ce(l,u)}}return this.dn(s)}nn(e,t,i){return this.sn(e,t,i.position)}dn(e){const t=[];for(let i=0;i<e.length;++i)t[i]=e[i].$e();return t}fn(e,t,i){const s=[...e],r=[];for(const a of i.arrayValue.values||[])for(const l of s){const c=new lo;c.seed(l.$e()),mn.Te.ce(a,c.qe(t.kind)),r.push(c)}return r}ln(e,t){return!!e.filters.find(i=>i instanceof Ae&&i.field.isEqual(t)&&("in"===i.op||"not-in"===i.op))}getFieldIndexes(e,t){const i=Es(e),s=uo(e);return(t?i.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):i.W()).next(r=>{const a=[];return f.forEach(r,l=>s.get([l.indexId,this.uid]).next(c=>{a.push(function(u,h){const d=h?new Bi(h.sequenceNumber,new Je(pn(h.readTime),new I(ct(h.documentKey)),h.largestBatchId)):Bi.empty(),p=u.fields.map(([g,y])=>new ms(ce.fromServerFormat(g),y));return new fs(u.indexId,u.collectionGroup,p,d)}(l,c))})).next(()=>a)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((i,s)=>{const r=i.indexState.sequenceNumber-s.indexState.sequenceNumber;return 0!==r?r:R(i.collectionGroup,s.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,i){const s=Es(e),r=uo(e);return this._n(e).next(a=>s.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(l=>f.forEach(l,c=>r.put(Ud(c.indexId,this.user,a,i)))))}updateIndexEntries(e,t){const i=new Map;return f.forEach(t,(s,r)=>{const a=i.get(s.collectionGroup);return(a?f.resolve(a):this.getFieldIndexes(e,s.collectionGroup)).next(l=>(i.set(s.collectionGroup,l),f.forEach(l,c=>this.wn(e,s,c).next(u=>{const h=this.mn(r,c);return u.isEqual(h)?f.resolve():this.gn(e,r,c,u,h)}))))})}yn(e,t,i,s){return co(e).put({indexId:s.indexId,uid:this.uid,arrayValue:s.arrayValue,directionalValue:s.directionalValue,orderedDocumentKey:this.hn(i,t.key),documentKey:t.key.path.toArray()})}pn(e,t,i,s){return co(e).delete([s.indexId,this.uid,s.arrayValue,s.directionalValue,this.hn(i,t.key),t.key.path.toArray()])}wn(e,t,i){const s=co(e);let r=new H(_n);return s.Z({index:"documentKeyIndex",range:IDBKeyRange.only([i.indexId,this.uid,this.hn(i,t)])},(a,l)=>{r=r.add(new gn(i.indexId,t,l.arrayValue,l.directionalValue))}).next(()=>r)}mn(e,t){let i=new H(_n);const s=this.an(t,e);if(null==s)return i;const r=ma(t);if(null!=r){const a=e.data.field(r.fieldPath);if(Qi(a))for(const l of a.arrayValue.values||[])i=i.add(new gn(t.indexId,e.key,this.on(l),s))}else i=i.add(new gn(t.indexId,e.key,Ds,s));return i}gn(e,t,i,s,r){x("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(l,c,u,h,d){const p=l.getIterator(),g=c.getIterator();let y=Pn(p),w=Pn(g);for(;y||w;){let N=!1,G=!1;if(y&&w){const Y=u(y,w);Y<0?G=!0:Y>0&&(N=!0)}else null!=y?G=!0:N=!0;N?(h(w),w=Pn(g)):G?(d(y),y=Pn(p)):(y=Pn(p),w=Pn(g))}}(s,r,_n,l=>{a.push(this.yn(e,t,i,l))},l=>{a.push(this.pn(e,t,i,l))}),f.waitFor(a)}_n(e){let t=1;return uo(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(i,s,r)=>{r.done(),t=s.sequenceNumber+1}).next(()=>t)}createRange(e,t,i){i=i.sort((a,l)=>_n(a,l)).filter((a,l,c)=>!l||0!==_n(a,c[l-1]));const s=[];s.push(e);for(const a of i){const l=_n(a,e),c=_n(a,t);if(0===l)s[0]=e.Ke();else if(l>0&&c<0)s.push(a),s.push(a.Ke());else if(c>0)break}s.push(t);const r=[];for(let a=0;a<s.length;a+=2)r.push(IDBKeyRange.bound([s[a].indexId,this.uid,s[a].arrayValue,s[a].directionalValue,Ds,[]],[s[a+1].indexId,this.uid,s[a+1].arrayValue,s[a+1].directionalValue,Ds,[]]));return r}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Yd)}getMinOffset(e,t){return f.mapArray(this.tn(t),i=>this.en(e,i).next(s=>s||O())).next(Yd)}}function jd(n){return ze(n,"collectionParents")}function co(n){return ze(n,"indexEntries")}function Es(n){return ze(n,"indexConfiguration")}function uo(n){return ze(n,"indexState")}function Yd(n){M(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let i=1;i<n.length;i++){const s=n[i].indexState.offset;ga(s,e)<0&&(e=s),t<s.largestBatchId&&(t=s.largestBatchId)}return new Je(e.readTime,e.documentKey,t)}const Hd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Ye{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new Ye(e,Ye.DEFAULT_COLLECTION_PERCENTILE,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Jd(n,e,t){const i=n.store("mutations"),s=n.store("documentMutations"),r=[],a=IDBKeyRange.only(t.batchId);let l=0;const c=i.Z({range:a},(h,d,p)=>(l++,p.delete()));r.push(c.next(()=>{M(1===l)}));const u=[];for(const h of t.mutations){const d=kd(e,h.key.path,t.batchId);r.push(s.delete(d)),u.push(h.key)}return f.waitFor(r).next(()=>u)}function Ms(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw O();e=n.noDocument}return JSON.stringify(e).length}Ye.DEFAULT_COLLECTION_PERCENTILE=10,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Ye.DEFAULT=new Ye(41943040,Ye.DEFAULT_COLLECTION_PERCENTILE,Ye.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Ye.DISABLED=new Ye(-1,0,0);class ks{constructor(e,t,i,s){this.userId=e,this.It=t,this.indexManager=i,this.referenceDelegate=s,this.In={}}static oe(e,t,i,s){M(""!==e.uid);const r=e.isAuthenticated()?e.uid:"";return new ks(r,t,i,s)}checkEmpty(e){let t=!0;const i=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ft(e).Z({index:"userMutationsIndex",range:i},(s,r,a)=>{t=!1,a.done()}).next(()=>t)}addMutationBatch(e,t,i,s){const r=Jn(e),a=Ft(e);return a.add({}).next(l=>{M("number"==typeof l);const c=new Ma(l,t,i,s),u=function(p,g,y){const w=y.baseMutations.map(G=>so(p.re,G)),N=y.mutations.map(G=>so(p.re,G));return{userId:g,batchId:y.batchId,localWriteTimeMs:y.localWriteTime.toMillis(),baseMutations:w,mutations:N}}(this.It,this.userId,c),h=[];let d=new H((p,g)=>R(p.canonicalString(),g.canonicalString()));for(const p of s){const g=kd(this.userId,p.key.path,l);d=d.add(p.key.path.popLast()),h.push(a.put(u)),h.push(r.put(g,rv))}return d.forEach(p=>{h.push(this.indexManager.addToCollectionParentIndex(e,p))}),e.addOnCommittedListener(()=>{this.In[l]=c.keys()}),f.waitFor(h).next(()=>c)})}lookupMutationBatch(e,t){return Ft(e).get(t).next(i=>i?(M(i.userId===this.userId),fn(this.It,i)):null)}Tn(e,t){return this.In[t]?f.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(i=>{if(i){const s=i.keys();return this.In[t]=s,s}return null})}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=IDBKeyRange.lowerBound([this.userId,i]);let r=null;return Ft(e).Z({index:"userMutationsIndex",range:s},(a,l,c)=>{l.userId===this.userId&&(M(l.batchId>=i),r=fn(this.It,l)),c.done()}).next(()=>r)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let i=-1;return Ft(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(s,r,a)=>{i=r.batchId,a.done()}).next(()=>i)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ft(e).W("userMutationsIndex",t).next(i=>i.map(s=>fn(this.It,s)))}getAllMutationBatchesAffectingDocumentKey(e,t){const i=Ns(this.userId,t.path),s=IDBKeyRange.lowerBound(i),r=[];return Jn(e).Z({range:s},(a,l,c)=>{const[u,h,d]=a,p=ct(h);if(u===this.userId&&t.path.isEqual(p))return Ft(e).get(d).next(g=>{if(!g)throw O();M(g.userId===this.userId),r.push(fn(this.It,g))});c.done()}).next(()=>r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new H(R);const s=[];return t.forEach(r=>{const a=Ns(this.userId,r.path),l=IDBKeyRange.lowerBound(a),c=Jn(e).Z({range:l},(u,h,d)=>{const[p,g,y]=u,w=ct(g);p===this.userId&&r.path.isEqual(w)?i=i.add(y):d.done()});s.push(c)}),f.waitFor(s).next(()=>this.En(e,i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1,r=Ns(this.userId,i),a=IDBKeyRange.lowerBound(r);let l=new H(R);return Jn(e).Z({range:a},(c,u,h)=>{const[d,p,g]=c,y=ct(p);d===this.userId&&i.isPrefixOf(y)?y.length===s&&(l=l.add(g)):h.done()}).next(()=>this.En(e,l))}En(e,t){const i=[],s=[];return t.forEach(r=>{s.push(Ft(e).get(r).next(a=>{if(null===a)throw O();M(a.userId===this.userId),i.push(fn(this.It,a))}))}),f.waitFor(s).next(()=>i)}removeMutationBatch(e,t){return Jd(e.ie,this.userId,t).next(i=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),f.forEach(i,s=>this.referenceDelegate.markPotentiallyOrphaned(e,s))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return f.resolve();const i=IDBKeyRange.lowerBound([this.userId]),s=[];return Jn(e).Z({range:i},(r,a,l)=>{if(r[0]===this.userId){const c=ct(r[1]);s.push(c)}else l.done()}).next(()=>{M(0===s.length)})})}containsKey(e,t){return Kd(e,this.userId,t)}Rn(e){return Wd(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function Kd(n,e,t){const i=Ns(e,t.path),s=i[1],r=IDBKeyRange.lowerBound(i);let a=!1;return Jn(n).Z({range:r,X:!0},(l,c,u)=>{const[h,d,p]=l;h===e&&d===s&&(a=!0),u.done()}).next(()=>a)}function Ft(n){return ze(n,"mutations")}function Jn(n){return ze(n,"documentMutations")}function Wd(n){return ze(n,"mutationQueues")}class yn{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new yn(0)}static vn(){return new yn(-1)}}class Ev{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const i=new yn(t.highestTargetId);return t.highestTargetId=i.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>k.fromTimestamp(new ie(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,i){return this.Vn(e).next(s=>(s.highestListenSequenceNumber=t,i&&(s.lastRemoteSnapshotVersion=i.toTimestamp()),t>s.highestListenSequenceNumber&&(s.highestListenSequenceNumber=t),this.Sn(e,s)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(i=>(i.targetCount+=1,this.Cn(t,i),this.Sn(e,i))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Kn(e).delete(t.targetId)).next(()=>this.Vn(e)).next(i=>(M(i.targetCount>0),i.targetCount-=1,this.Sn(e,i)))}removeTargets(e,t,i){let s=0;const r=[];return Kn(e).Z((a,l)=>{const c=ro(l);c.sequenceNumber<=t&&null===i.get(c.targetId)&&(s++,r.push(this.removeTargetData(e,c)))}).next(()=>f.waitFor(r)).next(()=>s)}forEachTarget(e,t){return Kn(e).Z((i,s)=>{const r=ro(s);t(r)})}Vn(e){return Xd(e).get("targetGlobalKey").next(t=>(M(null!==t),t))}Sn(e,t){return Xd(e).put("targetGlobalKey",t)}Dn(e,t){return Kn(e).put(Bd(this.It,t))}Cn(e,t){let i=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,i=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,i=!0),i}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const i=cn(t),s=IDBKeyRange.bound([i,Number.NEGATIVE_INFINITY],[i,Number.POSITIVE_INFINITY]);let r=null;return Kn(e).Z({range:s,index:"queryTargetsIndex"},(a,l,c)=>{const u=ro(l);Yi(t,u.target)&&(r=u,c.done())}).next(()=>r)}addMatchingKeys(e,t,i){const s=[],r=Vt(e);return t.forEach(a=>{const l=Ge(a.path);s.push(r.put({targetId:i,path:l})),s.push(this.referenceDelegate.addReference(e,i,a))}),f.waitFor(s)}removeMatchingKeys(e,t,i){const s=Vt(e);return f.forEach(t,r=>{const a=Ge(r.path);return f.waitFor([s.delete([i,a]),this.referenceDelegate.removeReference(e,i,r)])})}removeMatchingKeysForTargetId(e,t){const i=Vt(e),s=IDBKeyRange.bound([t],[t+1],!1,!0);return i.delete(s)}getMatchingKeysForTargetId(e,t){const i=IDBKeyRange.bound([t],[t+1],!1,!0),s=Vt(e);let r=L();return s.Z({range:i,X:!0},(a,l,c)=>{const u=ct(a[1]),h=new I(u);r=r.add(h)}).next(()=>r)}containsKey(e,t){const i=Ge(t.path),s=IDBKeyRange.bound([i],[wh(i)],!1,!0);let r=0;return Vt(e).Z({index:"documentTargetsIndex",X:!0,range:s},([a,l],c,u)=>{0!==a&&(r++,u.done())}).next(()=>r>0)}se(e,t){return Kn(e).get(t).next(i=>i?ro(i):null)}}function Kn(n){return ze(n,"targets")}function Xd(n){return ze(n,"targetGlobal")}function Vt(n){return ze(n,"targetDocuments")}function ep([n,e],[t,i]){const s=R(n,t);return 0===s?R(e,i):s}class Mv{constructor(e){this.xn=e,this.buffer=new H(ep),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();ep(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class kv{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;x("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,v.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(i){St(i)?x("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield bt(i)}yield t.Fn(3e5)}))}}class Fv{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(0===t)return f.resolve(Qe.at);const i=new Mv(t);return this.$n.forEachTarget(e,s=>i.On(s.sequenceNumber)).next(()=>this.$n.Ln(e,s=>i.On(s))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.$n.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector","Garbage collection skipped; disabled"),f.resolve(Hd)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(x("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Hd):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let i,s,r,a,l,c,u;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(x("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${d}`),s=this.params.maximumSequenceNumbersToCollect):s=d,a=Date.now(),this.nthSequenceNumber(e,s))).next(d=>(i=d,l=Date.now(),this.removeTargets(e,i,t))).next(d=>(r=d,c=Date.now(),this.removeOrphanedDocuments(e,i))).next(d=>(u=Date.now(),pa()<=Jt.in.DEBUG&&x("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${a-h}ms\n\tDetermined least recently used ${s} in `+(l-a)+`ms\n\tRemoved ${r} targets in `+(c-l)+`ms\n\tRemoved ${d} documents in `+(u-c)+`ms\nTotal Duration: ${u-h}ms`),f.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:d})))}}class Vv{constructor(e,t){this.db=e,this.garbageCollector=new Fv(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(i=>t.next(s=>i+s))}qn(e){let t=0;return this.Ln(e,i=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(i,s)=>t(s))}addReference(e,t,i){return Fs(e,i)}removeReference(e,t,i){return Fs(e,i)}removeTargets(e,t,i){return this.db.getTargetCache().removeTargets(e,t,i)}markPotentiallyOrphaned(e,t){return Fs(e,t)}Gn(e,t){return function(i,s){let r=!1;return Wd(i).tt(a=>Kd(i,a,s).next(l=>(l&&(r=!0),f.resolve(!l)))).next(()=>r)}(e,t)}removeOrphanedDocuments(e,t){const i=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[];let r=0;return this.Kn(e,(a,l)=>{if(l<=t){const c=this.Gn(e,a).next(u=>{if(!u)return r++,i.getEntry(e,a).next(()=>(i.removeEntry(a,k.min()),Vt(e).delete([0,Ge(a.path)])))});s.push(c)}}).next(()=>f.waitFor(s)).next(()=>i.apply(e)).next(()=>r)}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,i)}updateLimboDocument(e,t){return Fs(e,t)}Kn(e,t){const i=Vt(e);let s,r=Qe.at;return i.Z({index:"documentTargetsIndex"},([a,l],{path:c,sequenceNumber:u})=>{0===a?(r!==Qe.at&&t(new I(ct(s)),r),r=u,s=c):r=Qe.at}).next(()=>{r!==Qe.at&&t(new I(ct(s)),r)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Fs(n,e){return Vt(n).put((i=n.currentSequenceNumber,{targetId:0,path:Ge(e.path),sequenceNumber:i}));var i}class tp{constructor(){this.changes=new Mt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,W.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return void 0!==i?f.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Rv{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,i){return vn(e).put(i)}removeEntry(e,t,i){return vn(e).delete(function(s,r){const a=s.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],As(r),a[a.length-1]]}(t,i))}updateMetadata(e,t){return this.getMetadata(e).next(i=>(i.byteSize+=t,this.Qn(e,i)))}getEntry(e,t){let i=W.newInvalidDocument(t);return vn(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ho(t))},(s,r)=>{i=this.jn(t,r)}).next(()=>i)}Wn(e,t){let i={size:0,document:W.newInvalidDocument(t)};return vn(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(ho(t))},(s,r)=>{i={document:this.jn(t,r),size:Ms(r)}}).next(()=>i)}getEntries(e,t){let i=je();return this.zn(e,t,(s,r)=>{const a=this.jn(s,r);i=i.insert(s,a)}).next(()=>i)}Hn(e,t){let i=je(),s=new ue(I.comparator);return this.zn(e,t,(r,a)=>{const l=this.jn(r,a);i=i.insert(r,l),s=s.insert(r,Ms(a))}).next(()=>({documents:i,Jn:s}))}zn(e,t,i){if(t.isEmpty())return f.resolve();let s=new H(sp);t.forEach(c=>s=s.add(c));const r=IDBKeyRange.bound(ho(s.first()),ho(s.last())),a=s.getIterator();let l=a.getNext();return vn(e).Z({index:"documentKeyIndex",range:r},(c,u,h)=>{const d=I.fromSegments([...u.prefixPath,u.collectionGroup,u.documentId]);for(;l&&sp(l,d)<0;)i(l,null),l=a.getNext();l&&l.isEqual(d)&&(i(l,u),l=a.hasNext()?a.getNext():null),l?h.j(ho(l)):h.done()}).next(()=>{for(;l;)i(l,null),l=a.hasNext()?a.getNext():null})}getAllFromCollection(e,t,i){const s=[t.popLast().toArray(),t.lastSegment(),As(i.readTime),i.documentKey.path.isEmpty()?"":i.documentKey.path.lastSegment()],r=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return vn(e).W(IDBKeyRange.bound(s,r,!0)).next(a=>{let l=je();for(const c of a){const u=this.jn(I.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);l=l.insert(u.key,u)}return l})}getAllFromCollectionGroup(e,t,i,s){let r=je();const a=op(t,i),l=op(t,Je.max());return vn(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(a,l,!0)},(c,u,h)=>{const d=this.jn(I.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);r=r.insert(d.key,d),r.size===s&&h.done()}).next(()=>r)}newChangeBuffer(e){return new Lv(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return ip(e).get("remoteDocumentGlobalKey").next(t=>(M(!!t),t))}Qn(e,t){return ip(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const i=function Tv(n,e){let t;if(e.document)t=Sd(n.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const i=I.fromSegments(e.noDocument.path),s=pn(e.noDocument.readTime);t=W.newNoDocument(i,s),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return O();{const i=I.fromSegments(e.unknownDocument.path),s=pn(e.unknownDocument.version);t=W.newUnknownDocument(i,s)}}return e.readTime&&t.setReadTime(function(i){const s=new ie(i[0],i[1]);return k.fromTimestamp(s)}(e.readTime)),t}(this.It,t);if(!i.isNoDocument()||!i.version.isEqual(k.min()))return i}return W.newInvalidDocument(e)}}function np(n){return new Rv(n)}class Lv extends tp{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new Mt(i=>i.toString(),(i,s)=>i.isEqual(s))}applyChanges(e){const t=[];let i=0,s=new H((r,a)=>R(r.canonicalString(),a.canonicalString()));return this.changes.forEach((r,a)=>{const l=this.Xn.get(r);if(t.push(this.Yn.removeEntry(e,r,l.readTime)),a.isValidDocument()){const c=Pd(this.Yn.It,a);s=s.add(r.path.popLast()),i+=Ms(c)-l.size,t.push(this.Yn.addEntry(e,r,c))}else if(i-=l.size,this.trackRemovals){const c=Pd(this.Yn.It,a.convertToNoDocument(k.min()));t.push(this.Yn.addEntry(e,r,c))}}),s.forEach(r=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,r))}),t.push(this.Yn.updateMetadata(e,i)),f.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(i=>(this.Xn.set(t,{size:i.size,readTime:i.document.readTime}),i.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:i,Jn:s})=>(s.forEach((r,a)=>{this.Xn.set(r,{size:a,readTime:i.get(r).readTime})}),i))}}function ip(n){return ze(n,"remoteDocumentGlobal")}function vn(n){return ze(n,"remoteDocumentsV14")}function ho(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function op(n,e){const t=e.documentKey.path.toArray();return[n,As(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function sp(n,e){const t=n.path.toArray(),i=e.path.toArray();let s=0;for(let r=0;r<t.length-2&&r<i.length-2;++r)if(s=R(t[r],i[r]),s)return s;return s=R(t.length,i.length),s||(s=R(t[t.length-2],i[i.length-2]),s||R(t[t.length-1],i[i.length-1]))}class Pv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class rp{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(s=>(i=s,this.getBaseDocument(e,t,i))).next(s=>(null!==i&&Ki(i.mutation,s,Ke.empty(),ie.now()),s))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,L()).next(()=>i))}getLocalViewOfDocuments(e,t,i=L()){const s=at();return this.populateOverlays(e,s,t).next(()=>this.computeViews(e,t,s,i).next(r=>{let a=Wi();return r.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){const i=at();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,L()))}populateOverlays(e,t,i){const s=[];return i.forEach(r=>{t.has(r)||s.push(r)}),this.documentOverlayCache.getOverlays(e,s).next(r=>{r.forEach((a,l)=>{t.set(a,l)})})}computeViews(e,t,i,s){let r=je();const a=Xi(),l=Xi();return t.forEach((c,u)=>{const h=i.get(u.key);s.has(u.key)&&(void 0===h||h.mutation instanceof gt)?r=r.insert(u.key,u):void 0!==h&&(a.set(u.key,h.mutation.getFieldMask()),Ki(h.mutation,u,h.mutation.getFieldMask(),ie.now()))}),this.recalculateAndSaveOverlays(e,r).next(c=>(c.forEach((u,h)=>a.set(u,h)),t.forEach((u,h)=>{var d;return l.set(u,new Pv(h,null!==(d=a.get(u))&&void 0!==d?d:null))}),l))}recalculateAndSaveOverlays(e,t){const i=Xi();let s=new ue((a,l)=>a-l),r=L();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(const l of a)l.keys().forEach(c=>{const u=t.get(c);if(null===u)return;let h=i.get(c)||Ke.empty();h=l.applyToLocalView(u,h),i.set(c,h);const d=(s.get(l.batchId)||L()).add(c);s=s.insert(l.batchId,d)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),u=c.key,h=c.value,d=gd();h.forEach(p=>{if(!r.has(p)){const g=ad(t.get(p),i.get(p));null!==g&&d.set(p,g),r=r.add(p)}}),a.push(this.documentOverlayCache.saveOverlays(e,u,d))}return f.waitFor(a)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i){return I.isDocumentKey((s=t).path)&&null===s.collectionGroup&&0===s.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):wa(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i):this.getDocumentsMatchingCollectionQuery(e,t,i);var s}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next(r=>{const a=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):f.resolve(at());let l=-1,c=r;return a.next(u=>f.forEach(u,(h,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),r.get(h)?f.resolve():this.getBaseDocument(e,h,d).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,u,r)).next(()=>this.computeViews(e,c,u,L())).next(h=>({batchId:l,changes:md(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new I(t)).next(i=>{let s=Wi();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s})}getDocumentsMatchingCollectionGroupQuery(e,t,i){const s=t.collectionGroup;let r=Wi();return this.indexManager.getCollectionParents(e,s).next(a=>f.forEach(a,l=>{const c=(u=t,h=l.child(s),new mt(h,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt));var u,h;return this.getDocumentsMatchingCollectionQuery(e,c,i).next(u=>{u.forEach((h,d)=>{r=r.insert(h,d)})})}).next(()=>r))}getDocumentsMatchingCollectionQuery(e,t,i){let s;return this.remoteDocumentCache.getAllFromCollection(e,t.path,i).next(r=>(s=r,this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId))).next(r=>{r.forEach((l,c)=>{const u=c.getKey();null===s.get(u)&&(s=s.insert(u,W.newInvalidDocument(u)))});let a=Wi();return s.forEach((l,c)=>{const u=r.get(l);void 0!==u&&Ki(u.mutation,c,Ke.empty(),ie.now()),ba(t,c)&&(a=a.insert(l,c))}),a})}getBaseDocument(e,t,i){return null===i||1===i.mutation.type?this.remoteDocumentCache.getEntry(e,t):f.resolve(W.newInvalidDocument(t))}}class Bv{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return f.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var i;return this.Zn.set(t.id,{id:(i=t).id,version:i.version,createTime:Ce(i.createTime)}),f.resolve()}getNamedQuery(e,t){return f.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(i=t).name,query:Va(i.bundledQuery),readTime:Ce(i.readTime)}),f.resolve();var i}}class Gv{constructor(){this.overlays=new ue(I.comparator),this.es=new Map}getOverlay(e,t){return f.resolve(this.overlays.get(t))}getOverlays(e,t){const i=at();return f.forEach(t,s=>this.getOverlay(e,s).next(r=>{null!==r&&i.set(s,r)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((s,r)=>{this.ue(e,t,r)}),f.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.es.get(i);return void 0!==s&&(s.forEach(r=>this.overlays=this.overlays.remove(r)),this.es.delete(i)),f.resolve()}getOverlaysForCollection(e,t,i){const s=at(),r=t.length+1,a=new I(t.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===r&&c.largestBatchId>i&&s.set(c.getKey(),c)}return f.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new ue((u,h)=>u-h);const a=this.overlays.getIterator();for(;a.hasNext();){const u=a.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>i){let h=r.get(u.largestBatchId);null===h&&(h=at(),r=r.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}const l=at(),c=r.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>l.set(u,h)),!(l.size()>=s)););return f.resolve(l)}ue(e,t,i){const s=this.overlays.get(i.key);if(null!==s){const a=this.es.get(s.largestBatchId).delete(i.key);this.es.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(i.key,new Fa(t,i));let r=this.es.get(t);void 0===r&&(r=L(),this.es.set(t,r)),this.es.set(t,r.add(i.key))}}class Pa{constructor(){this.ns=new H(xe.ss),this.rs=new H(xe.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const i=new xe(e,t);this.ns=this.ns.add(i),this.rs=this.rs.add(i)}us(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.cs(new xe(e,t))}hs(e,t){e.forEach(i=>this.removeReference(i,t))}ls(e){const t=new I(new q([])),i=new xe(t,e),s=new xe(t,e+1),r=[];return this.rs.forEachInRange([i,s],a=>{this.cs(a),r.push(a.key)}),r}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new I(new q([])),i=new xe(t,e),s=new xe(t,e+1);let r=L();return this.rs.forEachInRange([i,s],a=>{r=r.add(a.key)}),r}containsKey(e){const t=new xe(e,0),i=this.ns.firstAfterOrEqual(t);return null!==i&&e.isEqual(i.key)}}class xe{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return I.comparator(e.key,t.key)||R(e._s,t._s)}static os(e,t){return R(e._s,t._s)||I.comparator(e.key,t.key)}}class Uv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new H(xe.ss)}checkEmpty(e){return f.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,i,s){const r=this.ws;this.ws++;const a=new Ma(r,t,i,s);this.mutationQueue.push(a);for(const l of s)this.gs=this.gs.add(new xe(l.key,r)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return f.resolve(a)}lookupMutationBatch(e,t){return f.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const s=this.ps(t+1),r=s<0?0:s;return f.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return f.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return f.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new xe(t,0),s=new xe(t,Number.POSITIVE_INFINITY),r=[];return this.gs.forEachInRange([i,s],a=>{const l=this.ys(a._s);r.push(l)}),f.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new H(R);return t.forEach(s=>{const r=new xe(s,0),a=new xe(s,Number.POSITIVE_INFINITY);this.gs.forEachInRange([r,a],l=>{i=i.add(l._s)})}),f.resolve(this.Is(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;I.isDocumentKey(r)||(r=r.child(""));const a=new xe(new I(r),0);let l=new H(R);return this.gs.forEachWhile(c=>{const u=c.key.path;return!!i.isPrefixOf(u)&&(u.length===s&&(l=l.add(c._s)),!0)},a),f.resolve(this.Is(l))}Is(e){const t=[];return e.forEach(i=>{const s=this.ys(i);null!==s&&t.push(s)}),t}removeMutationBatch(e,t){M(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let i=this.gs;return f.forEach(t.mutations,s=>{const r=new xe(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.gs=i})}An(e){}containsKey(e,t){const i=new xe(t,0),s=this.gs.firstAfterOrEqual(i);return f.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return f.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Zv{constructor(e){this.Es=e,this.docs=new ue(I.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,a=this.Es(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:a}),this.size+=a-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return f.resolve(i?i.document.mutableCopy():W.newInvalidDocument(t))}getEntries(e,t){let i=je();return t.forEach(s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():W.newInvalidDocument(s))}),f.resolve(i)}getAllFromCollection(e,t,i){let s=je();const r=new I(t.child("")),a=this.docs.getIteratorFrom(r);for(;a.hasNext();){const{key:l,value:{document:c}}=a.getNext();if(!t.isPrefixOf(l.path))break;l.path.length>t.length+1||ga(bh(c),i)<=0||(s=s.insert(c.key,c.mutableCopy()))}return f.resolve(s)}getAllFromCollectionGroup(e,t,i,s){O()}As(e,t){return f.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new qv(this)}getSize(e){return f.resolve(this.size)}}class qv extends tp{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((i,s)=>{s.isValidDocument()?t.push(this.Yn.addEntry(e,s)):this.Yn.removeEntry(i)}),f.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class $v{constructor(e){this.persistence=e,this.Rs=new Mt(t=>cn(t),Yi),this.lastRemoteSnapshotVersion=k.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Pa,this.targetCount=0,this.vs=yn.Pn()}forEachTarget(e,t){return this.Rs.forEach((i,s)=>t(s)),f.resolve()}getLastRemoteSnapshotVersion(e){return f.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return f.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),f.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.bs&&(this.bs=t),f.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new yn(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,f.resolve()}updateTargetData(e,t){return this.Dn(t),f.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,f.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.Rs.forEach((a,l)=>{l.sequenceNumber<=t&&null===i.get(l.targetId)&&(this.Rs.delete(a),r.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),f.waitFor(r).next(()=>s)}getTargetCount(e){return f.resolve(this.targetCount)}getTargetData(e,t){const i=this.Rs.get(t)||null;return f.resolve(i)}addMatchingKeys(e,t,i){return this.Ps.us(t,i),f.resolve()}removeMatchingKeys(e,t,i){this.Ps.hs(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach(a=>{r.push(s.markPotentiallyOrphaned(e,a))}),f.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),f.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Ps.ds(t);return f.resolve(i)}containsKey(e,t){return f.resolve(this.Ps.containsKey(t))}}class ap{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new Qe(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new $v(this),this.indexManager=new Ov,this.remoteDocumentCache=new Zv(i=>this.referenceDelegate.xs(i)),this.It=new Ld(t),this.Ns=new Bv(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Gv,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Vs[e.toKey()];return i||(i=new Uv(t,this.referenceDelegate),this.Vs[e.toKey()]=i),i}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,i){x("MemoryPersistence","Starting transaction:",e);const s=new Qv(this.Ss.next());return this.referenceDelegate.ks(),i(s).next(r=>this.referenceDelegate.Os(s).next(()=>r)).toPromise().then(r=>(s.raiseOnCommittedEvent(),r))}Ms(e,t){return f.or(Object.values(this.Vs).map(i=>()=>i.containsKey(e,t)))}}class Qv extends Nh{constructor(e){super(),this.currentSequenceNumber=e}}class Vs{constructor(e){this.persistence=e,this.Fs=new Pa,this.$s=null}static Bs(e){return new Vs(e)}get Ls(){if(this.$s)return this.$s;throw O()}addReference(e,t,i){return this.Fs.addReference(i,t),this.Ls.delete(i.toString()),f.resolve()}removeReference(e,t,i){return this.Fs.removeReference(i,t),this.Ls.add(i.toString()),f.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),f.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(s=>this.Ls.add(s.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(s=>{s.forEach(r=>this.Ls.add(r.toString()))}).next(()=>i.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return f.forEach(this.Ls,i=>{const s=I.fromPath(i);return this.Us(e,s).next(r=>{r||t.removeEntry(s,k.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(i=>{i?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return f.or([()=>f.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class jv{constructor(e){this.It=e}$(e,t,i,s){const r=new gs("createOrUpgrade",t);var l;i<1&&s>=1&&(e.createObjectStore("owner"),(l=e).createObjectStore("mutationQueues",{keyPath:"userId"}),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Md,{unique:!0}),l.createObjectStore("documentMutations"),lp(e),function(l){l.createObjectStore("remoteDocuments")}(e));let a=f.resolve();return i<3&&s>=3&&(0!==i&&(function(l){l.deleteObjectStore("targetDocuments"),l.deleteObjectStore("targets"),l.deleteObjectStore("targetGlobal")}(e),lp(e)),a=a.next(()=>function(l){const c=l.store("targetGlobal"),u={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:k.min().toTimestamp(),targetCount:0};return c.put("targetGlobalKey",u)}(r))),i<4&&s>=4&&(0!==i&&(a=a.next(()=>function(l,c){return c.store("mutations").W().next(u=>{l.deleteObjectStore("mutations"),l.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Md,{unique:!0});const h=c.store("mutations"),d=u.map(p=>h.put(p));return f.waitFor(d)})}(e,r))),a=a.next(()=>{!function(l){l.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),i<5&&s>=5&&(a=a.next(()=>this.qs(r))),i<6&&s>=6&&(a=a.next(()=>(function(l){l.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(r)))),i<7&&s>=7&&(a=a.next(()=>this.Gs(r))),i<8&&s>=8&&(a=a.next(()=>this.Qs(e,r))),i<9&&s>=9&&(a=a.next(()=>{!function(l){l.objectStoreNames.contains("remoteDocumentChanges")&&l.deleteObjectStore("remoteDocumentChanges")}(e)})),i<10&&s>=10&&(a=a.next(()=>this.js(r))),i<11&&s>=11&&(a=a.next(()=>{(function(l){l.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(l){l.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),i<12&&s>=12&&(a=a.next(()=>{!function(l){const c=l.createObjectStore("documentOverlays",{keyPath:yv});c.createIndex("collectionPathOverlayIndex",vv,{unique:!1}),c.createIndex("collectionGroupOverlayIndex",Cv,{unique:!1})}(e)})),i<13&&s>=13&&(a=a.next(()=>function(l){const c=l.createObjectStore("remoteDocumentsV14",{keyPath:av});c.createIndex("documentKeyIndex",lv),c.createIndex("collectionGroupIndex",cv)}(e)).next(()=>this.Ws(e,r)).next(()=>e.deleteObjectStore("remoteDocuments"))),i<14&&s>=14&&(a=a.next(()=>this.zs(e,r))),i<15&&s>=15&&(a=a.next(()=>function(l){l.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),l.createObjectStore("indexState",{keyPath:fv}).createIndex("sequenceNumberIndex",mv,{unique:!1}),l.createObjectStore("indexEntries",{keyPath:gv}).createIndex("documentKeyIndex",_v,{unique:!1})}(e))),a}Ks(e){let t=0;return e.store("remoteDocuments").Z((i,s)=>{t+=Ms(s)}).next(()=>{const i={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",i)})}qs(e){const t=e.store("mutationQueues"),i=e.store("mutations");return t.W().next(s=>f.forEach(s,r=>{const a=IDBKeyRange.bound([r.userId,-1],[r.userId,r.lastAcknowledgedBatchId]);return i.W("userMutationsIndex",a).next(l=>f.forEach(l,c=>{M(c.userId===r.userId);const u=fn(this.It,c);return Jd(e,r.userId,u).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),i=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(s=>{const r=[];return i.Z((a,l)=>{const c=new q(a),u=[0,Ge(c)];r.push(t.get(u).next(h=>h?f.resolve():t.put({targetId:0,path:Ge(c),sequenceNumber:s.highestListenSequenceNumber})))}).next(()=>f.waitFor(r))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:pv});const i=t.store("collectionParents"),s=new La,r=a=>{if(s.add(a)){const l=a.lastSegment(),c=a.popLast();return i.put({collectionId:l,parent:Ge(c)})}};return t.store("remoteDocuments").Z({X:!0},(a,l)=>{const c=new q(a);return r(c.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([a,l,c],u)=>{const h=ct(l);return r(h.popLast())}))}js(e){const t=e.store("targets");return t.Z((i,s)=>{const r=ro(s),a=Bd(this.It,r);return t.put(a)})}Ws(e,t){const i=t.store("remoteDocuments"),s=[];return i.Z((r,a)=>{const l=t.store("remoteDocumentsV14"),c=(u=a,u.document?new I(q.fromString(u.document.name).popFirst(5)):u.noDocument?I.fromSegments(u.noDocument.path):u.unknownDocument?I.fromSegments(u.unknownDocument.path):O()).path.toArray();var u;const h={prefixPath:c.slice(0,c.length-2),collectionGroup:c[c.length-2],documentId:c[c.length-1],readTime:a.readTime||[0,0],unknownDocument:a.unknownDocument,noDocument:a.noDocument,document:a.document,hasCommittedMutations:!!a.hasCommittedMutations};s.push(l.put(h))}).next(()=>f.waitFor(s))}zs(e,t){const i=t.store("mutations"),s=np(this.It),r=new ap(Vs.Bs,this.It.re);return i.W().next(a=>{const l=new Map;return a.forEach(c=>{var u;let h=null!==(u=l.get(c.userId))&&void 0!==u?u:L();fn(this.It,c).keys().forEach(d=>h=h.add(d)),l.set(c.userId,h)}),f.forEach(l,(c,u)=>{const h=new ve(u),d=Os.oe(this.It,h),p=r.getIndexManager(h),g=ks.oe(h,this.It,p,r.referenceDelegate);return new rp(s,g,d,p).recalculateAndSaveOverlaysForDocumentKeys(new Ea(t,Qe.at),c).next()})})}}function lp(n){n.createObjectStore("targetDocuments",{keyPath:hv}).createIndex("documentTargetsIndex",dv,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",uv,{unique:!0}),n.createObjectStore("targetGlobal")}const Ba="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ga{constructor(e,t,i,s,r,a,l,c,u,h,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=i,this.Hs=r,this.window=a,this.document=l,this.Js=u,this.Ys=h,this.Xs=d,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=p=>Promise.resolve(),!Ga.C())throw new z(m.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Vv(this,s),this.ii=t+"main",this.It=new Ld(c),this.ri=new tt(this.ii,this.Xs,new jv(this.It)),this.Cs=new Ev(this.referenceDelegate,this.It),this.remoteDocumentCache=np(this.It),this.Ns=new wv,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===h&&de("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new z(m.FAILED_PRECONDITION,Ba);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new Qe(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var i=(0,v.Z)(function*(s){if(t.started)return e(s)});return function(s){return i.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,v.Z)(function*(i){null===i.newVersion&&(yield e())});return function(i){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,v.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Rs(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(St(e))return x("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return x("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return po(e).get("owner").next(t=>f.resolve(this.mi(t)))}gi(e){return Rs(e).delete(this.clientId)}yi(){var e=this;return(0,v.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",i=>{const s=ze(i,"clientMetadata");return s.W().next(r=>{const a=e.Ii(r,18e5),l=r.filter(c=>-1===a.indexOf(c));return f.forEach(l,c=>s.delete(c.clientId)).next(()=>l)})}).catch(()=>[]);if(e.oi)for(const i of t)e.oi.removeItem(e.Ti(i.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?f.resolve(!0):po(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new z(m.FAILED_PRECONDITION,Ba);return!1}}return!(!this.networkEnabled||!this.inForeground)||Rs(e).W().next(i=>void 0===this.Ii(i,5e3).find(s=>{if(this.clientId!==s.clientId){const a=!this.inForeground&&s.inForeground,l=this.networkEnabled===s.networkEnabled;if(!this.networkEnabled&&s.networkEnabled||a&&l)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&x("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,v.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const i=new Ea(t,Qe.at);return e._i(i).next(()=>e.gi(i))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(i=>this.pi(i.updateTimeMs,t)&&!this.Ei(i.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>Rs(e).W().next(t=>this.Ii(t,18e5).map(i=>i.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return ks.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Dv(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return Os.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,i){x("IndexedDbPersistence","Starting transaction:",e);const s="readonly"===t?"readonly":"readwrite",r=15===(a=this.Xs)?xv:14===a?Rd:13===a?Vd:12===a?zv:11===a?Fd:void O();var a;let l;return this.ri.runTransaction(e,s,r,c=>(l=new Ea(c,this.Ss?this.Ss.next():Qe.at),"readwrite-primary"===t?this.fi(l).next(u=>!!u||this.di(l)).next(u=>{if(!u)throw de(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new z(m.FAILED_PRECONDITION,Sh);return i(l)}).next(u=>this.wi(l).next(()=>u)):this.Vi(l).next(()=>i(l)))).then(c=>(l.raiseOnCommittedEvent(),c))}Vi(e){return po(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new z(m.FAILED_PRECONDITION,Ba)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return po(e).put("owner",t)}static C(){return tt.C()}_i(e){const t=po(e);return t.get("owner").next(i=>this.mi(i)?(x("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):f.resolve())}pi(e,t){const i=Date.now();return!(e<i-t||e>i&&(de(`Detected an update time that is in the future: ${e} > ${i}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,J.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const i=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return x("IndexedDbPersistence",`Client '${e}' ${i?"is":"is not"} zombied in LocalStorage`),i}catch(i){return de("IndexedDbPersistence","Failed to get zombied client id.",i),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){de("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function po(n){return ze(n,"owner")}function Rs(n){return ze(n,"clientMetadata")}function Ua(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class Za{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Si=i,this.Di=s}static Ci(e,t){let i=L(),s=L();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Za(e,t.fromCache,i,s)}}class cp{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,i,s){return this.ki(e,t).next(r=>r||this.Oi(e,t,s,i)).next(r=>r||this.Mi(e,t))}ki(e,t){if(Hh(t))return f.resolve(null);let i=Be(t);return this.indexManager.getIndexType(e,i).next(s=>0===s?null:(null!==t.limit&&1===s&&(t=xs(t,null,"F"),i=Be(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(r=>{const a=L(...r);return this.Ni.getDocuments(e,a).next(l=>this.indexManager.getMinOffset(e,i).next(c=>{const u=this.Fi(t,l);return this.$i(t,u,a,c.readTime)?this.ki(e,xs(t,null,"F")):this.Bi(e,u,t,c)}))})))}Oi(e,t,i,s){return Hh(t)||s.isEqual(k.min())?this.Mi(e,t):this.Ni.getDocuments(e,i).next(r=>{const a=this.Fi(t,r);return this.$i(t,a,i,s)?this.Mi(e,t):(pa()<=Jt.in.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ia(t)),this.Bi(e,a,t,Ih(s,-1)))})}Fi(e,t){let i=new H(Wh(e));return t.forEach((s,r)=>{ba(e,r)&&(i=i.add(r))}),i}$i(e,t,i,s){if(null===e.limit)return!1;if(i.size!==t.size)return!0;const r="F"===e.limitType?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Mi(e,t){return pa()<=Jt.in.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",Ia(t)),this.Ni.getDocumentsMatchingQuery(e,t,Je.min())}Bi(e,t,i,s){return this.Ni.getDocumentsMatchingQuery(e,i,s).next(r=>(t.forEach(a=>{r=r.insert(a.key,a)}),r))}}class Yv{constructor(e,t,i,s){this.persistence=e,this.Li=t,this.It=s,this.Ui=new ue(R),this.qi=new Mt(r=>cn(r),Yi),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(i)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new rp(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function up(n,e,t,i){return new Yv(n,e,t,i)}function hp(n,e){return qa.apply(this,arguments)}function qa(){return qa=(0,v.Z)(function*(n,e){const t=b(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next(r=>(s=r,t.Qi(e),t.mutationQueue.getAllMutationBatches(i))).next(r=>{const a=[],l=[];let c=L();for(const u of s){a.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}for(const u of r){l.push(u.batchId);for(const h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(i,c).next(u=>({ji:u,removedBatchIds:a,addedBatchIds:l}))})})}),qa.apply(this,arguments)}function Hv(n,e){const t=b(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const s=e.batch.keys(),r=t.Gi.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const h=c.batch,d=h.keys();let p=f.resolve();return d.forEach(g=>{p=p.next(()=>u.getEntry(l,g)).next(y=>{const w=c.docVersions.get(g);M(null!==w),y.version.compareTo(w)<0&&(h.applyToRemoteDocument(y,c),y.isValidDocument()&&(y.setReadTime(c.commitVersion),u.addEntry(y)))})}),p.next(()=>a.mutationQueue.removeMutationBatch(l,h))}(t,i,e,r).next(()=>r.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=L();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,s))})}function dp(n){const e=b(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function Jv(n,e){const t=b(n),i=e.snapshotVersion;let s=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",r=>{const a=t.Gi.newChangeBuffer({trackRemovals:!0});s=t.Ui;const l=[];e.targetChanges.forEach((h,d)=>{const p=s.get(d);if(!p)return;l.push(t.Cs.removeMatchingKeys(r,h.removedDocuments,d).next(()=>t.Cs.addMatchingKeys(r,h.addedDocuments,d)));let g=p.withSequenceNumber(r.currentSequenceNumber);var y,w,N;e.targetMismatches.has(d)?g=g.withResumeToken(_e.EMPTY_BYTE_STRING,k.min()).withLastLimboFreeSnapshotVersion(k.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),s=s.insert(d,g),w=g,N=h,(0===(y=p).resumeToken.approximateByteSize()||w.snapshotVersion.toMicroseconds()-y.snapshotVersion.toMicroseconds()>=3e8||N.addedDocuments.size+N.modifiedDocuments.size+N.removedDocuments.size>0)&&l.push(t.Cs.updateTargetData(r,g))});let c=je(),u=L();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&l.push(t.persistence.referenceDelegate.updateLimboDocument(r,h))}),l.push(pp(r,a,e.documentUpdates).next(h=>{c=h.Wi,u=h.zi})),!i.isEqual(k.min())){const h=t.Cs.getLastRemoteSnapshotVersion(r).next(d=>t.Cs.setTargetsMetadata(r,r.currentSequenceNumber,i));l.push(h)}return f.waitFor(l).next(()=>a.apply(r)).next(()=>t.localDocuments.getLocalViewOfDocuments(r,c,u)).next(()=>c)}).then(r=>(t.Ui=s,r))}function pp(n,e,t){let i=L(),s=L();return t.forEach(r=>i=i.add(r)),e.getEntries(n,i).next(r=>{let a=je();return t.forEach((l,c)=>{const u=r.get(l);c.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(k.min())?(e.removeEntry(l,c.readTime),a=a.insert(l,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||0===c.version.compareTo(u.version)&&u.hasPendingWrites?(e.addEntry(c),a=a.insert(l,c)):x("LocalStore","Ignoring outdated watch update for ",l,". Current version:",u.version," Watch version:",c.version)}),{Wi:a,zi:s}})}function Kv(n,e){const t=b(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Wn(n,e){const t=b(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let s;return t.Cs.getTargetData(i,e).next(r=>r?(s=r,f.resolve(s)):t.Cs.allocateTargetId(i).next(a=>(s=new kt(e,a,0,i.currentSequenceNumber),t.Cs.addTargetData(i,s).next(()=>s))))}).then(i=>{const s=t.Ui.get(i.targetId);return(null===s||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(i.targetId,i),t.qi.set(e,i.targetId)),i})}function Xn(n,e,t){return $a.apply(this,arguments)}function $a(){return $a=(0,v.Z)(function*(n,e,t){const i=b(n),s=i.Ui.get(e),r=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",r,a=>i.persistence.referenceDelegate.removeTarget(a,s)))}catch(a){if(!St(a))throw a;x("LocalStore",`Failed to update sequence numbers for target ${e}: ${a}`)}i.Ui=i.Ui.remove(e),i.qi.delete(s.target)}),$a.apply(this,arguments)}function Ls(n,e,t){const i=b(n);let s=k.min(),r=L();return i.persistence.runTransaction("Execute query","readonly",a=>function(l,c,u){const h=b(l),d=h.qi.get(u);return void 0!==d?f.resolve(h.Ui.get(d)):h.Cs.getTargetData(c,u)}(i,a,Be(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,i.Cs.getMatchingKeysForTargetId(a,l.targetId).next(c=>{r=c})}).next(()=>i.Li.getDocumentsMatchingQuery(a,e,t?s:k.min(),t?r:L())).next(l=>(gp(i,Kh(e),l),{documents:l,Hi:r})))}function fp(n,e){const t=b(n),i=b(t.Cs),s=t.Ui.get(e);return s?Promise.resolve(s.target):t.persistence.runTransaction("Get target data","readonly",r=>i.se(r,e).next(a=>a?a.target:null))}function mp(n,e){const t=b(n),i=t.Ki.get(e)||k.min();return t.persistence.runTransaction("Get new document changes","readonly",s=>t.Gi.getAllFromCollectionGroup(s,e,Ih(i,-1),Number.MAX_SAFE_INTEGER)).then(s=>(gp(t,e,s),s))}function gp(n,e,t){let i=n.Ki.get(e)||k.min();t.forEach((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)}),n.Ki.set(e,i)}function Qa(){return Qa=(0,v.Z)(function*(n,e,t,i){const s=b(n);let r=L(),a=je();for(const u of t){const h=e.Ji(u.metadata.name);u.document&&(r=r.add(h));const d=e.Yi(u);d.setReadTime(e.Xi(u.metadata.readTime)),a=a.insert(h,d)}const l=s.Gi.newChangeBuffer({trackRemovals:!0}),c=yield Wn(s,(u=i,Be(Un(q.fromString(`__bundle__/docs/${u}`)))));var u;return s.persistence.runTransaction("Apply bundle documents","readwrite",u=>pp(u,l,a).next(h=>(l.apply(u),h)).next(h=>s.Cs.removeMatchingKeysForTargetId(u,c.targetId).next(()=>s.Cs.addMatchingKeys(u,r,c.targetId)).next(()=>s.localDocuments.getLocalViewOfDocuments(u,h.Wi,h.zi)).next(()=>h.Wi)))}),Qa.apply(this,arguments)}function Xv(n,e){return ja.apply(this,arguments)}function ja(){return ja=(0,v.Z)(function*(n,e,t=L()){const i=yield Wn(n,Be(Va(e.bundledQuery))),s=b(n);return s.persistence.runTransaction("Save named query","readwrite",r=>{const a=Ce(e.readTime);if(i.snapshotVersion.compareTo(a)>=0)return s.Ns.saveNamedQuery(r,e);const l=i.withResumeToken(_e.EMPTY_BYTE_STRING,a);return s.Ui=s.Ui.insert(l.targetId,l),s.Cs.updateTargetData(r,l).next(()=>s.Cs.removeMatchingKeysForTargetId(r,i.targetId)).next(()=>s.Cs.addMatchingKeys(r,t,i.targetId)).next(()=>s.Ns.saveNamedQuery(r,e))})}),ja.apply(this,arguments)}function _p(n,e){return`firestore_clients_${n}_${e}`}function yp(n,e,t){let i=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Ya(n,e){return`firestore_targets_${n}_${e}`}class Ps{constructor(e,t,i,s){this.user=e,this.batchId=t,this.state=i,this.error=s}static Zi(e,t,i){const s=JSON.parse(i);let r,a="object"==typeof s&&-1!==["pending","acknowledged","rejected"].indexOf(s.state)&&(void 0===s.error||"object"==typeof s.error);return a&&s.error&&(a="string"==typeof s.error.message&&"string"==typeof s.error.code,a&&(r=new z(s.error.code,s.error.message))),a?new Ps(e,t,s.state,r):(de("SharedClientState",`Failed to parse mutation state for ID '${t}': ${i}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fo{constructor(e,t,i){this.targetId=e,this.state=t,this.error=i}static Zi(e,t){const i=JSON.parse(t);let s,r="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return r&&i.error&&(r="string"==typeof i.error.message&&"string"==typeof i.error.code,r&&(s=new z(i.error.code,i.error.message))),r?new fo(e,i.state,s):(de("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Bs{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const i=JSON.parse(t);let s="object"==typeof i&&i.activeTargetIds instanceof Array,r=bs();for(let a=0;s&&a<i.activeTargetIds.length;++a)s=kh(i.activeTargetIds[a]),r=r.add(i.activeTargetIds[a]);return s?new Bs(e,r):(de("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Ha{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Ha(t.clientId,t.onlineState):(de("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ja{constructor(){this.activeTargetIds=bs()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ka{constructor(e,t,i,s,r){this.window=e,this.Hs=t,this.persistenceKey=i,this.sr=s,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ue(R),this.started=!1,this.cr=[];const a=i.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.ar=_p(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Ja),this.lr=new RegExp(`^firestore_clients_${a}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${a}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${a}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(l){return`firestore_bundle_loaded_v2_${l}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,v.Z)(function*(){const t=yield e.syncEngine.vi();for(const s of t){if(s===e.sr)continue;const r=e.getItem(_p(e.persistenceKey,s));if(r){const a=Bs.Zi(s,r);a&&(e.ur=e.ur.insert(a.clientId,a))}}e.gr();const i=e.storage.getItem(e.wr);if(i){const s=e.yr(i);s&&e.pr(s)}for(const s of e.cr)e.rr(s);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((i,s)=>{s.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,i){this.Tr(e,t,i),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const i=this.storage.getItem(Ya(this.persistenceKey,e));if(i){const s=fo.Zi(e,i);s&&(t=s.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Ya(this.persistenceKey,e))}updateQueryState(e,t,i){this.Rr(e,t,i)}handleUserChange(e,t,i){t.forEach(s=>{this.Er(s)}),this.currentUser=e,i.forEach(s=>{this.addPendingMutation(s)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return x("SharedClientState","READ",e,t),t}setItem(e,t){x("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){x("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const i=e;if(i.storageArea===this.storage){if(x("SharedClientState","EVENT",i.key,i.newValue),i.key===this.ar)return void de("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,v.Z)(function*(){if(t.started){if(null!==i.key)if(t.lr.test(i.key)){if(null==i.newValue){const s=t.vr(i.key);return t.Vr(s,null)}{const s=t.Sr(i.key,i.newValue);if(s)return t.Vr(s.clientId,s)}}else if(t.dr.test(i.key)){if(null!==i.newValue){const s=t.Dr(i.key,i.newValue);if(s)return t.Cr(s)}}else if(t._r.test(i.key)){if(null!==i.newValue){const s=t.Nr(i.key,i.newValue);if(s)return t.kr(s)}}else if(i.key===t.wr){if(null!==i.newValue){const s=t.yr(i.newValue);if(s)return t.pr(s)}}else if(i.key===t.hr){const s=function(r){let a=Qe.at;if(null!=r)try{const l=JSON.parse(r);M("number"==typeof l),a=l}catch(l){de("SharedClientState","Failed to read sequence number from WebStorage",l)}return a}(i.newValue);s!==Qe.at&&t.sequenceNumberHandler(s)}else if(i.key===t.mr){const s=t.Or(i.newValue);yield Promise.all(s.map(r=>t.syncEngine.Mr(r)))}}else t.cr.push(i)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,i){const s=new Ps(this.currentUser,e,t,i),r=yp(this.persistenceKey,this.currentUser,e);this.setItem(r,s.tr())}Er(e){const t=yp(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,i){const s=Ya(this.persistenceKey,e),r=new fo(e,t,i);this.setItem(s,r.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const i=this.vr(e);return Bs.Zi(i,t)}Dr(e,t){const i=this.dr.exec(e),s=Number(i[1]);return Ps.Zi(new ve(void 0!==i[2]?i[2]:null),s,t)}Nr(e,t){const i=this._r.exec(e),s=Number(i[1]);return fo.Zi(s,t)}yr(e){return Ha.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,v.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);x("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const i=t?this.ur.insert(e,t):this.ur.remove(e),s=this.Ir(this.ur),r=this.Ir(i),a=[],l=[];return r.forEach(c=>{s.has(c)||a.push(c)}),s.forEach(c=>{r.has(c)||l.push(c)}),this.syncEngine.Br(a,l).then(()=>{this.ur=i})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=bs();return e.forEach((i,s)=>{t=t.unionWith(s.activeTargetIds)}),t}}class vp{constructor(){this.Lr=new Ja,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,i){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Ja,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class eC{qr(e){}shutdown(){}}class Cp{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const tC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class nC{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class iC extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,i,s,r){const a=this.ho(e,t);x("RestConnection","Sending: ",a,i);const l={};return this.lo(l,s,r),this.fo(e,a,l,i).then(c=>(x("RestConnection","Received: ",c),c),c=>{throw tn("RestConnection",`${e} failed with error: `,c,"url: ",a,"request:",i),c})}_o(e,t,i,s,r,a){return this.ao(e,t,i,s,r)}lo(e,t,i){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rn,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((s,r)=>e[r]=s),i&&i.headers.forEach((s,r)=>e[r]=s)}ho(e,t){return`${this.oo}/v1/${t}:${tC[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,i,s){return new Promise((r,a)=>{const l=new ty;l.setWithCredentials(!0),l.listenOnce(W_.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case da.NO_ERROR:const u=l.getResponseJson();x("Connection","XHR received:",JSON.stringify(u)),r(u);break;case da.TIMEOUT:x("Connection",'RPC "'+e+'" timed out'),a(new z(m.DEADLINE_EXCEEDED,"Request time out"));break;case da.HTTP_ERROR:const h=l.getStatus();if(x("Connection",'RPC "'+e+'" failed with status:',h,"response text:",l.getResponseText()),h>0){const d=l.getResponseJson().error;if(d&&d.status&&d.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(m).indexOf(y)>=0?y:m.UNKNOWN}(d.status);a(new z(p,d.message))}else a(new z(m.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new z(m.UNAVAILABLE,"Connection failed."));break;default:O()}}finally{x("Connection",'RPC "'+e+'" completed.')}});const c=JSON.stringify(s);l.send(t,"POST",c,i,15)})}wo(e,t,i){const s=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=J_(),a=K_(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(l.xmlHttpFactory=new ey({})),this.lo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const c=s.join("");x("Connection","Creating WebChannel: "+c,l);const u=r.createWebChannel(c,l);let h=!1,d=!1;const p=new nC({Hr:y=>{d?x("Connection","Not sending because WebChannel is closed:",y):(h||(x("Connection","Opening WebChannel transport."),u.open(),h=!0),x("Connection","WebChannel sending:",y),u.send(y))},Jr:()=>u.close()}),g=(y,w,N)=>{y.listen(w,G=>{try{N(G)}catch(Y){setTimeout(()=>{throw Y},0)}})};return g(u,ps.EventType.OPEN,()=>{d||x("Connection","WebChannel transport opened.")}),g(u,ps.EventType.CLOSE,()=>{d||(d=!0,x("Connection","WebChannel transport closed"),p.io())}),g(u,ps.EventType.ERROR,y=>{d||(d=!0,tn("Connection","WebChannel transport errored:",y),p.io(new z(m.UNAVAILABLE,"The operation could not be completed")))}),g(u,ps.EventType.MESSAGE,y=>{var w;if(!d){const N=y.data[0];M(!!N);const G=N,Y=G.error||(null===(w=G[0])||void 0===w?void 0:w.error);if(Y){x("Connection","WebChannel received error:",Y);const B=Y.status;let re=function(Q){const fe=me[Q];if(void 0!==fe)return pd(fe)}(B),U=Y.message;void 0===re&&(re=m.INTERNAL,U="Unknown error status: "+B+" with message "+Y.message),d=!0,p.io(new z(re,U)),u.close()}else x("Connection","WebChannel received:",N),p.ro(N)}}),g(a,X_.STAT_EVENT,y=>{y.stat===vh.PROXY?x("Connection","Detected buffering proxy"):y.stat===vh.NOPROXY&&x("Connection","Detected no buffering proxy")}),setTimeout(()=>{p.so()},0),p}}function zp(){return typeof window<"u"?window:null}function Gs(){return typeof document<"u"?document:null}function mo(n){return new Yy(n,!0)}class Wa{constructor(e,t,i=1e3,s=1.5,r=6e4){this.Hs=e,this.timerId=t,this.mo=i,this.yo=s,this.po=r,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),i=Math.max(0,Date.now()-this.Eo),s=Math.max(0,t-i);s>0&&x("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,s,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class xp{constructor(e,t,i,s,r,a,l,c){this.Hs=e,this.vo=i,this.Vo=s,this.connection=r,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Wa(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,v.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,v.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var i=this;return(0,v.Z)(function*(){i.Lo(),i.Uo(),i.xo.cancel(),i.So++,4!==e?i.xo.reset():t&&t.code===m.RESOURCE_EXHAUSTED?(de(t.toString()),de("Using maximum backoff delay to prevent overloading the backend."),i.xo.Ao()):t&&t.code===m.UNAUTHENTICATED&&3!==i.state&&(i.authCredentialsProvider.invalidateToken(),i.appCheckCredentialsProvider.invalidateToken()),null!==i.stream&&(i.qo(),i.stream.close(),i.stream=null),i.state=e,yield i.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,s])=>{this.So===t&&this.Go(i,s)},i=>{e(()=>{const s=new z(m.UNKNOWN,"Fetching auth token failed: "+i.message);return this.Qo(s)})})}Go(e,t){const i=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{i(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(s=>{i(()=>this.Qo(s))}),this.stream.onMessage(s=>{i(()=>this.onMessage(s))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,v.Z)(function*(){e.state=0,e.start()}))}Qo(e){return x("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class oC extends xp{constructor(e,t,i,s,r,a){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,a),this.It=r}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Ky(n,e){let t;if("targetChange"in e){const i="NO_CHANGE"===(c=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===c?1:"REMOVE"===c?2:"CURRENT"===c?3:"RESET"===c?4:O(),s=e.targetChange.targetIds||[],r=function(c,u){return c.gt?(M(void 0===u||"string"==typeof u),_e.fromBase64String(u||"")):(M(void 0===u||u instanceof Uint8Array),_e.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),a=e.targetChange.cause,l=a&&function(c){const u=void 0===c.code?m.UNKNOWN:pd(c.code);return new z(u,c.message||"")}(a);t=new yd(i,s,r,l||null)}else if("documentChange"in e){const i=e.documentChange,s=lt(n,i.document.name),r=Ce(i.document.updateTime),a=new Ne({mapValue:{fields:i.document.fields}}),l=W.newFoundDocument(s,r,a);t=new Ss(i.targetIds||[],i.removedTargetIds||[],l.key,l)}else if("documentDelete"in e){const i=e.documentDelete,s=lt(n,i.document),r=i.readTime?Ce(i.readTime):k.min(),a=W.newNoDocument(s,r);t=new Ss([],i.removedTargetIds||[],a.key,a)}else if("documentRemove"in e){const i=e.documentRemove,s=lt(n,i.document);t=new Ss([],i.removedTargetIds||[],s,null)}else{if(!("filter"in e))return O();{const i=e.filter,r=new By(i.count||0);t=new _d(i.targetId,r)}}var c;return t}(this.It,e),i=function(s){if(!("targetChange"in s))return k.min();const r=s.targetChange;return r.targetIds&&r.targetIds.length?k.min():r.readTime?Ce(r.readTime):k.min()}(e);return this.listener.Wo(t,i)}zo(e){const t={};t.database=oo(this.It),t.addTarget=function(s,r){let a;const l=r.target;return a=Cs(l)?{documents:Nd(s,l)}:{query:Da(s,l)},a.targetId=r.targetId,r.resumeToken.approximateByteSize()>0?a.resumeToken=xd(s,r.resumeToken):r.snapshotVersion.compareTo(k.min())>0&&(a.readTime=no(s,r.snapshotVersion.toTimestamp())),a}(this.It,e);const i=function Xy(n,e){const t=function(i,s){switch(s){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return O()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);i&&(t.labels=i),this.Bo(t)}Ho(e){const t={};t.database=oo(this.It),t.removeTarget=e,this.Bo(t)}}class sC extends xp{constructor(e,t,i,s,r,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,a),this.It=r,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(M(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Wy(n,e){return n&&n.length>0?(M(void 0!==e),n.map(t=>function(i,s){let r=Ce(i.updateTime?i.updateTime:s);return r.isEqual(k.min())&&(r=Ce(s)),new Ry(r,i.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),i=Ce(e.commitTime);return this.listener.Zo(i,t)}return M(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=oo(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>so(this.It,i))};this.Bo(t)}}class rC extends class{}{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.It=s,this.nu=!1}su(){if(this.nu)throw new z(m.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,i){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,r])=>this.connection.ao(e,t,i,s,r)).catch(s=>{throw"FirebaseError"===s.name?(s.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(m.UNKNOWN,s.toString())})}_o(e,t,i,s){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([r,a])=>this.connection._o(e,t,i,r,a,s)).catch(r=>{throw"FirebaseError"===r.name?(r.code===m.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new z(m.UNKNOWN,r.toString())})}terminate(){this.nu=!0}}class lC{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(de(t),this.ou=!1):x("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class cC{constructor(e,t,i,s,r){var a=this;this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=r,this.mu.qr(l=>{i.enqueueAndForget((0,v.Z)(function*(){var c;_t(a)&&(x("RemoteStore","Restarting streams for network reachability change."),yield(c=(0,v.Z)(function*(u){const h=b(u);h._u.add(4),yield ei(h),h.gu.set("Unknown"),h._u.delete(4),yield go(h)}),function(u){return c.apply(this,arguments)})(a))}))}),this.gu=new lC(i,s)}}function go(n){return el.apply(this,arguments)}function el(){return el=(0,v.Z)(function*(n){if(_t(n))for(const e of n.wu)yield e(!0)}),el.apply(this,arguments)}function ei(n){return tl.apply(this,arguments)}function tl(){return tl=(0,v.Z)(function*(n){for(const e of n.wu)yield e(!1)}),tl.apply(this,arguments)}function Us(n,e){const t=b(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),ol(t)?il(t):ni(t).ko()&&nl(t,e))}function _o(n,e){const t=b(n),i=ni(t);t.du.delete(e),i.ko()&&Tp(t,e),0===t.du.size&&(i.ko()?i.Fo():_t(t)&&t.gu.set("Unknown"))}function nl(n,e){n.yu.Mt(e.targetId),ni(n).zo(e)}function Tp(n,e){n.yu.Mt(e),ni(n).Ho(e)}function il(n){n.yu=new $y({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),se:e=>n.du.get(e)||null}),ni(n).start(),n.gu.uu()}function ol(n){return _t(n)&&!ni(n).No()&&n.du.size>0}function _t(n){return 0===b(n)._u.size}function wp(n){n.yu=void 0}function uC(n){return sl.apply(this,arguments)}function sl(){return sl=(0,v.Z)(function*(n){n.du.forEach((e,t)=>{nl(n,e)})}),sl.apply(this,arguments)}function hC(n,e){return rl.apply(this,arguments)}function rl(){return rl=(0,v.Z)(function*(n,e){wp(n),ol(n)?(n.gu.hu(e),il(n)):n.gu.set("Unknown")}),rl.apply(this,arguments)}function dC(n,e,t){return al.apply(this,arguments)}function al(){return al=(0,v.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof yd&&2===e.state&&e.cause)try{yield(i=(0,v.Z)(function*(s,r){const a=r.cause;for(const l of r.targetIds)s.du.has(l)&&(yield s.remoteSyncer.rejectListen(l,a),s.du.delete(l),s.yu.removeTarget(l))}),function(s,r){return i.apply(this,arguments)})(n,e)}catch(i){x("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Zs(n,i)}else if(e instanceof Ss?n.yu.Gt(e):e instanceof _d?n.yu.Yt(e):n.yu.Wt(e),!t.isEqual(k.min()))try{const i=yield dp(n.localStore);t.compareTo(i)>=0&&(yield function(s,r){const a=s.yu.te(r);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.du.get(c);u&&s.du.set(c,u.withResumeToken(l.resumeToken,r))}}),a.targetMismatches.forEach(l=>{const c=s.du.get(l);if(!c)return;s.du.set(l,c.withResumeToken(_e.EMPTY_BYTE_STRING,c.snapshotVersion)),Tp(s,l);const u=new kt(c.target,l,1,c.sequenceNumber);nl(s,u)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){x("RemoteStore","Failed to raise snapshot:",i),yield Zs(n,i)}var i}),al.apply(this,arguments)}function Zs(n,e,t){return ll.apply(this,arguments)}function ll(){return ll=(0,v.Z)(function*(n,e,t){if(!St(e))throw e;n._u.add(1),yield ei(n),n.gu.set("Offline"),t||(t=()=>dp(n.localStore)),n.asyncQueue.enqueueRetryable((0,v.Z)(function*(){x("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield go(n)}))}),ll.apply(this,arguments)}function Ip(n,e){return e().catch(t=>Zs(n,t,e))}function ti(n){return cl.apply(this,arguments)}function cl(){return cl=(0,v.Z)(function*(n){const e=b(n),t=Rt(e);let i=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;pC(e);)try{const s=yield Kv(e.localStore,i);if(null===s){0===e.fu.length&&t.Fo();break}i=s.batchId,fC(e,s)}catch(s){yield Zs(e,s)}bp(e)&&Sp(e)}),cl.apply(this,arguments)}function pC(n){return _t(n)&&n.fu.length<10}function fC(n,e){n.fu.push(e);const t=Rt(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function bp(n){return _t(n)&&!Rt(n).No()&&n.fu.length>0}function Sp(n){Rt(n).start()}function mC(n){return ul.apply(this,arguments)}function ul(){return ul=(0,v.Z)(function*(n){Rt(n).eu()}),ul.apply(this,arguments)}function gC(n){return hl.apply(this,arguments)}function hl(){return hl=(0,v.Z)(function*(n){const e=Rt(n);for(const t of n.fu)e.Xo(t.mutations)}),hl.apply(this,arguments)}function _C(n,e,t){return dl.apply(this,arguments)}function dl(){return dl=(0,v.Z)(function*(n,e,t){const i=n.fu.shift(),s=ka.from(i,e,t);yield Ip(n,()=>n.remoteSyncer.applySuccessfulWrite(s)),yield ti(n)}),dl.apply(this,arguments)}function yC(n,e){return pl.apply(this,arguments)}function pl(){return pl=(0,v.Z)(function*(n,e){var t;e&&Rt(n).Yo&&(yield(t=(0,v.Z)(function*(i,s){if(dd(r=s.code)&&r!==m.ABORTED){const a=i.fu.shift();Rt(i).Mo(),yield Ip(i,()=>i.remoteSyncer.rejectFailedWrite(a.batchId,s)),yield ti(i)}var r}),function(i,s){return t.apply(this,arguments)})(n,e)),bp(n)&&Sp(n)}),pl.apply(this,arguments)}function Np(n,e){return fl.apply(this,arguments)}function fl(){return fl=(0,v.Z)(function*(n,e){const t=b(n);t.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");const i=_t(t);t._u.add(3),yield ei(t),i&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield go(t)}),fl.apply(this,arguments)}function ml(n,e){return gl.apply(this,arguments)}function gl(){return gl=(0,v.Z)(function*(n,e){const t=b(n);e?(t._u.delete(2),yield go(t)):e||(t._u.add(2),yield ei(t),t.gu.set("Unknown"))}),gl.apply(this,arguments)}function ni(n){return n.pu||(n.pu=function(e,t,i){const s=b(e);return s.su(),new oC(t,s.connection,s.authCredentials,s.appCheckCredentials,s.It,i)}(n.datastore,n.asyncQueue,{Yr:uC.bind(null,n),Zr:hC.bind(null,n),Wo:dC.bind(null,n)}),n.wu.push(function(){var e=(0,v.Z)(function*(t){t?(n.pu.Mo(),ol(n)?il(n):n.gu.set("Unknown")):(yield n.pu.stop(),wp(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Rt(n){return n.Iu||(n.Iu=function(e,t,i){const s=b(e);return s.su(),new sC(t,s.connection,s.authCredentials,s.appCheckCredentials,s.It,i)}(n.datastore,n.asyncQueue,{Yr:mC.bind(null,n),Zr:yC.bind(null,n),tu:gC.bind(null,n),Zo:_C.bind(null,n)}),n.wu.push(function(){var e=(0,v.Z)(function*(t){t?(n.Iu.Mo(),yield ti(n)):(yield n.Iu.stop(),n.fu.length>0&&(x("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class _l{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new ge,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}static createAndSchedule(e,t,i,s,r){const a=Date.now()+i,l=new _l(e,t,a,s,r);return l.start(i),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new z(m.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function ii(n,e){if(de("AsyncQueue",`${e}: ${n}`),St(n))return new z(m.UNAVAILABLE,`${e}: ${n}`);throw n}class oi{constructor(e){this.comparator=e?(t,i)=>e(t,i)||I.comparator(t.key,i.key):(t,i)=>I.comparator(t.key,i.key),this.keyedMap=Wi(),this.sortedSet=new ue(this.comparator)}static emptySet(e){return new oi(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof oi)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const i=new oi;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}class Ap{constructor(){this.Tu=new ue(I.comparator)}track(e){const t=e.doc.key,i=this.Tu.get(t);i?0!==e.type&&3===i.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==i.type?this.Tu=this.Tu.insert(t,{type:i.type,doc:e.doc}):2===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===i.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===i.type?this.Tu=this.Tu.remove(t):1===e.type&&2===i.type?this.Tu=this.Tu.insert(t,{type:1,doc:i.doc}):0===e.type&&1===i.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):O():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,i)=>{e.push(i)}),e}}class si{constructor(e,t,i,s,r,a,l,c,u){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,i,s,r){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new si(e,t,oi.emptySet(t),a,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Hi(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}class vC{constructor(){this.Au=void 0,this.listeners=[]}}class CC{constructor(){this.queries=new Mt(e=>Jh(e),Hi),this.onlineState="Unknown",this.Ru=new Set}}function yl(n,e){return vl.apply(this,arguments)}function vl(){return vl=(0,v.Z)(function*(n,e){const t=b(n),i=e.query;let s=!1,r=t.queries.get(i);if(r||(s=!0,r=new vC),s)try{r.Au=yield t.onListen(i)}catch(a){const l=ii(a,`Initialization of query '${Ia(e.query)}' failed`);return void e.onError(l)}t.queries.set(i,r),r.listeners.push(e),e.bu(t.onlineState),r.Au&&e.Pu(r.Au)&&xl(t)}),vl.apply(this,arguments)}function Cl(n,e){return zl.apply(this,arguments)}function zl(){return zl=(0,v.Z)(function*(n,e){const t=b(n),i=e.query;let s=!1;const r=t.queries.get(i);if(r){const a=r.listeners.indexOf(e);a>=0&&(r.listeners.splice(a,1),s=0===r.listeners.length)}if(s)return t.queries.delete(i),t.onUnlisten(i)}),zl.apply(this,arguments)}function zC(n,e){const t=b(n);let i=!1;for(const s of e){const a=t.queries.get(s.query);if(a){for(const l of a.listeners)l.Pu(s)&&(i=!0);a.Au=s}}i&&xl(t)}function xC(n,e,t){const i=b(n),s=i.queries.get(e);if(s)for(const r of s.listeners)r.onError(t);i.queries.delete(e)}function xl(n){n.Ru.forEach(e=>{e.next()})}class Tl{constructor(e,t,i){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=i||{}}Pu(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)3!==s.type&&i.push(s);e=new si(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=si.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class TC{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class Op{constructor(e){this.It=e}Ji(e){return lt(this.It,e)}Yi(e){return e.metadata.exists?Sd(this.It,e.document,!1):W.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return Ce(e)}}class wC{constructor(e,t,i){this.Mu=e,this.localStore=t,this.It=i,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Dp(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const i=q.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(i.get(i.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,i=new Op(this.It);for(const s of e)if(s.metadata.queries){const r=i.Ji(s.metadata.name);for(const a of s.metadata.queries){const l=(t.get(a)||L()).add(r);t.set(a,l)}}return t}complete(){var e=this;return(0,v.Z)(function*(){const t=yield function Wv(n,e,t,i){return Qa.apply(this,arguments)}(e.localStore,new Op(e.It),e.documents,e.Mu.id),i=e.$u(e.documents);for(const s of e.queries)yield Xv(e.localStore,s,i.get(s.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function Dp(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class Ep{constructor(e){this.key=e}}class Mp{constructor(e){this.key=e}}class kp{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=L(),this.mutatedKeys=L(),this.Gu=Wh(e),this.Qu=new oi(this.Gu)}get ju(){return this.Uu}Wu(e,t){const i=t?t.zu:new Ap,s=t?t.Qu:this.Qu;let r=t?t.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c="F"===this.query.limitType&&s.size===this.query.limit?s.last():null,u="L"===this.query.limitType&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((h,d)=>{const p=s.get(h),g=ba(this.query,d)?d:null,y=!!p&&this.mutatedKeys.has(p.key),w=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let N=!1;p&&g?p.data.isEqual(g.data)?y!==w&&(i.track({type:3,doc:g}),N=!0):this.Hu(p,g)||(i.track({type:2,doc:g}),N=!0,(c&&this.Gu(g,c)>0||u&&this.Gu(g,u)<0)&&(l=!0)):!p&&g?(i.track({type:0,doc:g}),N=!0):p&&!g&&(i.track({type:1,doc:p}),N=!0,(c||u)&&(l=!0)),N&&(g?(a=a.add(g),r=w?r.add(h):r.delete(h)):(a=a.delete(h),r=r.delete(h)))}),null!==this.query.limit)for(;a.size>this.query.limit;){const h="F"===this.query.limitType?a.last():a.first();a=a.delete(h.key),r=r.delete(h.key),i.track({type:1,doc:h})}return{Qu:a,zu:i,$i:l,mutatedKeys:r}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i){const s=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const r=e.zu.Eu();r.sort((u,h)=>function(d,p){const g=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return O()}};return g(d)-g(p)}(u.type,h.type)||this.Gu(u.doc,h.doc)),this.Ju(i);const a=t?this.Yu():[],l=0===this.Ku.size&&this.current?1:0,c=l!==this.qu;return this.qu=l,0!==r.length||c?{snapshot:new si(this.query,e.Qu,s,r,e.mutatedKeys,0===l,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Xu:a}:{Xu:a}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new Ap,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=L(),this.Qu.forEach(i=>{this.Zu(i.key)&&(this.Ku=this.Ku.add(i.key))});const t=[];return e.forEach(i=>{this.Ku.has(i)||t.push(new Mp(i))}),this.Ku.forEach(i=>{e.has(i)||t.push(new Ep(i))}),t}tc(e){this.Uu=e.Hi,this.Ku=L();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return si.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class IC{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class bC{constructor(e){this.key=e,this.nc=!1}}class SC{constructor(e,t,i,s,r,a){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=a,this.sc={},this.ic=new Mt(l=>Jh(l),Hi),this.rc=new Map,this.oc=new Set,this.uc=new ue(I.comparator),this.cc=new Map,this.ac=new Pa,this.hc={},this.lc=new Map,this.fc=yn.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function NC(n,e){return wl.apply(this,arguments)}function wl(){return wl=(0,v.Z)(function*(n,e){const t=jl(n);let i,s;const r=t.ic.get(e);if(r)i=r.targetId,t.sharedClientState.addLocalQueryTarget(i),s=r.view.ec();else{const a=yield Wn(t.localStore,Be(e));t.isPrimaryClient&&Us(t.remoteStore,a);const l=t.sharedClientState.addLocalQueryTarget(a.targetId);i=a.targetId,s=yield Il(t,e,i,"current"===l,a.resumeToken)}return s}),wl.apply(this,arguments)}function Il(n,e,t,i,s){return bl.apply(this,arguments)}function bl(){return bl=(0,v.Z)(function*(n,e,t,i,s){n._c=(d,p,g)=>{return(y=(0,v.Z)(function*(w,N,G,Y){let B=N.view.Wu(G);B.$i&&(B=yield Ls(w.localStore,N.query,!1).then(({documents:Q})=>N.view.Wu(Q,B)));const re=Y&&Y.targetChanges.get(N.targetId),U=N.view.applyChanges(B,w.isPrimaryClient,re);return Vl(w,N.targetId,U.Xu),U.snapshot}),function(w,N,G,Y){return y.apply(this,arguments)})(n,d,p,g);var y};const r=yield Ls(n.localStore,e,!0),a=new kp(e,r.Hi),l=a.Wu(r.documents),c=to.createSynthesizedTargetChangeForCurrentChange(t,i&&"Offline"!==n.onlineState,s),u=a.applyChanges(l,n.isPrimaryClient,c);Vl(n,t,u.Xu);const h=new IC(e,t,a);return n.ic.set(e,h),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),u.snapshot}),bl.apply(this,arguments)}function AC(n,e){return Sl.apply(this,arguments)}function Sl(){return Sl=(0,v.Z)(function*(n,e){const t=b(n),i=t.ic.get(e),s=t.rc.get(i.targetId);if(s.length>1)return t.rc.set(i.targetId,s.filter(r=>!Hi(r,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(i.targetId),t.sharedClientState.isActiveQueryTarget(i.targetId)||(yield Xn(t.localStore,i.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(i.targetId),_o(t.remoteStore,i.targetId),ri(t,i.targetId)}).catch(bt))):(ri(t,i.targetId),yield Xn(t.localStore,i.targetId,!0))}),Sl.apply(this,arguments)}function Nl(){return Nl=(0,v.Z)(function*(n,e,t){const i=Yl(n);try{const s=yield function(r,a){const l=b(r),c=ie.now(),u=a.reduce((p,g)=>p.add(g.key),L());let h,d;return l.persistence.runTransaction("Locally write mutations","readwrite",p=>{let g=je(),y=L();return l.Gi.getEntries(p,u).next(w=>{g=w,g.forEach((N,G)=>{G.isValidDocument()||(y=y.add(N))})}).next(()=>l.localDocuments.getOverlayedDocuments(p,g)).next(w=>{h=w;const N=[];for(const G of a){const Y=Py(G,h.get(G.key).overlayedDocument);null!=Y&&N.push(new gt(G.key,Y,Gh(Y.value.mapValue),oe.exists(!0)))}return l.mutationQueue.addMutationBatch(p,c,N,a)}).next(w=>{d=w;const N=w.applyToLocalDocumentSet(h,y);return l.documentOverlayCache.saveOverlays(p,w.batchId,N)})}).then(()=>({batchId:d.batchId,changes:md(h)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),function(r,a,l){let c=r.hc[r.currentUser.toKey()];c||(c=new ue(R)),c=c.insert(a,l),r.hc[r.currentUser.toKey()]=c}(i,s.batchId,t),yield yt(i,s.changes),yield ti(i.remoteStore)}catch(s){const r=ii(s,"Failed to persist write");t.reject(r)}}),Nl.apply(this,arguments)}function Fp(n,e){return Al.apply(this,arguments)}function Al(){return Al=(0,v.Z)(function*(n,e){const t=b(n);try{const i=yield Jv(t.localStore,e);e.targetChanges.forEach((s,r)=>{const a=t.cc.get(r);a&&(M(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?a.nc=!0:s.modifiedDocuments.size>0?M(a.nc):s.removedDocuments.size>0&&(M(a.nc),a.nc=!1))}),yield yt(t,i,e)}catch(i){yield bt(i)}}),Al.apply(this,arguments)}function Vp(n,e,t){const i=b(n);if(i.isPrimaryClient&&0===t||!i.isPrimaryClient&&1===t){const s=[];i.ic.forEach((r,a)=>{const l=a.view.bu(e);l.snapshot&&s.push(l.snapshot)}),function(r,a){const l=b(r);l.onlineState=a;let c=!1;l.queries.forEach((u,h)=>{for(const d of h.listeners)d.bu(a)&&(c=!0)}),c&&xl(l)}(i.eventManager,e),s.length&&i.sc.Wo(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function DC(n,e,t){return Ol.apply(this,arguments)}function Ol(){return Ol=(0,v.Z)(function*(n,e,t){const i=b(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.cc.get(e),r=s&&s.key;if(r){let a=new ue(I.comparator);a=a.insert(r,W.newNoDocument(r,k.min()));const l=L().add(r),c=new eo(k.min(),new Map,new H(R),a,l);yield Fp(i,c),i.uc=i.uc.remove(r),i.cc.delete(e),Rl(i)}else yield Xn(i.localStore,e,!1).then(()=>ri(i,e,t)).catch(bt)}),Ol.apply(this,arguments)}function EC(n,e){return Dl.apply(this,arguments)}function Dl(){return Dl=(0,v.Z)(function*(n,e){const t=b(n),i=e.batch.batchId;try{const s=yield Hv(t.localStore,e);Fl(t,i,null),kl(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield yt(t,s)}catch(s){yield bt(s)}}),Dl.apply(this,arguments)}function MC(n,e,t){return El.apply(this,arguments)}function El(){return El=(0,v.Z)(function*(n,e,t){const i=b(n);try{const s=yield function(r,a){const l=b(r);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(h=>(M(null!==h),u=h.keys(),l.mutationQueue.removeMutationBatch(c,h))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,e);Fl(i,e,t),kl(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield yt(i,s)}catch(s){yield bt(s)}}),El.apply(this,arguments)}function Ml(){return Ml=(0,v.Z)(function*(n,e){const t=b(n);_t(t.remoteStore)||x("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const i=yield function(r){const a=b(r);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",l=>a.mutationQueue.getHighestUnacknowledgedBatchId(l))}(t.localStore);if(-1===i)return void e.resolve();const s=t.lc.get(i)||[];s.push(e),t.lc.set(i,s)}catch(i){const s=ii(i,"Initialization of waitForPendingWrites() operation failed");e.reject(s)}}),Ml.apply(this,arguments)}function kl(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function Fl(n,e,t){const i=b(n);let s=i.hc[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),i.hc[i.currentUser.toKey()]=s}}function ri(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.rc.get(e))n.ic.delete(i),t&&n.sc.wc(i,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(i=>{n.ac.containsKey(i)||Rp(n,i)})}function Rp(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(_o(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),Rl(n))}function Vl(n,e,t){for(const i of t)i instanceof Ep?(n.ac.addReference(i.key,e),FC(n,i)):i instanceof Mp?(x("SyncEngine","Document no longer in limbo: "+i.key),n.ac.removeReference(i.key,e),n.ac.containsKey(i.key)||Rp(n,i.key)):O()}function FC(n,e){const t=e.key,i=t.path.canonicalString();n.uc.get(t)||n.oc.has(i)||(x("SyncEngine","New document in limbo: "+t),n.oc.add(i),Rl(n))}function Rl(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new I(q.fromString(e)),i=n.fc.next();n.cc.set(i,new bC(t)),n.uc=n.uc.insert(t,i),Us(n.remoteStore,new kt(Be(Un(t.path)),i,2,Qe.at))}}function yt(n,e,t){return Ll.apply(this,arguments)}function Ll(){return Ll=(0,v.Z)(function*(n,e,t){const i=b(n),s=[],r=[],a=[];var l;i.ic.isEmpty()||(i.ic.forEach((l,c)=>{a.push(i._c(c,e,t).then(u=>{if((u||t)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(c.targetId,u?.fromCache?"not-current":"current"),u){s.push(u);const h=Za.Ci(c.targetId,u);r.push(h)}}))}),yield Promise.all(a),i.sc.Wo(s),yield(l=(0,v.Z)(function*(c,u){const h=b(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>f.forEach(u,p=>f.forEach(p.Si,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>f.forEach(p.Di,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!St(d))throw d;x("LocalStore","Failed to update sequence numbers: "+d)}for(const d of u){const p=d.targetId;if(!d.fromCache){const g=h.Ui.get(p),w=g.withLastLimboFreeSnapshotVersion(g.snapshotVersion);h.Ui=h.Ui.insert(p,w)}}}),function(c,u){return l.apply(this,arguments)})(i.localStore,r))}),Ll.apply(this,arguments)}function VC(n,e){return Pl.apply(this,arguments)}function Pl(){return Pl=(0,v.Z)(function*(n,e){const t=b(n);if(!t.currentUser.isEqual(e)){x("SyncEngine","User change. New user:",e.toKey());const i=yield hp(t.localStore,e);t.currentUser=e,(s=t).lc.forEach(a=>{a.forEach(l=>{l.reject(new z(m.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),s.lc.clear(),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield yt(t,i.ji)}var s}),Pl.apply(this,arguments)}function RC(n,e){const t=b(n),i=t.cc.get(e);if(i&&i.nc)return L().add(i.key);{let s=L();const r=t.rc.get(e);if(!r)return s;for(const a of r){const l=t.ic.get(a);s=s.unionWith(l.view.ju)}return s}}function LC(n,e){return Bl.apply(this,arguments)}function Bl(){return Bl=(0,v.Z)(function*(n,e){const t=b(n),i=yield Ls(t.localStore,e.query,!0),s=e.view.tc(i);return t.isPrimaryClient&&Vl(t,e.targetId,s.Xu),s}),Bl.apply(this,arguments)}function PC(n,e){return Gl.apply(this,arguments)}function Gl(){return Gl=(0,v.Z)(function*(n,e){const t=b(n);return mp(t.localStore,e).then(i=>yt(t,i))}),Gl.apply(this,arguments)}function BC(n,e,t,i){return Ul.apply(this,arguments)}function Ul(){return Ul=(0,v.Z)(function*(n,e,t,i){const s=b(n),r=yield function(a,l){const c=b(a),u=b(c.mutationQueue);return c.persistence.runTransaction("Lookup mutation documents","readonly",h=>u.Tn(h,l).next(d=>d?c.localDocuments.getDocuments(h,d):f.resolve(null)))}(s.localStore,e);var l;null!==r?("pending"===t?yield ti(s.remoteStore):"acknowledged"===t||"rejected"===t?(Fl(s,e,i||null),kl(s,e),l=e,b(b(s.localStore).mutationQueue).An(l)):O(),yield yt(s,r)):x("SyncEngine","Cannot apply mutation batch with id: "+e)}),Ul.apply(this,arguments)}function Zl(){return Zl=(0,v.Z)(function*(n,e){const t=b(n);if(jl(t),Yl(t),!0===e&&!0!==t.dc){const i=t.sharedClientState.getAllActiveQueryTargets(),s=yield Lp(t,i.toArray());t.dc=!0,yield ml(t.remoteStore,!0);for(const r of s)Us(t.remoteStore,r)}else if(!1===e&&!1!==t.dc){const i=[];let s=Promise.resolve();t.rc.forEach((r,a)=>{t.sharedClientState.isLocalQueryTarget(a)?i.push(a):s=s.then(()=>(ri(t,a),Xn(t.localStore,a,!0))),_o(t.remoteStore,a)}),yield s,yield Lp(t,i),function(r){const a=b(r);a.cc.forEach((l,c)=>{_o(a.remoteStore,c)}),a.ac.fs(),a.cc=new Map,a.uc=new ue(I.comparator)}(t),t.dc=!1,yield ml(t.remoteStore,!1)}}),Zl.apply(this,arguments)}function Lp(n,e,t){return ql.apply(this,arguments)}function ql(){return ql=(0,v.Z)(function*(n,e,t){const i=b(n),s=[],r=[];for(const a of e){let l;const c=i.rc.get(a);if(c&&0!==c.length){l=yield Wn(i.localStore,Be(c[0]));for(const u of c){const h=i.ic.get(u),d=yield LC(i,h);d.snapshot&&r.push(d.snapshot)}}else{const u=yield fp(i.localStore,a);l=yield Wn(i.localStore,u),yield Il(i,Pp(u),a,!1,l.resumeToken)}s.push(l)}return i.sc.Wo(r),s}),ql.apply(this,arguments)}function Pp(n){return Yh(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function UC(n){const e=b(n);return b(b(e.localStore).persistence).vi()}function ZC(n,e,t,i){return $l.apply(this,arguments)}function $l(){return $l=(0,v.Z)(function*(n,e,t,i){const s=b(n);if(s.dc)return void x("SyncEngine","Ignoring unexpected query state notification.");const r=s.rc.get(e);if(r&&r.length>0)switch(t){case"current":case"not-current":{const a=yield mp(s.localStore,Kh(r[0])),l=eo.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_e.EMPTY_BYTE_STRING);yield yt(s,a,l);break}case"rejected":yield Xn(s.localStore,e,!0),ri(s,e,i);break;default:O()}}),$l.apply(this,arguments)}function qC(n,e,t){return Ql.apply(this,arguments)}function Ql(){return Ql=(0,v.Z)(function*(n,e,t){const i=jl(n);if(i.dc){for(const s of e){if(i.rc.has(s)){x("SyncEngine","Adding an already active target "+s);continue}const r=yield fp(i.localStore,s),a=yield Wn(i.localStore,r);yield Il(i,Pp(r),a.targetId,!1,a.resumeToken),Us(i.remoteStore,a)}for(const s of t)i.rc.has(s)&&(yield Xn(i.localStore,s,!1).then(()=>{_o(i.remoteStore,s),ri(i,s)}).catch(bt))}}),Ql.apply(this,arguments)}function jl(n){const e=b(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Fp.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=RC.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=DC.bind(null,e),e.sc.Wo=zC.bind(null,e.eventManager),e.sc.wc=xC.bind(null,e.eventManager),e}function Yl(n){const e=b(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EC.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=MC.bind(null,e),e}class Bp{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,v.Z)(function*(){t.It=mo(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return up(this.persistence,new cp,e.initialUser,this.It)}yc(e){return new ap(Vs.Bs,this.It)}gc(e){return new vp}terminate(){var e=this;return(0,v.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Gp extends Bp{constructor(e,t,i){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=i,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,i=this;return(0,v.Z)(function*(){yield t().call(i,e),yield i.Ac.initialize(i,e),yield Yl(i.Ac.syncEngine),yield ti(i.Ac.remoteStore),yield i.persistence.li(()=>(i.gcScheduler&&!i.gcScheduler.started&&i.gcScheduler.start(),i.indexBackfillerScheduler&&!i.indexBackfillerScheduler.started&&i.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return up(this.persistence,new cp,e.initialUser,this.It)}Tc(e,t){return new kv(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const i=new _y(t,this.persistence);return new gy(e.asyncQueue,i)}yc(e){const t=Ua(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),i=void 0!==this.cacheSizeBytes?Ye.withCacheSize(this.cacheSizeBytes):Ye.DEFAULT;return new Ga(this.synchronizeTabs,t,e.clientId,i,e.asyncQueue,zp(),Gs(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new vp}}class QC extends Gp{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,i=this;return(0,v.Z)(function*(){yield t().call(i,e);const s=i.Ac.syncEngine;i.sharedClientState instanceof Ka&&(i.sharedClientState.syncEngine={Fr:BC.bind(null,s),$r:ZC.bind(null,s),Br:qC.bind(null,s),vi:UC.bind(null,s),Mr:PC.bind(null,s)},yield i.sharedClientState.start()),yield i.persistence.li(function(){var r=(0,v.Z)(function*(a){yield function GC(n,e){return Zl.apply(this,arguments)}(i.Ac.syncEngine,a),i.gcScheduler&&(a&&!i.gcScheduler.started?i.gcScheduler.start():a||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(a&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():a||i.indexBackfillerScheduler.stop())});return function(a){return r.apply(this,arguments)}}())})()}gc(e){const t=zp();if(!Ka.C(t))throw new z(m.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const i=Ua(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Ka(t,e.asyncQueue,i,e.clientId,e.initialUser)}}class Hl{initialize(e,t){var i=this;return(0,v.Z)(function*(){i.localStore||(i.localStore=e.localStore,i.sharedClientState=e.sharedClientState,i.datastore=i.createDatastore(t),i.remoteStore=i.createRemoteStore(t),i.eventManager=i.createEventManager(t),i.syncEngine=i.createSyncEngine(t,!e.synchronizeTabs),i.sharedClientState.onlineStateHandler=s=>Vp(i.syncEngine,s,1),i.remoteStore.remoteSyncer.handleCredentialChange=VC.bind(null,i.syncEngine),yield ml(i.remoteStore,i.syncEngine.isPrimaryClient))})()}createEventManager(e){return new CC}createDatastore(e){const t=mo(e.databaseInfo.databaseId),i=new iC(e.databaseInfo);return new rC(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return t=this.localStore,i=this.datastore,s=e.asyncQueue,r=l=>Vp(this.syncEngine,l,0),a=Cp.C()?new Cp:new eC,new cC(t,i,s,r,a);var t,i,s,r,a}createSyncEngine(e,t){return function(i,s,r,a,l,c,u){const h=new SC(i,s,r,a,l,c);return u&&(h.dc=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,v.Z)(function*(t){const i=b(t);x("RemoteStore","RemoteStore shutting down."),i._u.add(5),yield ei(i),i.mu.shutdown(),i.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Jl(n,e,t){if(!t)throw new z(m.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Up(n,e,t,i){if(!0===e&&!0===i)throw new z(m.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Zp(n){if(!I.isDocumentKey(n))throw new z(m.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function qp(n){if(I.isDocumentKey(n))throw new z(m.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function qs(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":O()}function P(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(m.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=qs(n);throw new z(m.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function $p(n,e){if(e<=0)throw new z(m.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const Qp=new Map;class jp{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new z(m.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new z(m.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,Up("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class yo{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new z(m.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new z(m.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jp(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new oy;switch(t.type){case"gapi":return new ly(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new z(m.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Qp.get(e);t&&(x("ComponentProvider","Removing Datastore"),Qp.delete(e),t.terminate())}(this),Promise.resolve()}}class X{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ut(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new X(this.firestore,e,this._key)}}class ke{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ke(this.firestore,e,this._query)}}class ut extends ke{constructor(e,t,i){super(e,t,Un(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new X(this.firestore,null,new I(e))}withConverter(e){return new ut(this.firestore,e,this._path)}}function Hp(n,e,...t){if(n=(0,J.m9)(n),Jl("collection","path",e),n instanceof yo){const i=q.fromString(e,...t);return qp(i),new ut(n,null,i)}{if(!(n instanceof X||n instanceof ut))throw new z(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(q.fromString(e,...t));return qp(i),new ut(n.firestore,null,i)}}function $s(n,e,...t){if(n=(0,J.m9)(n),1===arguments.length&&(e=Th.R()),Jl("doc","path",e),n instanceof yo){const i=q.fromString(e,...t);return Zp(i),new X(n,null,new I(i))}{if(!(n instanceof X||n instanceof ut))throw new z(m.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(q.fromString(e,...t));return Zp(i),new X(n.firestore,n instanceof ut?n.converter:null,new I(i))}}function Jp(n,e){return n=(0,J.m9)(n),e=(0,J.m9)(e),(n instanceof X||n instanceof ut)&&(e instanceof X||e instanceof ut)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function Kl(n,e){return n=(0,J.m9)(n),e=(0,J.m9)(e),n instanceof ke&&e instanceof ke&&n.firestore===e.firestore&&Hi(n._query,e._query)&&n.converter===e.converter}function Kp(n,e=10240){let t=0;return{read:()=>(0,v.Z)(function*(){if(t<n.byteLength){const i={value:n.slice(t,t+e),done:!1};return t+=e,i}return{done:!0}})(),cancel:()=>(0,v.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Qs{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):de("Uncaught Error in snapshot listener:",e)}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class YC{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new ge,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(i=>{i&&i.Ou()?this.metadata.resolve(i.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(i?.ku)}`))},i=>this.metadata.reject(i))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,v.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,v.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,v.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const i=e.vc.decode(t),s=Number(i);isNaN(s)&&e.Dc(`length string (${i}) is not valid number`);const r=yield e.Cc(s);return new TC(JSON.parse(r),t.length+s)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,v.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const i=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),i})()}Cc(e){var t=this;return(0,v.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const i=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),i})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,v.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const i=new Uint8Array(e.buffer.length+t.value.length);i.set(e.buffer),i.set(t.value,e.buffer.length),e.buffer=i}return t.done})()}}class KC{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,v.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new z(m.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const i=yield(s=(0,v.Z)(function*(r,a){const l=b(r),c=oo(l.It)+"/documents",u={documents:a.map(g=>io(l.It,g))},h=yield l._o("BatchGetDocuments",c,u,a.length),d=new Map;h.forEach(g=>{const y=function Jy(n,e){return"found"in e?function(t,i){M(!!i.found);const s=lt(t,i.found.name),r=Ce(i.found.updateTime),a=new Ne({mapValue:{fields:i.found.fields}});return W.newFoundDocument(s,r,a)}(n,e):"missing"in e?function(t,i){M(!!i.missing),M(!!i.readTime);const s=lt(t,i.missing),r=Ce(i.readTime);return W.newNoDocument(s,r)}(n,e):O()}(l.It,g);d.set(y.key.toString(),y)});const p=[];return a.forEach(g=>{const y=d.get(g.toString());M(!!y),p.push(y)}),p}),function(r,a){return s.apply(this,arguments)})(t.datastore,e);var s;return i.forEach(s=>t.recordVersion(s)),i})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(i){this.lastWriteError=i}this.writtenDocs.add(e.toString())}delete(e){this.write(new jn(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,v.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var i;e.mutations.forEach(i=>{t.delete(i.key.toString())}),t.forEach((i,s)=>{const r=I.fromPath(s);e.mutations.push(new Sa(r,e.precondition(r)))}),yield(i=(0,v.Z)(function*(s,r){const a=b(s),l=oo(a.It)+"/documents",c={writes:r.map(u=>so(a.It,u))};yield a.ao("Commit",l,c)}),function(s,r){return i.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw O();t=k.min()}const i=this.readVersions.get(e.key.toString());if(i){if(!t.isEqual(i))throw new z(m.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(k.min())?oe.exists(!1):oe.updateTime(t):oe.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(k.min()))throw new z(m.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return oe.updateTime(t)}return oe.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class WC{constructor(e,t,i,s,r){this.asyncQueue=e,this.datastore=t,this.options=i,this.updateFunction=s,this.deferred=r,this.kc=i.maxAttempts,this.xo=new Wa(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,v.Z)(function*(){const t=new KC(e.datastore),i=e.Mc(t);i&&i.then(s=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(s)}).catch(r=>{e.Fc(r)}))}).catch(s=>{e.Fc(s)})}))}Mc(e){try{const t=this.updateFunction(e);return!Zi(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!dd(t)}return!1}}class XC{constructor(e,t,i,s){var r=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=ve.UNAUTHENTICATED,this.clientId=Th.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,function(){var a=(0,v.Z)(function*(l){x("FirestoreClient","Received user=",l.uid),yield r.authCredentialListener(l),r.user=l});return function(l){return a.apply(this,arguments)}}()),this.appCheckCredentials.start(i,a=>(x("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}getConfiguration(){var e=this;return(0,v.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new z(m.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new ge;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,v.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(i){const s=ii(i,"Failed to shutdown persistence");t.reject(s)}})),t.promise}}function Wp(n,e){return Wl.apply(this,arguments)}function Wl(){return Wl=(0,v.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(function(){var s=(0,v.Z)(function*(r){i.isEqual(r)||(yield hp(e.localStore,r),i=r)});return function(r){return s.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),Wl.apply(this,arguments)}function Xp(n,e){return Xl.apply(this,arguments)}function Xl(){return Xl=(0,v.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield ec(n);x("FirestoreClient","Initializing OnlineComponentProvider");const i=yield n.getConfiguration();yield e.initialize(t,i),n.setCredentialChangeListener(s=>Np(e.remoteStore,s)),n.setAppCheckTokenChangeListener((s,r)=>Np(e.remoteStore,r)),n.onlineComponents=e}),Xl.apply(this,arguments)}function ec(n){return tc.apply(this,arguments)}function tc(){return tc=(0,v.Z)(function*(n){return n.offlineComponents||(x("FirestoreClient","Using default OfflineComponentProvider"),yield Wp(n,new Bp)),n.offlineComponents}),tc.apply(this,arguments)}function js(n){return nc.apply(this,arguments)}function nc(){return nc=(0,v.Z)(function*(n){return n.onlineComponents||(x("FirestoreClient","Using default OnlineComponentProvider"),yield Xp(n,new Hl)),n.onlineComponents}),nc.apply(this,arguments)}function ef(n){return ec(n).then(e=>e.persistence)}function Ys(n){return ec(n).then(e=>e.localStore)}function ic(n){return js(n).then(e=>e.remoteStore)}function oc(n){return js(n).then(e=>e.syncEngine)}function ai(n){return sc.apply(this,arguments)}function sc(){return sc=(0,v.Z)(function*(n){const e=yield js(n),t=e.eventManager;return t.onListen=NC.bind(null,e.syncEngine),t.onUnlisten=AC.bind(null,e.syncEngine),t}),sc.apply(this,arguments)}function nf(n,e,t={}){const i=new ge;return n.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(s,r,a,l,c){const u=new Qs({next:d=>{r.enqueueAndForget(()=>Cl(s,h));const p=d.docs.has(a);!p&&d.fromCache?c.reject(new z(m.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&d.fromCache&&l&&"server"===l.source?c.reject(new z(m.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new Tl(Un(a.path),u,{includeMetadataChanges:!0,Nu:!0});return yl(s,h)}(yield ai(n),n.asyncQueue,e,t,i)})),i.promise}function of(n,e,t={}){const i=new ge;return n.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function(s,r,a,l,c){const u=new Qs({next:d=>{r.enqueueAndForget(()=>Cl(s,h)),d.fromCache&&"server"===l.source?c.reject(new z(m.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(d)},error:d=>c.reject(d)}),h=new Tl(a,u,{includeMetadataChanges:!0,Nu:!0});return yl(s,h)}(yield ai(n),n.asyncQueue,e,t,i)})),i.promise}class l0{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Wa(this,"async_queue_retry"),this.Wc=()=>{const t=Gs();t&&x("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Gs();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Gs();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new ge;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,v.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!St(t))throw t;x("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(i=>{throw this.Kc=i,this.Gc=!1,de("INTERNAL UNHANDLED ERROR: ",function(r){let a=r.message||"";return r.stack&&(a=r.stack.includes(r.message)?r.stack:r.message+"\n"+r.stack),a}(i)),i}).then(i=>(this.Gc=!1,i))));return this.Bc=t,t}enqueueAfterDelay(e,t,i){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const s=_l.createAndSchedule(this,e,t,i,r=>this.Yc(r));return this.qc.push(s),s}zc(){this.Kc&&O()}verifyOperationInProgress(){}Xc(){var e=this;return(0,v.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function rc(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const i=e;for(const s of["next","error","complete"])if(s in i&&"function"==typeof i[s])return!0;return!1}(n)}class c0{constructor(){this._progressObserver={},this._taskCompletionResolver=new ge,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,i){this._progressObserver={next:e,error:t,complete:i}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class ee extends yo{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new l0,this._persistenceKey=s?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||sf(this),this._firestoreClient.terminate()}}function pe(n){return n._firestoreClient||sf(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function sf(n){var e;const t=n._freezeSettings(),i=(r=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new Cy(n._databaseId,r,n._persistenceKey,(l=t).host,l.ssl,l.experimentalForceLongPolling,l.experimentalAutoDetectLongPolling,l.useFetchStreams));var r,l;n._firestoreClient=new XC(n._authCredentials,n._appCheckCredentials,n._queue,i)}function rf(n,e,t){const i=new ge;return n.asyncQueue.enqueue((0,v.Z)(function*(){try{yield Wp(n,t),yield Xp(n,e),i.resolve()}catch(s){const r=s;if(!("FirebaseError"===(a=r).name?a.code===m.FAILED_PRECONDITION||a.code===m.UNIMPLEMENTED:!(typeof DOMException<"u"&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw r;tn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r)}var a})).then(()=>i.promise)}function af(n){if(n._initialized||n._terminated)throw new z(m.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ht{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ht(_e.fromBase64String(e))}catch(t){throw new z(m.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ht(_e.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class vt{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new z(m.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ce(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Cn{constructor(e){this._methodName=e}}class Hs{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(m.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(m.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return R(this._lat,e._lat)||R(this._long,e._long)}}const v0=/^__.*__$/;class C0{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return null!==this.fieldMask?new gt(e,this.data,this.fieldMask,t,this.fieldTransforms):new Qn(e,this.data,t,this.fieldTransforms)}}class lf{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new gt(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function cf(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw O()}}class Js{constructor(e,t,i,s,r,a){this.settings=e,this.databaseId=t,this.It=i,this.ignoreUndefinedProperties=s,void 0===r&&this.na(),this.fieldTransforms=r||[],this.fieldMask=a||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new Js(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:i,oa:!1});return s.ua(e),s}ca(e){var t;const i=null===(t=this.path)||void 0===t?void 0:t.child(e),s=this.ia({path:i,oa:!1});return s.na(),s}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return Xs(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(cf(this.sa)&&v0.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class z0{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=i||mo(e)}da(e,t,i,s=!1){return new Js({sa:e,methodName:t,fa:i,path:ce.emptyPath(),oa:!1,la:s},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function zn(n){const e=n._freezeSettings(),t=mo(n._databaseId);return new z0(n._databaseId,!!e.ignoreUndefinedProperties,t)}function Ks(n,e,t,i,s,r={}){const a=n.da(r.merge||r.mergeFields?2:0,e,t,s);uc("Data must be an object, but it was:",a,i);const l=df(i,a);let c,u;if(r.merge)c=new Ke(a.fieldMask),u=a.fieldTransforms;else if(r.mergeFields){const h=[];for(const d of r.mergeFields){const p=hc(e,d,t);if(!a.contains(p))throw new z(m.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);ff(h,p)||h.push(p)}c=new Ke(h),u=a.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,u=a.fieldTransforms;return new C0(new Ne(l),c,u)}class vo extends Cn{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof vo}}function uf(n,e,t){return new Js({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class ac extends Cn{_toFieldTransform(e){return new Ji(e.path,new qn)}isEqual(e){return e instanceof ac}}class x0 extends Cn{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=uf(this,e,!0),i=this._a.map(r=>xn(r,t)),s=new un(i);return new Ji(e.path,s)}isEqual(e){return this===e}}class T0 extends Cn{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=uf(this,e,!0),i=this._a.map(r=>xn(r,t)),s=new hn(i);return new Ji(e.path,s)}isEqual(e){return this===e}}class w0 extends Cn{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new $n(e.It,td(e.It,this.wa));return new Ji(e.path,t)}isEqual(e){return this===e}}function lc(n,e,t,i){const s=n.da(1,e,t);uc("Data must be an object, but it was:",s,i);const r=[],a=Ne.empty();sn(i,(c,u)=>{const h=Ws(e,c,t);u=(0,J.m9)(u);const d=s.ca(h);if(u instanceof vo)r.push(h);else{const p=xn(u,d);null!=p&&(r.push(h),a.set(h,p))}});const l=new Ke(r);return new lf(a,l,s.fieldTransforms)}function cc(n,e,t,i,s,r){const a=n.da(1,e,t),l=[hc(e,i,t)],c=[s];if(r.length%2!=0)throw new z(m.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<r.length;p+=2)l.push(hc(e,r[p])),c.push(r[p+1]);const u=[],h=Ne.empty();for(let p=l.length-1;p>=0;--p)if(!ff(u,l[p])){const g=l[p];let y=c[p];y=(0,J.m9)(y);const w=a.ca(g);if(y instanceof vo)u.push(g);else{const N=xn(y,w);null!=N&&(u.push(g),h.set(g,N))}}const d=new Ke(u);return new lf(h,d,a.fieldTransforms)}function hf(n,e,t,i=!1){return xn(t,n.da(i?4:3,e))}function xn(n,e){if(pf(n=(0,J.m9)(n)))return uc("Unsupported field value:",e,n),df(n,e);if(n instanceof Cn)return function(t,i){if(!cf(i.sa))throw i.ha(`${t._methodName}() can only be used with update() and set()`);if(!i.path)throw i.ha(`${t._methodName}() is not currently supported inside arrays`);const s=t._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,i){const s=[];let r=0;for(const a of t){let l=xn(a,i.aa(r));null==l&&(l={nullValue:"NULL_VALUE"}),s.push(l),r++}return{arrayValue:{values:s}}}(n,e)}return function(t,i){if(null===(t=(0,J.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return td(i.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const s=ie.fromDate(t);return{timestampValue:no(i.It,s)}}if(t instanceof ie){const s=new ie(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:no(i.It,s)}}if(t instanceof Hs)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ht)return{bytesValue:xd(i.It,t._byteString)};if(t instanceof X){const s=i.databaseId,r=t.firestore._databaseId;if(!r.isEqual(s))throw i.ha(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Na(t.firestore._databaseId||i.databaseId,t._key.path)}}throw i.ha(`Unsupported field value: ${qs(t)}`)}(n,e)}function df(n,e){const t={};return Dh(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):sn(n,(i,s)=>{const r=xn(s,e.ra(i));null!=r&&(t[i]=r)}),{mapValue:{fields:t}}}function pf(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ie||n instanceof Hs||n instanceof ht||n instanceof X||n instanceof Cn)}function uc(n,e,t){if(!pf(t)||"object"!=typeof(i=t)||null===i||Object.getPrototypeOf(i)!==Object.prototype&&null!==Object.getPrototypeOf(i)){const i=qs(t);throw e.ha("an object"===i?n+" a custom object":n+" "+i)}var i}function hc(n,e,t){if((e=(0,J.m9)(e))instanceof vt)return e._internalPath;if("string"==typeof e)return Ws(n,e);throw Xs("Field path arguments must be of type string or ",n,!1,void 0,t)}const I0=new RegExp("[~\\*/\\[\\]]");function Ws(n,e,t){if(e.search(I0)>=0)throw Xs(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new vt(...e.split("."))._internalPath}catch{throw Xs(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Xs(n,e,t,i,s){const r=i&&!i.isEmpty(),a=void 0!==s;let l=`Function ${e}() called with invalid data`;t&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(r||a)&&(c+=" (found",r&&(c+=` in field ${i}`),a&&(c+=` in document ${s}`),c+=")"),new z(m.INVALID_ARGUMENT,l+n+c)}function ff(n,e){return n.some(t=>t.isEqual(e))}class Co{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new X(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new b0(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(er("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class b0 extends Co{data(){return super.data()}}function er(n,e){return"string"==typeof e?Ws(n,e):e instanceof vt?e._internalPath:e._delegate._internalPath}function mf(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new z(m.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zo{}function Lt(n,...e){for(const t of e)n=t._apply(n);return n}class S0 extends zo{constructor(e,t,i){super(),this.ma=e,this.ga=t,this.ya=i,this.type="where"}_apply(e){const t=zn(e.firestore),i=function(s,r,a,l,c,u,h){let d;if(c.isKeyField()){if("array-contains"===u||"array-contains-any"===u)throw new z(m.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if("in"===u||"not-in"===u){zf(h,u);const g=[];for(const y of h)g.push(Cf(l,s,y));d={arrayValue:{values:g}}}else d=Cf(l,s,h)}else"in"!==u&&"not-in"!==u&&"array-contains-any"!==u||zf(h,u),d=hf(a,"where",h,"in"===u||"not-in"===u);const p=Ae.create(c,u,d);return function(g,y){if(y.dt()){const N=Ta(g);if(null!==N&&!N.isEqual(y.field))throw new z(m.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${N.toString()}' and '${y.field.toString()}'`);const G=xa(g);null!==G&&xf(0,y.field,G)}const w=function(N,G){for(const Y of N.filters)if(G.indexOf(Y.op)>=0)return Y.op;return null}(g,function(N){switch(N){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(y.op));if(null!==w)throw new z(m.INVALID_ARGUMENT,w===y.op?`Invalid query. You cannot use more than one '${y.op.toString()}' filter.`:`Invalid query. You cannot use '${y.op.toString()}' filters with '${w.toString()}' filters.`)}(s,p),p}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new ke(e.firestore,e.converter,function(s,r){const a=s.filters.concat([r]);return new mt(s.path,s.collectionGroup,s.explicitOrderBy.slice(),a,s.limit,s.limitType,s.startAt,s.endAt)}(e._query,i))}}class A0 extends zo{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(i,s,r){if(null!==i.startAt)throw new z(m.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==i.endAt)throw new z(m.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const a=new Gn(s,r);return function(l,c){if(null===xa(l)){const u=Ta(l);null!==u&&xf(0,u,c.field)}}(i,a),a}(e._query,this.ma,this.pa);return new ke(e.firestore,e.converter,function(i,s){const r=i.explicitOrderBy.concat([s]);return new mt(i.path,i.collectionGroup,r,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,t))}}class gf extends zo{constructor(e,t,i){super(),this.type=e,this.Ia=t,this.Ta=i}_apply(e){return new ke(e.firestore,e.converter,xs(e._query,this.Ia,this.Ta))}}class _f extends zo{constructor(e,t,i){super(),this.type=e,this.Ea=t,this.Aa=i}_apply(e){const t=vf(e,this.type,this.Ea,this.Aa);return new ke(e.firestore,e.converter,(s=t,new mt((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)));var i,s}}class yf extends zo{constructor(e,t,i){super(),this.type=e,this.Ea=t,this.Aa=i}_apply(e){const t=vf(e,this.type,this.Ea,this.Aa);return new ke(e.firestore,e.converter,(s=t,new mt((i=e._query).path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,s)));var i,s}}function vf(n,e,t,i){if(t[0]=(0,J.m9)(t[0]),t[0]instanceof Co)return function(s,r,a,l,c){if(!l)throw new z(m.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const u=[];for(const h of Zn(s))if(h.field.isKeyField())u.push(ln(r,l.key));else{const d=l.data.field(h.field);if(va(d))throw new z(m.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+h.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===d){const p=h.field.canonicalString();throw new z(m.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${p}' (used as the orderBy) does not exist.`)}u.push(d)}return new Et(u,c)}(n._query,n.firestore._databaseId,e,t[0]._document,i);{const s=zn(n.firestore);return function(r,a,l,c,u,h){const d=r.explicitOrderBy;if(u.length>d.length)throw new z(m.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const p=[];for(let g=0;g<u.length;g++){const y=u[g];if(d[g].field.isKeyField()){if("string"!=typeof y)throw new z(m.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof y}`);if(!wa(r)&&-1!==y.indexOf("/"))throw new z(m.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${y}' contains a slash.`);const w=r.path.child(q.fromString(y));if(!I.isDocumentKey(w))throw new z(m.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${w}' is not because it contains an odd number of segments.`);const N=new I(w);p.push(ln(a,N))}else{const w=hf(l,c,y);p.push(w)}}return new Et(p,h)}(n._query,n.firestore._databaseId,s,e,t,i)}}function Cf(n,e,t){if("string"==typeof(t=(0,J.m9)(t))){if(""===t)throw new z(m.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wa(e)&&-1!==t.indexOf("/"))throw new z(m.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(q.fromString(t));if(!I.isDocumentKey(i))throw new z(m.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return ln(n,new I(i))}if(t instanceof X)return ln(n,t._key);throw new z(m.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${qs(t)}.`)}function zf(n,e){if(!Array.isArray(n)||0===n.length)throw new z(m.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new z(m.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function xf(n,e,t){if(!t.isEqual(e))throw new z(m.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class dc{convertValue(e,t="none"){switch(an(e)){case 0:return null;case 1:return e.booleanValue;case 2:return he(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(rn(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw O()}}convertObject(e,t){const i={};return sn(e.fields,(s,r)=>{i[s]=this.convertValue(r,t)}),i}convertGeoPoint(e){return new Hs(he(e.latitude),he(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Mh(e);return null==i?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ui(e));default:return null}}convertTimestamp(e){const t=Nt(e);return new ie(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=q.fromString(e);M(Dd(i));const s=new At(i.get(1),i.get(3)),r=new I(i.popFirst(5));return s.isEqual(t)||de(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}function tr(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class R0 extends dc{constructor(e){super(),this.firestore=e}convertBytes(e){return new ht(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new X(this.firestore,null,t)}}class Tn{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ct extends Co{constructor(e,t,i,s,r,a){super(e,t,i,s,a),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xo(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(er("DocumentSnapshot.get",e));if(null!==i)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class xo extends Ct{data(e={}){return super.data(e)}}class Pt{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Tn(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new xo(this._firestore,this._userDataWriter,i.key,i,new Tn(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(m.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let r=0;return i._snapshot.docChanges.map(a=>({type:"added",doc:new xo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Tn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter),oldIndex:-1,newIndex:r++}))}{let r=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||3!==a.type).map(a=>{const l=new xo(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Tn(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,u=-1;return 0!==a.type&&(c=r.indexOf(a.doc.key),r=r.delete(a.doc.key)),1!==a.type&&(r=r.add(a.doc),u=r.indexOf(a.doc.key)),{type:L0(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function L0(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return O()}}function Tf(n,e){return n instanceof Ct&&e instanceof Ct?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Pt&&e instanceof Pt&&n._firestore===e._firestore&&Kl(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Bt extends dc{constructor(e){super(),this.firestore=e}convertBytes(e){return new ht(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new X(this.firestore,null,t)}}function wf(n,e,t){n=P(n,X);const i=P(n.firestore,ee),s=tr(n.converter,e,t);return li(i,[Ks(zn(i),"setDoc",n._key,s,null!==n.converter,t).toMutation(n._key,oe.none())])}function If(n,e,t,...i){n=P(n,X);const s=P(n.firestore,ee),r=zn(s);let a;return a="string"==typeof(e=(0,J.m9)(e))||e instanceof vt?cc(r,"updateDoc",n._key,e,t,i):lc(r,"updateDoc",n._key,e),li(s,[a.toMutation(n._key,oe.exists(!0))])}function bf(n,...e){var t,i,s;n=(0,J.m9)(n);let r={includeMetadataChanges:!1},a=0;"object"!=typeof e[a]||rc(e[a])||(r=e[a],a++);const l={includeMetadataChanges:r.includeMetadataChanges};if(rc(e[a])){const d=e[a];e[a]=null===(t=d.next)||void 0===t?void 0:t.bind(d),e[a+1]=null===(i=d.error)||void 0===i?void 0:i.bind(d),e[a+2]=null===(s=d.complete)||void 0===s?void 0:s.bind(d)}let c,u,h;if(n instanceof X)u=P(n.firestore,ee),h=Un(n._key.path),c={next:d=>{e[a]&&e[a](pc(u,n,d))},error:e[a+1],complete:e[a+2]};else{const d=P(n,ke);u=P(d.firestore,ee),h=d._query;const p=new Bt(u);c={next:g=>{e[a]&&e[a](new Pt(u,p,d,g))},error:e[a+1],complete:e[a+2]},mf(n._query)}return function(d,p,g,y){const w=new Qs(y),N=new Tl(p,w,g);return d.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return yl(yield ai(d),N)})),()=>{w.bc(),d.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return Cl(yield ai(d),N)}))}}(pe(u),h,l,c)}function li(n,e){return function(t,i){const s=new ge;return t.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function OC(n,e,t){return Nl.apply(this,arguments)}(yield oc(t),i,s)})),s.promise}(pe(n),e)}function pc(n,e,t){const i=t.docs.get(e._key),s=new Bt(n);return new Ct(n,s,e._key,i,new Tn(t.hasPendingWrites,t.fromCache),e.converter)}const Y0={maxAttempts:5};class Sf{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=zn(e)}set(e,t,i){this._verifyNotCommitted();const s=Gt(e,this._firestore),r=tr(s.converter,t,i),a=Ks(this._dataReader,"WriteBatch.set",s._key,r,null!==s.converter,i);return this._mutations.push(a.toMutation(s._key,oe.none())),this}update(e,t,i,...s){this._verifyNotCommitted();const r=Gt(e,this._firestore);let a;return a="string"==typeof(t=(0,J.m9)(t))||t instanceof vt?cc(this._dataReader,"WriteBatch.update",r._key,t,i,s):lc(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(a.toMutation(r._key,oe.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Gt(e,this._firestore);return this._mutations=this._mutations.concat(new jn(t._key,oe.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new z(m.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gt(n,e){if((n=(0,J.m9)(n)).firestore!==e)throw new z(m.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class H0 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=zn(e)}get(e){const t=Gt(e,this._firestore),i=new R0(this._firestore);return this._transaction.lookup([t._key]).then(s=>{if(!s||1!==s.length)return O();const r=s[0];if(r.isFoundDocument())return new Co(this._firestore,i,r.key,r,t.converter);if(r.isNoDocument())return new Co(this._firestore,i,t._key,null,t.converter);throw O()})}set(e,t,i){const s=Gt(e,this._firestore),r=tr(s.converter,t,i),a=Ks(this._dataReader,"Transaction.set",s._key,r,null!==s.converter,i);return this._transaction.set(s._key,a),this}update(e,t,i,...s){const r=Gt(e,this._firestore);let a;return a="string"==typeof(t=(0,J.m9)(t))||t instanceof vt?cc(this._dataReader,"Transaction.update",r._key,t,i,s):lc(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,a),this}delete(e){const t=Gt(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Gt(e,this._firestore),i=new Bt(this._firestore);return super.get(e).then(s=>new Ct(this._firestore,i,t._key,s._document,new Tn(!1,!1),t.converter))}}function fc(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new z("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Af(){if(typeof Uint8Array>"u")throw new z("unimplemented","Uint8Arrays are not available in this environment.")}function Of(){if(!function yy(){return typeof atob<"u"}())throw new z("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Rn=Bo.SDK_VERSION,(0,Bo._registerComponent)(new ou.wA("firestore",(t,{instanceIdentifier:i,options:s})=>{const r=t.getProvider("app").getImmediate(),a=new ee(new ry(t.getProvider("auth-internal")),new cy(t.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new z(m.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new At(l.options.projectId,c)}(r,i),r);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),(0,Bo.registerVersion)(Ch,"3.7.2",n),(0,Bo.registerVersion)(Ch,"3.7.2","esm2017")}();class To{constructor(e){this._delegate=e}static fromBase64String(e){return Of(),new To(ht.fromBase64String(e))}static fromUint8Array(e){return Af(),new To(ht.fromUint8Array(e))}toBase64(){return Of(),this._delegate.toBase64()}toUint8Array(){return Af(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function mc(n){return function oz(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const i of e)if(i in t&&"function"==typeof t[i])return!0;return!1}(n,["next","error","complete"])}class sz{enableIndexedDbPersistence(e,t){return function h0(n,e){af(n=P(n,ee));const t=pe(n),i=n._freezeSettings(),s=new Hl;return rf(t,s,new Gp(s,i.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function d0(n){af(n=P(n,ee));const e=pe(n),t=n._freezeSettings(),i=new Hl;return rf(e,i,new QC(i,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function p0(n){if(n._initialized&&!n._terminated)throw new z(m.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ge;return n._queue.enqueueAndForgetEvenWhileRestricted((0,v.Z)(function*(){try{yield(t=(0,v.Z)(function*(i){if(!tt.C())return Promise.resolve();const s=i+"main";yield tt.delete(s)}),function(i){return t.apply(this,arguments)})(Ua(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Df{constructor(e,t,i){this._delegate=t,this._persistenceProvider=i,this.INTERNAL={delete:()=>this.terminate()},e instanceof At||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&tn("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,i={}){!function Yp(n,e,t,i={}){var s;const r=(n=P(n,yo))._getSettings();if("firestore.googleapis.com"!==r.host&&r.host!==e&&tn("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},r),{host:`${e}:${t}`,ssl:!1})),i.mockUserToken){let a,l;if("string"==typeof i.mockUserToken)a=i.mockUserToken,l=ve.MOCK_USER;else{a=(0,J.Sg)(i.mockUserToken,null===(s=n._app)||void 0===s?void 0:s.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new z(m.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new ve(c)}n._authCredentials=new sy(new zh(a,l))}}(this._delegate,e,t,i)}enableNetwork(){return function m0(n){return function e0(n){return n.asyncQueue.enqueue((0,v.Z)(function*(){const e=yield ef(n),t=yield ic(n);return e.setNetworkEnabled(!0),function(i){const s=b(i);return s._u.delete(0),go(s)}(t)}))}(pe(n=P(n,ee)))}(this._delegate)}disableNetwork(){return function g0(n){return function t0(n){return n.asyncQueue.enqueue((0,v.Z)(function*(){const e=yield ef(n),t=yield ic(n);return e.setNetworkEnabled(!1),(i=(0,v.Z)(function*(s){const r=b(s);r._u.add(0),yield ei(r),r.gu.set("Offline")}),function(s){return i.apply(this,arguments)})(t);var i}))}(pe(n=P(n,ee)))}(this._delegate)}enablePersistence(e){let t=!1,i=!1;return e&&(t=!!e.synchronizeTabs,i=!!e.experimentalForceOwningTab,Up("synchronizeTabs",t,"experimentalForceOwningTab",i)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,i)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function f0(n){return function(e){const t=new ge;return e.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return function kC(n,e){return Ml.apply(this,arguments)}(yield oc(e),t)})),t.promise}(pe(n=P(n,ee)))}(this._delegate)}onSnapshotsInSync(e){return function j0(n,e){return function s0(n,e){const t=new Qs(e);return n.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return i=yield ai(n),s=t,b(i).Ru.add(s),void s.next();var i,s})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return i=yield ai(n),s=t,void b(i).Ru.delete(s);var i,s}))}}(pe(n=P(n,ee)),rc(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new z("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new ci(this,Hp(this._delegate,e))}catch(t){throw Ue(t,"collection()","Firestore.collection()")}}doc(e){try{return new et(this,$s(this._delegate,e))}catch(t){throw Ue(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ze(this,function jC(n,e){if(n=P(n,yo),Jl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new z(m.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ke(n,null,(t=e,new mt(q.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ue(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function J0(n,e,t){n=P(n,ee);const i=Object.assign(Object.assign({},Y0),t);return function(s){if(s.maxAttempts<1)throw new z(m.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(s,r,a){const l=new ge;return s.asyncQueue.enqueueAndForget((0,v.Z)(function*(){const c=yield function tf(n){return js(n).then(e=>e.datastore)}(s);new WC(s.asyncQueue,c,a,r,l).run()})),l.promise}(pe(n),s=>e(new H0(n,s)),i)}(this._delegate,t=>e(new Ef(this,t)))}batch(){return pe(this._delegate),new Mf(new Sf(this._delegate,e=>li(this._delegate,e)))}loadBundle(e){return function _0(n,e){const t=pe(n=P(n,ee)),i=new c0;return function r0(n,e,t,i){const s=function(r,a){let l;return l="string"==typeof r?(new TextEncoder).encode(r):r,c=function(c,u){if(c instanceof Uint8Array)return Kp(c,u);if(c instanceof ArrayBuffer)return Kp(new Uint8Array(c),u);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(l),new YC(c,a);var c}(t,mo(e));n.asyncQueue.enqueueAndForget((0,v.Z)(function*(){!function $C(n,e,t){const i=b(n);var s;(s=(0,v.Z)(function*(r,a,l){try{const c=yield a.getMetadata();if(yield function(p,g){const y=b(p),w=Ce(g.createTime);return y.persistence.runTransaction("hasNewerBundle","readonly",N=>y.Ns.getBundleMetadata(N,g.id)).then(N=>!!N&&N.createTime.compareTo(w)>=0)}(r.localStore,c))return yield a.close(),l._completeWith({taskState:"Success",documentsLoaded:(p=c).totalDocuments,bytesLoaded:p.totalBytes,totalDocuments:p.totalDocuments,totalBytes:p.totalBytes}),Promise.resolve(new Set);l._updateProgress(Dp(c));const u=new wC(c,r.localStore,a.It);let h=yield a.mc();for(;h;){const p=yield u.Fu(h);p&&l._updateProgress(p),h=yield a.mc()}const d=yield u.complete();return yield yt(r,d.Lu,void 0),yield function(p,g){const y=b(p);return y.persistence.runTransaction("Save bundle","readwrite",w=>y.Ns.saveBundleMetadata(w,g))}(r.localStore,c),l._completeWith(d.progress),Promise.resolve(d.Bu)}catch(c){return tn("SyncEngine",`Loading bundle failed with ${c}`),l._failWith(c),Promise.resolve(new Set)}var p}),function(r,a,l){return s.apply(this,arguments)})(i,e,t).then(s=>{i.sharedClientState.notifyBundleLoaded(s)})}(yield oc(n),s,i)}))}(t,n._databaseId,e,i),i}(this._delegate,e)}namedQuery(e){return function y0(n,e){return function a0(n,e){return n.asyncQueue.enqueue((0,v.Z)(function*(){return function(t,i){const s=b(t);return s.persistence.runTransaction("Get named query","readonly",r=>s.Ns.getNamedQuery(r,i))}(yield Ys(n),e)}))}(pe(n=P(n,ee)),e).then(t=>t?new ke(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ze(this,t):null)}}class nr extends dc{constructor(e){super(),this.firestore=e}convertBytes(e){return new To(new ht(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return et.forKey(t,this.firestore,null)}}class Ef{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new nr(e)}get(e){const t=In(e);return this._delegate.get(t).then(i=>new wo(this._firestore,new Ct(this._firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,t.converter)))}set(e,t,i){const s=In(e);return i?(fc("Transaction.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const r=In(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,i,...s),this}delete(e){const t=In(e);return this._delegate.delete(t),this}}class Mf{constructor(e){this._delegate=e}set(e,t,i){const s=In(e);return i?(fc("WriteBatch.set",i),this._delegate.set(s,t,i)):this._delegate.set(s,t),this}update(e,t,i,...s){const r=In(e);return 2===arguments.length?this._delegate.update(r,t):this._delegate.update(r,t,i,...s),this}delete(e){const t=In(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class wn{constructor(e,t,i){this._firestore=e,this._userDataWriter=t,this._delegate=i}fromFirestore(e,t){const i=new xo(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Io(this._firestore,i),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const i=wn.INSTANCES;let s=i.get(e);s||(s=new WeakMap,i.set(e,s));let r=s.get(t);return r||(r=new wn(e,new nr(e),t),s.set(t,r)),r}}wn.INSTANCES=new WeakMap;class et{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nr(e)}static forPath(e,t,i){if(e.length%2!=0)throw new z("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new et(t,new X(t._delegate,i,new I(e)))}static forKey(e,t,i){return new et(t,new X(t._delegate,i,e))}get id(){return this._delegate.id}get parent(){return new ci(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new ci(this.firestore,Hp(this._delegate,e))}catch(t){throw Ue(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,J.m9)(e))instanceof X&&Jp(this._delegate,e)}set(e,t){t=fc("DocumentReference.set",t);try{return t?wf(this._delegate,e,t):wf(this._delegate,e)}catch(i){throw Ue(i,"setDoc()","DocumentReference.set()")}}update(e,t,...i){try{return 1===arguments.length?If(this._delegate,e):If(this._delegate,e,t,...i)}catch(s){throw Ue(s,"updateDoc()","DocumentReference.update()")}}delete(){return function $0(n){return li(P(n.firestore,ee),[new jn(n._key,oe.none())])}(this._delegate)}onSnapshot(...e){const t=kf(e),i=Ff(e,s=>new wo(this.firestore,new Ct(this.firestore._delegate,this._userDataWriter,s._key,s._document,s.metadata,this._delegate.converter)));return bf(this._delegate,t,i)}get(e){let t;return t="cache"===e?.source?function B0(n){n=P(n,X);const e=P(n.firestore,ee),t=pe(e),i=new Bt(e);return function n0(n,e){const t=new ge;return n.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return(i=(0,v.Z)(function*(s,r,a){try{const l=yield function(c,u){const h=b(c);return h.persistence.runTransaction("read document","readonly",d=>h.localDocuments.getDocument(d,u))}(s,r);l.isFoundDocument()?a.resolve(l):l.isNoDocument()?a.resolve(null):a.reject(new z(m.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(l){const c=ii(l,`Failed to get document '${r} from cache`);a.reject(c)}}),function(s,r,a){return i.apply(this,arguments)})(yield Ys(n),e,t);var i})),t.promise}(t,n._key).then(s=>new Ct(e,i,n._key,s,new Tn(null!==s&&s.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function G0(n){n=P(n,X);const e=P(n.firestore,ee);return nf(pe(e),n._key,{source:"server"}).then(t=>pc(e,n,t))}(this._delegate):function P0(n){n=P(n,X);const e=P(n.firestore,ee);return nf(pe(e),n._key).then(t=>pc(e,n,t))}(this._delegate),t.then(i=>new wo(this.firestore,new Ct(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)))}withConverter(e){return new et(this.firestore,this._delegate.withConverter(e?wn.getInstance(this.firestore,e):null))}}function Ue(n,e,t){return n.message=n.message.replace(e,t),n}function kf(n){for(const e of n)if("object"==typeof e&&!mc(e))return e;return{}}function Ff(n,e){var t,i;let s;return s=mc(n[0])?n[0]:mc(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:r=>{s.next&&s.next(e(r))},error:null===(t=s.error)||void 0===t?void 0:t.bind(s),complete:null===(i=s.complete)||void 0===i?void 0:i.bind(s)}}class wo{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new et(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Tf(this._delegate,e._delegate)}}class Io extends wo{data(e){const t=this._delegate.data(e);return function iy(n,e){n||O()}(void 0!==t),t}}class Ze{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new nr(e)}where(e,t,i){try{return new Ze(this.firestore,Lt(this._delegate,function N0(n,e,t){const i=e,s=er("where",n);return new S0(s,i,t)}(e,t,i)))}catch(s){throw Ue(s,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ze(this.firestore,Lt(this._delegate,function O0(n,e="asc"){const t=e,i=er("orderBy",n);return new A0(i,t)}(e,t)))}catch(i){throw Ue(i,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ze(this.firestore,Lt(this._delegate,function D0(n){return $p("limit",n),new gf("limit",n,"F")}(e)))}catch(t){throw Ue(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ze(this.firestore,Lt(this._delegate,function E0(n){return $p("limitToLast",n),new gf("limitToLast",n,"L")}(e)))}catch(t){throw Ue(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ze(this.firestore,Lt(this._delegate,function M0(...n){return new _f("startAt",n,!0)}(...e)))}catch(t){throw Ue(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ze(this.firestore,Lt(this._delegate,function k0(...n){return new _f("startAfter",n,!1)}(...e)))}catch(t){throw Ue(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ze(this.firestore,Lt(this._delegate,function F0(...n){return new yf("endBefore",n,!1)}(...e)))}catch(t){throw Ue(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ze(this.firestore,Lt(this._delegate,function V0(...n){return new yf("endAt",n,!0)}(...e)))}catch(t){throw Ue(t,"endAt()","Query.endAt()")}}isEqual(e){return Kl(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Z0(n){n=P(n,ke);const e=P(n.firestore,ee),t=pe(e),i=new Bt(e);return function o0(n,e){const t=new ge;return n.asyncQueue.enqueueAndForget((0,v.Z)(function*(){return(i=(0,v.Z)(function*(s,r,a){try{const l=yield Ls(s,r,!0),c=new kp(r,l.Hi),u=c.Wu(l.documents),h=c.applyChanges(u,!1);a.resolve(h.snapshot)}catch(l){const c=ii(l,`Failed to execute query '${r} against cache`);a.reject(c)}}),function(s,r,a){return i.apply(this,arguments)})(yield Ys(n),e,t);var i})),t.promise}(t,n._query).then(s=>new Pt(e,i,n,s))}(this._delegate):"server"===e?.source?function q0(n){n=P(n,ke);const e=P(n.firestore,ee),t=pe(e),i=new Bt(e);return of(t,n._query,{source:"server"}).then(s=>new Pt(e,i,n,s))}(this._delegate):function U0(n){n=P(n,ke);const e=P(n.firestore,ee),t=pe(e),i=new Bt(e);return mf(n._query),of(t,n._query).then(s=>new Pt(e,i,n,s))}(this._delegate),t.then(i=>new gc(this.firestore,new Pt(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)))}onSnapshot(...e){const t=kf(e),i=Ff(e,s=>new gc(this.firestore,new Pt(this.firestore._delegate,this._userDataWriter,this._delegate,s._snapshot)));return bf(this._delegate,t,i)}withConverter(e){return new Ze(this.firestore,this._delegate.withConverter(e?wn.getInstance(this.firestore,e):null))}}class az{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Io(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class gc{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ze(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Io(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new az(this._firestore,t))}forEach(e,t){this._delegate.forEach(i=>{e.call(t,new Io(this._firestore,i))})}isEqual(e){return Tf(this._delegate,e._delegate)}}class ci extends Ze{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new et(this.firestore,e):null}doc(e){try{return new et(this.firestore,void 0===e?$s(this._delegate):$s(this._delegate,e))}catch(t){throw Ue(t,"doc()","CollectionReference.doc()")}}add(e){return function Q0(n,e){const t=P(n.firestore,ee),i=$s(n),s=tr(n.converter,e);return li(t,[Ks(zn(n.firestore),"addDoc",i._key,s,null!==n.converter,{}).toMutation(i._key,oe.exists(!1))]).then(()=>i)}(this._delegate,e).then(t=>new et(this.firestore,t))}isEqual(e){return Jp(this._delegate,e._delegate)}withConverter(e){return new ci(this.firestore,this._delegate.withConverter(e?wn.getInstance(this.firestore,e):null))}}function In(n){return P(n,X)}class _c{constructor(...e){this._delegate=new vt(...e)}static documentId(){return new _c(ce.keyField().canonicalString())}isEqual(e){return(e=(0,J.m9)(e))instanceof vt&&this._delegate._internalPath.isEqual(e._internalPath)}}class bn{constructor(e){this._delegate=e}static serverTimestamp(){const e=function W0(){return new ac("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new bn(e)}static delete(){const e=function K0(){return new vo("deleteField")}();return e._methodName="FieldValue.delete",new bn(e)}static arrayUnion(...e){const t=function X0(...n){return new x0("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new bn(t)}static arrayRemove(...e){const t=function ez(...n){return new T0("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new bn(t)}static increment(e){const t=function tz(n){return new w0("increment",n)}(e);return t._methodName="FieldValue.increment",new bn(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const lz={Firestore:Df,GeoPoint:Hs,Timestamp:ie,Blob:To,Transaction:Ef,WriteBatch:Mf,DocumentReference:et,DocumentSnapshot:wo,Query:Ze,QueryDocumentSnapshot:Io,QuerySnapshot:gc,CollectionReference:ci,FieldPath:_c,FieldValue:bn,setLogLevel:function rz(n){!function ny(n){It.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function uz(n){(function cz(n,e){n.INTERNAL.registerComponent(new ou.wA("firestore-compat",t=>{const i=t.getProvider("app-compat").getImmediate(),s=t.getProvider("firestore").getImmediate();return e(i,s)},"PUBLIC").setServiceProps(Object.assign({},lz)))})(n,(e,t)=>new Df(e,t,new sz)),n.registerVersion("@firebase/firestore-compat","0.2.2")}(Xg.Z);var Ut=S(3385),hz=S(440);function Vf(n,e){return function dz(n,e=Wg.z){return new wr.y(t=>{let i;return null!=e?e.schedule(()=>{i=n.onSnapshot({includeMetadataChanges:!0},t)}):i=n.onSnapshot({includeMetadataChanges:!0},t),()=>{i?.()}})}(n,e)}function yc(n,e){return Vf(n,e).pipe((0,De.U)(t=>({payload:t,type:"query"})))}function ir(n,e){return yc(n,e).pipe((0,ot.O)(void 0),(0,Ir.G)(),(0,De.U)(([t,i])=>{const s=i.payload.docChanges(),r=s.map(a=>({type:a.type,payload:a}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(i.payload.metadata)&&i.payload.docs.forEach((a,l)=>{const c=s.find(h=>h.doc.ref.isEqual(a.ref)),u=t?.payload.docs.find(h=>h.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&u&&JSON.stringify(u.metadata)===JSON.stringify(a.metadata)||r.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),r}))}function Rf(n,e,t){return ir(n,t).pipe((0,br.R)((i,s)=>function fz(n,e,t){return e.forEach(i=>{t.indexOf(i.type)>-1&&(n=function mz(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return vc(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return vc(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return vc(n,e.oldIndex,1)}return n}(n,i))}),n}(i,s.map(r=>r.payload),e),[]),(0,En.x)(),(0,De.U)(i=>i.map(s=>({type:s.type,payload:s}))))}function vc(n,e,t,...i){const s=n.slice();return s.splice(e,t,...i),s}function Lf(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}S(127);class Pf{constructor(e,t,i){this.ref=e,this.query=t,this.afs=i}stateChanges(e){let t=ir(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,De.U)(i=>i.filter(s=>e.indexOf(s.type)>-1)))),t.pipe((0,ot.O)(void 0),(0,Ir.G)(),(0,xt.h)(([i,s])=>s.length>0||!i),(0,De.U)(([i,s])=>s),Xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,br.R)((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=Lf(e);return Rf(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xe.iC)}valueChanges(e={}){return yc(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.U)(t=>t.payload.docs.map(i=>e.idField?Object.assign(Object.assign({},i.data()),{[e.idField]:i.id}):i.data())),Xe.iC)}get(e){return(0,vi.D)(this.query.get(e)).pipe(Xe.iC)}add(e){return this.ref.add(e)}doc(e){return new Bf(this.ref.doc(e),this.afs)}}class Bf{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const i=this.ref.collection(e),{ref:s,query:r}=Gf(i,t);return new Pf(s,r,this.afs)}snapshotChanges(){return function pz(n,e){return Vf(n,e).pipe((0,ot.O)(void 0),(0,Ir.G)(),(0,De.U)(([t,i])=>i.exists?t?.exists?{payload:i,type:"modified"}:{payload:i,type:"added"}:{payload:i,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Xe.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,De.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,vi.D)(this.ref.get(e)).pipe(Xe.iC)}}class gz{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ir(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.U)(t=>t.filter(i=>e.indexOf(i.type)>-1)),(0,xt.h)(t=>t.length>0),Xe.iC):ir(this.query,this.afs.schedulers.outsideAngular).pipe(Xe.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,br.R)((t,i)=>[...t,...i],[]))}snapshotChanges(e){const t=Lf(e);return Rf(this.query,t,this.afs.schedulers.outsideAngular).pipe(Xe.iC)}valueChanges(e={}){return yc(this.query,this.afs.schedulers.outsideAngular).pipe((0,De.U)(i=>i.payload.docs.map(s=>e.idField?Object.assign({[e.idField]:s.id},s.data()):s.data())),Xe.iC)}get(e){return(0,vi.D)(this.query.get(e)).pipe(Xe.iC)}}const _z=new o.OlP("angularfire2.enableFirestorePersistence"),yz=new o.OlP("angularfire2.firestore.persistenceSettings"),vz=new o.OlP("angularfire2.firestore.settings"),Cz=new o.OlP("angularfire2.firestore.use-emulator");function Gf(n,e=(t=>t)){return{query:e(n),ref:n}}let Cc=(()=>{class n{constructor(t,i,s,r,a,l,c,u,h,d,p,g,y,w,N,G,Y){this.schedulers=c;const B=(0,Po.on)(t,l,i),re=h;d&&(0,Ut.nw)(B,l,p,y,w,N,g,G),[this.firestore,this.persistenceEnabled$]=(0,Po.cc)(`${B.name}.firestore`,"AngularFirestore",B.name,()=>{const U=l.runOutsideAngular(()=>B.firestore());if(r&&U.settings(r),re&&U.useEmulator(...re),s&&!(0,C.PM)(a)){const Q=()=>{try{return(0,vi.D)(U.enablePersistence(u||void 0).then(()=>!0,()=>!1))}catch(fe){return typeof console<"u"&&console.warn(fe),(0,Ci.of)(!1)}};return[U,l.runOutsideAngular(Q)]}return[U,(0,Ci.of)(!1)]},[r,re,s])}collection(t,i){let s;s="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:a}=Gf(s,i),l=this.schedulers.ngZone.run(()=>r);return new Pf(l,a,this)}collectionGroup(t,i){const s=i||(a=>a),r=this.firestore.collectionGroup(t);return new gz(s(r),this)}doc(t){let i;i="string"==typeof t?this.firestore.doc(t):t;const s=this.schedulers.ngZone.run(()=>i);return new Bf(s,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Po.Dh),o.LFG(Po.xv,8),o.LFG(_z,8),o.LFG(vz,8),o.LFG(o.Lbi),o.LFG(o.R0b),o.LFG(Xe.HU),o.LFG(yz,8),o.LFG(Cz,8),o.LFG(Ut.zQ,8),o.LFG(Ut.Qv,8),o.LFG(Ut.L6,8),o.LFG(Ut._Q,8),o.LFG(Ut.rT,8),o.LFG(Ut.lh,8),o.LFG(Ut.f7,8),o.LFG(hz.nm,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Uf=(()=>{class n{constructor(t){this.fireStore=t}create(t,i){this.fireStore.collection(`game/${t}/issue`).add(i)}fetch$(t){return this.fireStore.collection(`game/${t}/issue`).snapshotChanges().pipe((0,De.U)(i=>i.map(s=>{const r=s.payload.doc.data();return{id:s.payload.doc.id,...r}})))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Cc))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var zz=S(3657),xz=S(4742),zc=S(8421),Zf=S(3269),bo=S(5403),Tz=S(3268),wz=S(1810);let qf=(()=>{class n{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n}),n})(),Sn=(()=>{class n extends qf{}return n.\u0275fac=function(){let e;return function(i){return(e||(e=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})();const nt=new o.OlP("NgValueAccessor"),Sz={provide:nt,useExisting:(0,o.Gpc)(()=>ui),multi:!0},Qf=new o.OlP("CompositionEventMode");let ui=(()=>{class n extends qf{constructor(t,i,s){super(t,i),this._compositionMode=s,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Nz(){const n=(0,C.q)()?(0,C.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(Qf,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&o.NdJ("input",function(r){return i._handleInput(r.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(r){return i._compositionEnd(r.target.value)})},features:[o._Bn([Sz]),o.qOj]}),n})();function Zt(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function jf(n){return null!=n&&"number"==typeof n.length}const Fe=new o.OlP("NgValidators"),qt=new o.OlP("NgAsyncValidators"),Oz=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Dz{static min(e){return function Yf(n){return e=>{if(Zt(e.value)||Zt(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function Hf(n){return e=>{if(Zt(e.value)||Zt(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return function Jf(n){return Zt(n.value)?{required:!0}:null}(e)}static requiredTrue(e){return function Kf(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function Wf(n){return Zt(n.value)||Oz.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function Xf(n){return e=>Zt(e.value)||!jf(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function em(n){return e=>jf(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function tm(n){if(!n)return or;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),i=>{if(Zt(i.value))return null;const s=i.value;return e.test(s)?null:{pattern:{requiredPattern:t,actualValue:s}}}}(e)}static nullValidator(e){return null}static compose(e){return am(e)}static composeAsync(e){return lm(e)}}function or(n){return null}function nm(n){return null!=n}function im(n){return(0,o.QGY)(n)?(0,vi.D)(n):n}function om(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function sm(n,e){return e.map(t=>t(n))}function rm(n){return n.map(e=>function Ez(n){return!n.validate}(e)?e:t=>e.validate(t))}function am(n){if(!n)return null;const e=n.filter(nm);return 0==e.length?null:function(t){return om(sm(t,e))}}function xc(n){return null!=n?am(rm(n)):null}function lm(n){if(!n)return null;const e=n.filter(nm);return 0==e.length?null:function(t){return function Iz(...n){const e=(0,Zf.jO)(n),{args:t,keys:i}=(0,xz.D)(n),s=new wr.y(r=>{const{length:a}=t;if(!a)return void r.complete();const l=new Array(a);let c=a,u=a;for(let h=0;h<a;h++){let d=!1;(0,zc.Xf)(t[h]).subscribe((0,bo.x)(r,p=>{d||(d=!0,u--),l[h]=p},()=>c--,void 0,()=>{(!c||!d)&&(u||r.next(i?(0,wz.n)(i,l):l),r.complete())}))}});return e?s.pipe((0,Tz.Z)(e)):s}(sm(t,e).map(im)).pipe((0,De.U)(om))}}function Tc(n){return null!=n?lm(rm(n)):null}function cm(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function um(n){return n._rawValidators}function hm(n){return n._rawAsyncValidators}function wc(n){return n?Array.isArray(n)?n:[n]:[]}function sr(n,e){return Array.isArray(n)?n.includes(e):n===e}function dm(n,e){const t=wc(e);return wc(n).forEach(s=>{sr(t,s)||t.push(s)}),t}function pm(n,e){return wc(e).filter(t=>!sr(n,t))}class fm{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=xc(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Tc(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class qe extends fm{get formDirective(){return null}get path(){return null}}class zt extends fm{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class mm{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let So=(()=>{class n extends mm{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(zt,2))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[o.qOj]}),n})(),Ic=(()=>{class n extends mm{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(qe,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,i){2&t&&o.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[o.qOj]}),n})();const No="VALID",ar="INVALID",hi="PENDING",Ao="DISABLED";function Ac(n){return(lr(n)?n.validators:n)||null}function _m(n){return Array.isArray(n)?xc(n):n||null}function Oc(n,e){return(lr(e)?e.asyncValidators:n)||null}function ym(n){return Array.isArray(n)?Tc(n):n||null}function lr(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class zm{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=_m(this._rawValidators),this._composedAsyncValidatorFn=ym(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===No}get invalid(){return this.status===ar}get pending(){return this.status==hi}get disabled(){return this.status===Ao}get enabled(){return this.status!==Ao}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=_m(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ym(e)}addValidators(e){this.setValidators(dm(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(dm(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(pm(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(pm(e,this._rawAsyncValidators))}hasValidator(e){return sr(this._rawValidators,e)}hasAsyncValidator(e){return sr(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=hi,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Ao,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=No,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===No||this.status===hi)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Ao:No}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=hi,this._hasOwnPendingAsyncValidator=!0;const t=im(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,s)=>i&&i._find(s),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new o.vpe,this.statusChanges=new o.vpe}_calculateStatus(){return this._allControlsDisabled()?Ao:this.errors?ar:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(hi)?hi:this._anyControlsHaveStatus(ar)?ar:No}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){lr(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class Oo extends zm{constructor(e,t,i){super(Ac(t),Oc(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function Cm(n,e,t){n._forEachChild((i,s)=>{if(void 0===t[s])throw new o.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(i=>{(function vm(n,e,t){const i=n.controls;if(!(e?Object.keys(i):i).length)throw new o.vHH(1e3,"");if(!i[t])throw new o.vHH(1001,"")})(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(i=>{const s=this.controls[i];s&&s.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,s)=>{i.reset(e[s],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>!!i._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,i,s)=>((i.enabled||this.disabled)&&(t[s]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((s,r)=>{i=t(i,s,r)}),i}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function cr(n,e){return[...e.path,n]}function Do(n,e){Dc(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function Gz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&xm(n,e)})}(n,e),function Zz(n,e){const t=(i,s)=>{e.valueAccessor.writeValue(i),s&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function Uz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&xm(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Bz(n,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ur(n,e,t=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),dr(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function hr(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Dc(n,e){const t=um(n);null!==e.validator?n.setValidators(cm(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const i=hm(n);null!==e.asyncValidator?n.setAsyncValidators(cm(i,e.asyncValidator)):"function"==typeof i&&n.setAsyncValidators([i]);const s=()=>n.updateValueAndValidity();hr(e._rawValidators,s),hr(e._rawAsyncValidators,s)}function dr(n,e){let t=!1;if(null!==n){if(null!==e.validator){const s=um(n);if(Array.isArray(s)&&s.length>0){const r=s.filter(a=>a!==e.validator);r.length!==s.length&&(t=!0,n.setValidators(r))}}if(null!==e.asyncValidator){const s=hm(n);if(Array.isArray(s)&&s.length>0){const r=s.filter(a=>a!==e.asyncValidator);r.length!==s.length&&(t=!0,n.setAsyncValidators(r))}}}const i=()=>{};return hr(e._rawValidators,i),hr(e._rawAsyncValidators,i),t}function xm(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Ec(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function Mc(n,e){if(!e)return null;let t,i,s;return Array.isArray(e),e.forEach(r=>{r.constructor===ui?t=r:function Qz(n){return Object.getPrototypeOf(n.constructor)===Sn}(r)?i=r:s=r}),s||i||t||null}function bm(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function Sm(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const $t=class extends zm{constructor(e=null,t,i){super(Ac(t),Oc(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),lr(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Sm(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){bm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){bm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Sm(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Kz={provide:zt,useExisting:(0,o.Gpc)(()=>pr)},Om=(()=>Promise.resolve())();let pr=(()=>{class n extends zt{constructor(t,i,s,r,a){super(),this._changeDetectorRef=a,this.control=new $t,this._registered=!1,this.update=new o.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Mc(0,r)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Ec(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){Do(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Om.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,s=0!==i&&(0,o.D6c)(i);Om.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?cr(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(qe,9),o.Y36(Fe,10),o.Y36(qt,10),o.Y36(nt,10),o.Y36(o.sBO,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[o._Bn([Kz]),o.qOj,o.TTD]}),n})(),Fc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),Em=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})();const Vc=new o.OlP("NgModelWithFormControlWarning"),o1={provide:qe,useExisting:(0,o.Gpc)(()=>Mo)};let Mo=(()=>{class n extends qe{constructor(t,i){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new o.vpe,this._setValidators(t),this._setAsyncValidators(i)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(dr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const i=this.form.get(t.path);return Do(i,t),i.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),i}getControl(t){return this.form.get(t.path)}removeControl(t){ur(t.control||null,t,!1),function jz(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,i){this.form.get(t.path).setValue(i)}onSubmit(t){return this.submitted=!0,function Im(n,e){n._syncPendingControls(),e.forEach(t=>{const i=t.control;"submit"===i.updateOn&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const i=t.control,s=this.form.get(t.path);i!==s&&(ur(i||null,t),(n=>n instanceof $t)(s)&&(Do(s,t),t.control=s))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const i=this.form.get(t.path);(function Tm(n,e){Dc(n,e)})(i,t),i.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const i=this.form.get(t.path);i&&function qz(n,e){return dr(n,e)}(i,t)&&i.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Dc(this.form,this),this._oldForm&&dr(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Fe,10),o.Y36(qt,10))},n.\u0275dir=o.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,i){1&t&&o.NdJ("submit",function(r){return i.onSubmit(r)})("reset",function(){return i.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[o._Bn([o1]),o.qOj,o.TTD]}),n})();const a1={provide:zt,useExisting:(0,o.Gpc)(()=>fr)};let fr=(()=>{class n extends zt{constructor(t,i,s,r,a){super(),this._ngModelWarningConfig=a,this._added=!1,this.update=new o.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(i),this._setAsyncValidators(s),this.valueAccessor=Mc(0,r)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),Ec(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return cr(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(o.Y36(qe,13),o.Y36(Fe,10),o.Y36(qt,10),o.Y36(nt,10),o.Y36(Vc,8))},n.\u0275dir=o.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[o._Bn([a1]),o.qOj,o.TTD]}),n})();const l1={provide:nt,useExisting:(0,o.Gpc)(()=>mr),multi:!0};function Rm(n,e){return null==n?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let mr=(()=>{class n extends Sn{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const s=Rm(this._getOptionId(t),t);this.setProperty("value",s)}registerOnChange(t){this.onChange=i=>{this.value=this._getOptionValue(i),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i),t))return i;return null}_getOptionValue(t){const i=function c1(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i):t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,i){1&t&&o.NdJ("change",function(r){return i.onChange(r.target.value)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([l1]),o.qOj]}),n})(),Lm=(()=>{class n{constructor(t,i,s){this._element=t,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(Rm(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(mr,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})();const u1={provide:nt,useExisting:(0,o.Gpc)(()=>Pc),multi:!0};function Pm(n,e){return null==n?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${n}: ${e}`.slice(0,50))}let Pc=(()=>{class n extends Sn{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let i;if(this.value=t,Array.isArray(t)){const s=t.map(r=>this._getOptionId(r));i=(r,a)=>{r._setSelected(s.indexOf(a.toString())>-1)}}else i=(s,r)=>{s._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(t){this.onChange=i=>{const s=[],r=i.selectedOptions;if(void 0!==r){const a=r;for(let l=0;l<a.length;l++){const u=this._getOptionValue(a[l].value);s.push(u)}}else{const a=i.options;for(let l=0;l<a.length;l++){const c=a[l];if(c.selected){const u=this._getOptionValue(c.value);s.push(u)}}}this.value=s,t(s)}}_registerOption(t){const i=(this._idCounter++).toString();return this._optionMap.set(i,t),i}_getOptionId(t){for(const i of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(i)._value,t))return i;return null}_getOptionValue(t){const i=function h1(n){return n.split(":")[0]}(t);return this._optionMap.has(i)?this._optionMap.get(i)._value:t}}return n.\u0275fac=function(){let e;return function(i){return(e||(e=o.n5z(n)))(i||n)}}(),n.\u0275dir=o.lG2({type:n,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,i){1&t&&o.NdJ("change",function(r){return i.onChange(r.target)})("blur",function(){return i.onTouched()})},inputs:{compareWith:"compareWith"},features:[o._Bn([u1]),o.qOj]}),n})(),Bm=(()=>{class n{constructor(t,i,s){this._element=t,this._renderer=i,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Pm(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Pm(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(Pc,9))},n.\u0275dir=o.lG2({type:n,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),n})(),Jm=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Em]}),n})(),Km=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Jm]}),n})(),C1=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:Vc,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Jm]}),n})();var Ve=S(8184),Te=S(4080),K=S(7579),An=S(4968),Wm=S(9770),F=S(2722),di=S(5698),x1=S(1355),T=S(3187),_=S(7340);const Xm=["moz","ms","webkit"];function eg(n){if(typeof window>"u")return null;if(window.cancelAnimationFrame)return window.cancelAnimationFrame(n);const e=Xm.filter(t=>`${t}CancelAnimationFrame`in window||`${t}CancelRequestAnimationFrame`in window)[0];return e?(window[`${e}CancelAnimationFrame`]||window[`${e}CancelRequestAnimationFrame`]).call(this,n):clearTimeout(n)}const Gc=function w1(){if(typeof window>"u")return()=>0;if(window.requestAnimationFrame)return window.requestAnimationFrame.bind(window);const n=Xm.filter(e=>`${e}RequestAnimationFrame`in window)[0];return n?window[`${n}RequestAnimationFrame`]:function T1(){let n=0;return function(e){const t=(new Date).getTime(),i=Math.max(0,16-(t-n)),s=setTimeout(()=>{e(t+i)},i);return n=t+i,s}}()}();var we=S(3353),pi=S(1135),Re=S(9521),I1=S(5684),Uc=S(1281);let b1=(()=>{class n{create(t){return typeof MutationObserver>"u"?null:new MutationObserver(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),tg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[b1]}),n})();var ng=S(9664);let A1=(()=>{class n{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function D1(n){return!!(n.offsetWidth||n.offsetHeight||"function"==typeof n.getClientRects&&n.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const i=function O1(n){try{return n.frameElement}catch{return null}}(function P1(n){return n.ownerDocument&&n.ownerDocument.defaultView||window}(t));if(i&&(-1===rg(i)||!this.isVisible(i)))return!1;let s=t.nodeName.toLowerCase(),r=rg(t);return t.hasAttribute("contenteditable")?-1!==r:!("iframe"===s||"object"===s||this._platform.WEBKIT&&this._platform.IOS&&!function R1(n){let e=n.nodeName.toLowerCase(),t="input"===e&&n.type;return"text"===t||"password"===t||"select"===e||"textarea"===e}(t))&&("audio"===s?!!t.hasAttribute("controls")&&-1!==r:"video"===s?-1!==r&&(null!==r||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,i){return function L1(n){return!function M1(n){return function F1(n){return"input"==n.nodeName.toLowerCase()}(n)&&"hidden"==n.type}(n)&&(function E1(n){let e=n.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(n)||function k1(n){return function V1(n){return"a"==n.nodeName.toLowerCase()}(n)&&n.hasAttribute("href")}(n)||n.hasAttribute("contenteditable")||sg(n))}(t)&&!this.isDisabled(t)&&(i?.ignoreVisibility||this.isVisible(t))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(we.t4))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function sg(n){if(!n.hasAttribute("tabindex")||void 0===n.tabIndex)return!1;let e=n.getAttribute("tabindex");return!(!e||isNaN(parseInt(e,10)))}function rg(n){if(!sg(n))return null;const e=parseInt(n.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class B1{constructor(e,t,i,s,r=!1){this._element=e,this._checker=t,this._ngZone=i,this._document=s,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(e){this._enabled=e,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}destroy(){const e=this._startAnchor,t=this._endAnchor;e&&(e.removeEventListener("focus",this.startAnchorListener),e.remove()),t&&(t.removeEventListener("focus",this.endAnchorListener),t.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusInitialElement(e)))})}focusFirstTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusFirstTabbableElement(e)))})}focusLastTabbableElementWhenReady(e){return new Promise(t=>{this._executeOnStable(()=>t(this.focusLastTabbableElement(e)))})}_getRegionBoundary(e){const t=this._element.querySelectorAll(`[cdk-focus-region-${e}], [cdkFocusRegion${e}], [cdk-focus-${e}]`);return"start"==e?t.length?t[0]:this._getFirstTabbableElement(this._element):t.length?t[t.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(e){const t=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(t){if(!this._checker.isFocusable(t)){const i=this._getFirstTabbableElement(t);return i?.focus(e),!!i}return t.focus(e),!0}return this.focusFirstTabbableElement(e)}focusFirstTabbableElement(e){const t=this._getRegionBoundary("start");return t&&t.focus(e),!!t}focusLastTabbableElement(e){const t=this._getRegionBoundary("end");return t&&t.focus(e),!!t}hasAttached(){return this._hasAttached}_getFirstTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=0;i<t.length;i++){const s=t[i].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(t[i]):null;if(s)return s}return null}_getLastTabbableElement(e){if(this._checker.isFocusable(e)&&this._checker.isTabbable(e))return e;const t=e.children;for(let i=t.length-1;i>=0;i--){const s=t[i].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(t[i]):null;if(s)return s}return null}_createAnchor(){const e=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,e),e.classList.add("cdk-visually-hidden"),e.classList.add("cdk-focus-trap-anchor"),e.setAttribute("aria-hidden","true"),e}_toggleAnchorTabIndex(e,t){e?t.setAttribute("tabindex","0"):t.removeAttribute("tabindex")}toggleAnchors(e){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(e,this._startAnchor),this._toggleAnchorTabIndex(e,this._endAnchor))}_executeOnStable(e){this._ngZone.isStable?e():this._ngZone.onStable.pipe((0,di.q)(1)).subscribe(e)}}let Zc=(()=>{class n{constructor(t,i,s){this._checker=t,this._ngZone=i,this._document=s}create(t,i=!1){return new B1(t,this._checker,this._ngZone,this._document,i)}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(A1),o.LFG(o.R0b),o.LFG(C.K0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Z1=new o.OlP("cdk-input-modality-detector-options"),q1={ignoreKeys:[Re.zL,Re.jx,Re.b2,Re.MW,Re.JU]},fi=(0,we.i$)({passive:!0,capture:!0});let $1=(()=>{class n{constructor(t,i,s,r){this._platform=t,this._mostRecentTarget=null,this._modality=new pi.X(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(l=>l===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=(0,we.sA)(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<650||(this._modality.next(function G1(n){return 0===n.buttons||0===n.offsetX&&0===n.offsetY}(a)?"keyboard":"mouse"),this._mostRecentTarget=(0,we.sA)(a))},this._onTouchstart=a=>{!function U1(n){const e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}(a)?(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=(0,we.sA)(a)):this._modality.next("keyboard")},this._options={...q1,...r},this.modalityDetected=this._modality.pipe((0,I1.T)(1)),this.modalityChanged=this.modalityDetected.pipe((0,En.x)()),t.isBrowser&&i.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,fi),s.addEventListener("mousedown",this._onMousedown,fi),s.addEventListener("touchstart",this._onTouchstart,fi)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,fi),document.removeEventListener("mousedown",this._onMousedown,fi),document.removeEventListener("touchstart",this._onTouchstart,fi))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(we.t4),o.LFG(o.R0b),o.LFG(C.K0),o.LFG(Z1,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const j1=new o.OlP("cdk-focus-monitor-default-options"),gr=(0,we.i$)({passive:!0,capture:!0});let qc=(()=>{class n{constructor(t,i,s,r,a){this._ngZone=t,this._platform=i,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new K.x,this._rootNodeFocusAndBlurListener=l=>{for(let u=(0,we.sA)(l);u;u=u.parentElement)"focus"===l.type?this._onFocus(l,u):this._onBlur(l,u)},this._document=r,this._detectionMode=a?.detectionMode||0}monitor(t,i=!1){const s=(0,Uc.fI)(t);if(!this._platform.isBrowser||1!==s.nodeType)return(0,Ci.of)(null);const r=(0,we.kV)(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return i&&(a.checkChildren=!0),a.subject;const l={checkChildren:i,subject:new K.x,rootNode:r};return this._elementInfo.set(s,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(t){const i=(0,Uc.fI)(t),s=this._elementInfo.get(i);s&&(s.subject.complete(),this._setClasses(i),this._elementInfo.delete(i),this._removeGlobalListeners(s))}focusVia(t,i,s){const r=(0,Uc.fI)(t);r===this._getDocument().activeElement?this._getClosestElementsInfo(r).forEach(([l,c])=>this._originChanged(l,i,c)):(this._setOrigin(i),"function"==typeof r.focus&&r.focus(s))}ngOnDestroy(){this._elementInfo.forEach((t,i)=>this.stopMonitoring(i))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:t&&this._isLastInteractionFromInputLabel(t)?"mouse":"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!t?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(t,i){t.classList.toggle("cdk-focused",!!i),t.classList.toggle("cdk-touch-focused","touch"===i),t.classList.toggle("cdk-keyboard-focused","keyboard"===i),t.classList.toggle("cdk-mouse-focused","mouse"===i),t.classList.toggle("cdk-program-focused","program"===i)}_setOrigin(t,i=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&i,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,i){const s=this._elementInfo.get(i),r=(0,we.sA)(t);!s||!s.checkChildren&&i!==r||this._originChanged(i,this._getFocusOrigin(r),s)}_onBlur(t,i){const s=this._elementInfo.get(i);!s||s.checkChildren&&t.relatedTarget instanceof Node&&i.contains(t.relatedTarget)||(this._setClasses(i),this._emitOrigin(s,null))}_emitOrigin(t,i){t.subject.observers.length&&this._ngZone.run(()=>t.subject.next(i))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const i=t.rootNode,s=this._rootNodeFocusListenerCount.get(i)||0;s||this._ngZone.runOutsideAngular(()=>{i.addEventListener("focus",this._rootNodeFocusAndBlurListener,gr),i.addEventListener("blur",this._rootNodeFocusAndBlurListener,gr)}),this._rootNodeFocusListenerCount.set(i,s+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe((0,F.R)(this._stopInputModalityDetector)).subscribe(r=>{this._setOrigin(r,!0)}))}_removeGlobalListeners(t){const i=t.rootNode;if(this._rootNodeFocusListenerCount.has(i)){const s=this._rootNodeFocusListenerCount.get(i);s>1?this._rootNodeFocusListenerCount.set(i,s-1):(i.removeEventListener("focus",this._rootNodeFocusAndBlurListener,gr),i.removeEventListener("blur",this._rootNodeFocusAndBlurListener,gr),this._rootNodeFocusListenerCount.delete(i))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,i,s){this._setClasses(t,i),this._emitOrigin(s,i),this._lastFocusOrigin=i}_getClosestElementsInfo(t){const i=[];return this._elementInfo.forEach((s,r)=>{(r===t||s.checkChildren&&r.contains(t))&&i.push([r,s])}),i}_isLastInteractionFromInputLabel(t){const{_mostRecentTarget:i,mostRecentModality:s}=this._inputModalityDetector;if("mouse"!==s||!i||i===t||"INPUT"!==t.nodeName&&"TEXTAREA"!==t.nodeName||t.disabled)return!1;const r=t.labels;if(r)for(let a=0;a<r.length;a++)if(r[a].contains(i))return!0;return!1}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(o.R0b),o.LFG(we.t4),o.LFG($1),o.LFG(C.K0,8),o.LFG(j1,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const lg="cdk-high-contrast-black-on-white",cg="cdk-high-contrast-white-on-black",$c="cdk-high-contrast-active";let Y1=(()=>{class n{constructor(t,i){this._platform=t,this._document=i,this._breakpointSubscription=(0,o.f3M)(ng.Yg).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const i=this._document.defaultView||window,s=i&&i.getComputedStyle?i.getComputedStyle(t):null,r=(s&&s.backgroundColor||"").replace(/ /g,"");switch(t.remove(),r){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return 2;case"rgb(255,255,255)":case"rgb(255,250,239)":return 1}return 0}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove($c,lg,cg),this._hasCheckedHighContrastMode=!0;const i=this.getHighContrastMode();1===i?t.add($c,lg):2===i&&t.add($c,cg)}}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(we.t4),o.LFG(C.K0))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),H1=(()=>{class n{constructor(t){t._applyBodyHighContrastModeCssClasses()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Y1))},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[tg]}),n})();var j=S(7917),Qt=S(1811),se=S(6287),mi=S(6616),_r=S(1664);S(1481);class Oe{transform(e,t=0,i="B",s){if(!((0,T.ui)(e)&&(0,T.ui)(t)&&t%1==0&&t>=0))return e;let r=e,a=i;for(;"B"!==a;)r*=1024,a=Oe.formats[a].prev;if(s){const c=(0,T.YM)(Oe.calculateResult(Oe.formats[s],r),t);return Oe.formatResult(c,s)}for(const l in Oe.formats)if(Oe.formats.hasOwnProperty(l)){const c=Oe.formats[l];if(r<c.max){const u=(0,T.YM)(Oe.calculateResult(c,r),t);return Oe.formatResult(u,l)}}}static formatResult(e,t){return`${e} ${t}`}static calculateResult(e,t){const i=e.prev?Oe.formats[e.prev]:void 0;return i?t/i.max:t}}Oe.formats={B:{max:1024},kB:{max:Math.pow(1024,2),prev:"B"},KB:{max:Math.pow(1024,2),prev:"B"},MB:{max:Math.pow(1024,3),prev:"kB"},GB:{max:Math.pow(1024,4),prev:"MB"},TB:{max:Number.MAX_SAFE_INTEGER,prev:"GB"}},Oe.\u0275fac=function(e){return new(e||Oe)},Oe.\u0275pipe=o.Yjl({name:"nzBytes",type:Oe,pure:!0});let Qc=(()=>{class n{transform(t,i="px"){let c="px";return["cm","mm","Q","in","pc","pt","px","em","ex","ch","rem","1h","vw","vh","vmin","vmax","%"].some(u=>u===i)&&(c=i),"number"==typeof t?`${t}${c}`:`${t}`}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=o.Yjl({name:"nzToCssUnit",type:n,pure:!0}),n})(),ug=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[C.ez]}),n})();var ae=S(445),D=S(655),jt=S(4903);const W1=["nz-modal-close",""];function X1(n,e){if(1&n&&(o.ynx(0),o._UZ(1,"span",2),o.BQk()),2&n){const t=e.$implicit;o.xp6(1),o.Q6J("nzType",t)}}const hg=["modalElement"];function ex(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",16),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.onCloseClick())}),o.qZA()}}function tx(n,e){if(1&n&&(o.ynx(0),o._UZ(1,"span",17),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("innerHTML",t.config.nzTitle,o.oJD)}}function nx(n,e){}function ix(n,e){if(1&n&&o._UZ(0,"div",17),2&n){const t=o.oxw();o.Q6J("innerHTML",t.config.nzContent,o.oJD)}}function ox(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",18),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.onCancel())}),o._uU(1),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("nzLoading",!!t.config.nzCancelLoading)("disabled",t.config.nzCancelDisabled),o.uIk("cdkFocusInitial","cancel"===t.config.nzAutofocus||null),o.xp6(1),o.hij(" ",t.config.nzCancelText||t.locale.cancelText," ")}}function sx(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",19),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.onOk())}),o._uU(1),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("nzType",t.config.nzOkType)("nzLoading",!!t.config.nzOkLoading)("disabled",t.config.nzOkDisabled)("nzDanger",t.config.nzOkDanger),o.uIk("cdkFocusInitial","ok"===t.config.nzAutofocus||null),o.xp6(1),o.hij(" ",t.config.nzOkText||t.locale.okText," ")}}const rx=["nz-modal-footer",""];function ax(n,e){if(1&n&&o._UZ(0,"div",5),2&n){const t=o.oxw(3);o.Q6J("innerHTML",t.config.nzFooter,o.oJD)}}function lx(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",7),o.NdJ("click",function(){const r=o.CHM(t).$implicit,a=o.oxw(4);return o.KtG(a.onButtonClick(r))}),o._uU(1),o.qZA()}if(2&n){const t=e.$implicit,i=o.oxw(4);o.Q6J("hidden",!i.getButtonCallableProp(t,"show"))("nzLoading",i.getButtonCallableProp(t,"loading"))("disabled",i.getButtonCallableProp(t,"disabled"))("nzType",t.type)("nzDanger",t.danger)("nzShape",t.shape)("nzSize",t.size)("nzGhost",t.ghost),o.xp6(1),o.hij(" ",t.label," ")}}function cx(n,e){if(1&n&&(o.ynx(0),o.YNc(1,lx,2,9,"button",6),o.BQk()),2&n){const t=o.oxw(3);o.xp6(1),o.Q6J("ngForOf",t.buttons)}}function ux(n,e){if(1&n&&(o.ynx(0),o.YNc(1,ax,1,1,"div",3),o.YNc(2,cx,2,1,"ng-container",4),o.BQk()),2&n){const t=o.oxw(2);o.xp6(1),o.Q6J("ngIf",!t.buttonsFooter),o.xp6(1),o.Q6J("ngIf",t.buttonsFooter)}}const hx=function(n,e){return{$implicit:n,modalRef:e}};function dx(n,e){if(1&n&&(o.ynx(0),o.YNc(1,ux,3,2,"ng-container",2),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",t.config.nzFooter)("nzStringTemplateOutletContext",o.WLB(2,hx,t.config.nzComponentParams,t.modalRef))}}function px(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",10),o.NdJ("click",function(){o.CHM(t);const s=o.oxw(2);return o.KtG(s.onCancel())}),o._uU(1),o.qZA()}if(2&n){const t=o.oxw(2);o.Q6J("nzLoading",!!t.config.nzCancelLoading)("disabled",t.config.nzCancelDisabled),o.uIk("cdkFocusInitial","cancel"===t.config.nzAutofocus||null),o.xp6(1),o.hij(" ",t.config.nzCancelText||t.locale.cancelText," ")}}function fx(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",11),o.NdJ("click",function(){o.CHM(t);const s=o.oxw(2);return o.KtG(s.onOk())}),o._uU(1),o.qZA()}if(2&n){const t=o.oxw(2);o.Q6J("nzType",t.config.nzOkType)("nzDanger",t.config.nzOkDanger)("nzLoading",!!t.config.nzOkLoading)("disabled",t.config.nzOkDisabled),o.uIk("cdkFocusInitial","ok"===t.config.nzAutofocus||null),o.xp6(1),o.hij(" ",t.config.nzOkText||t.locale.okText," ")}}function mx(n,e){if(1&n&&(o.YNc(0,px,2,4,"button",8),o.YNc(1,fx,2,6,"button",9)),2&n){const t=o.oxw();o.Q6J("ngIf",null!==t.config.nzCancelText),o.xp6(1),o.Q6J("ngIf",null!==t.config.nzOkText)}}const gx=["nz-modal-title",""];function _x(n,e){if(1&n&&(o.ynx(0),o._UZ(1,"div",2),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("innerHTML",t.config.nzTitle,o.oJD)}}function yx(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",9),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.onCloseClick())}),o.qZA()}}function vx(n,e){1&n&&o._UZ(0,"div",10)}function Cx(n,e){}function zx(n,e){if(1&n&&o._UZ(0,"div",11),2&n){const t=o.oxw();o.Q6J("innerHTML",t.config.nzContent,o.oJD)}}function xx(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",12),o.NdJ("cancelTriggered",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.onCloseClick())})("okTriggered",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.onOkClick())}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("modalRef",t.modalRef)}}const dg=()=>{};class On{constructor(){this.nzCentered=!1,this.nzClosable=!0,this.nzOkLoading=!1,this.nzOkDisabled=!1,this.nzCancelDisabled=!1,this.nzCancelLoading=!1,this.nzNoAnimation=!1,this.nzAutofocus="auto",this.nzKeyboard=!0,this.nzZIndex=1e3,this.nzWidth=520,this.nzCloseIcon="close",this.nzOkType="primary",this.nzOkDanger=!1,this.nzModalType="default",this.nzOnCancel=dg,this.nzOnOk=dg,this.nzIconType="question-circle"}}const yr="ant-modal-mask",vr="modal",pg={modalContainer:(0,_.X$)("modalContainer",[(0,_.SB)("void, exit",(0,_.oB)({})),(0,_.SB)("enter",(0,_.oB)({})),(0,_.eR)("* => enter",(0,_.jt)(".24s",(0,_.oB)({}))),(0,_.eR)("* => void, * => exit",(0,_.jt)(".2s",(0,_.oB)({})))])};function ko(n,e,t){return typeof n>"u"?typeof e>"u"?t:e:n}function fg(n){const{nzCentered:e,nzMask:t,nzMaskClosable:i,nzClosable:s,nzOkLoading:r,nzOkDisabled:a,nzCancelDisabled:l,nzCancelLoading:c,nzKeyboard:u,nzNoAnimation:h,nzContent:d,nzComponentParams:p,nzFooter:g,nzZIndex:y,nzWidth:w,nzWrapClassName:N,nzClassName:G,nzStyle:Y,nzTitle:B,nzCloseIcon:re,nzMaskStyle:U,nzBodyStyle:Q,nzOkText:fe,nzCancelText:Dn,nzOkType:dN,nzOkDanger:pN,nzIconType:fN,nzModalType:mN,nzOnOk:gN,nzOnCancel:_N,nzAfterOpen:yN,nzAfterClose:vN,nzCloseOnNavigation:CN,nzAutofocus:zN}=n;return{nzCentered:e,nzMask:t,nzMaskClosable:i,nzClosable:s,nzOkLoading:r,nzOkDisabled:a,nzCancelDisabled:l,nzCancelLoading:c,nzKeyboard:u,nzNoAnimation:h,nzContent:d,nzComponentParams:p,nzFooter:g,nzZIndex:y,nzWidth:w,nzWrapClassName:N,nzClassName:G,nzStyle:Y,nzTitle:B,nzCloseIcon:re,nzMaskStyle:U,nzBodyStyle:Q,nzOkText:fe,nzCancelText:Dn,nzOkType:dN,nzOkDanger:pN,nzIconType:fN,nzModalType:mN,nzOnOk:gN,nzOnCancel:_N,nzAfterOpen:yN,nzAfterClose:vN,nzCloseOnNavigation:CN,nzAutofocus:zN}}function mg(){throw Error("Attempting to attach modal content after content is already attached")}let gg=(()=>{class n extends Te.en{constructor(t,i,s,r,a,l,c,u,h,d){super(),this.ngZone=t,this.host=i,this.focusTrapFactory=s,this.cdr=r,this.render=a,this.overlayRef=l,this.nzConfigService=c,this.config=u,this.animationType=d,this.animationStateChanged=new o.vpe,this.containerClick=new o.vpe,this.cancelTriggered=new o.vpe,this.okTriggered=new o.vpe,this.state="enter",this.isStringContent=!1,this.dir="ltr",this.elementFocusedBeforeModalWasOpened=null,this.mouseDown=!1,this.oldMaskStyle=null,this.destroy$=new K.x,this.document=h,this.dir=l.getDirection(),this.isStringContent="string"==typeof u.nzContent,this.nzConfigService.getConfigChangeEventForComponent(vr).pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.updateMaskClassname()})}get showMask(){const t=this.nzConfigService.getConfigForComponent(vr)||{};return!!ko(this.config.nzMask,t.nzMask,!0)}get maskClosable(){const t=this.nzConfigService.getConfigForComponent(vr)||{};return!!ko(this.config.nzMaskClosable,t.nzMaskClosable,!0)}onContainerClick(t){t.target===t.currentTarget&&!this.mouseDown&&this.showMask&&this.maskClosable&&this.containerClick.emit()}onCloseClick(){this.cancelTriggered.emit()}onOkClick(){this.okTriggered.emit()}attachComponentPortal(t){return this.portalOutlet.hasAttached()&&mg(),this.savePreviouslyFocusedElement(),this.setZIndexForBackdrop(),this.portalOutlet.attachComponentPortal(t)}attachTemplatePortal(t){return this.portalOutlet.hasAttached()&&mg(),this.savePreviouslyFocusedElement(),this.setZIndexForBackdrop(),this.portalOutlet.attachTemplatePortal(t)}attachStringContent(){this.savePreviouslyFocusedElement(),this.setZIndexForBackdrop()}getNativeElement(){return this.host.nativeElement}animationDisabled(){return this.config.nzNoAnimation||"NoopAnimations"===this.animationType}setModalTransformOrigin(){const t=this.modalElementRef.nativeElement;if(this.elementFocusedBeforeModalWasOpened){const i=this.elementFocusedBeforeModalWasOpened.getBoundingClientRect(),s=(0,T.pW)(this.elementFocusedBeforeModalWasOpened);this.render.setStyle(t,"transform-origin",`${s.left+i.width/2-t.offsetLeft}px ${s.top+i.height/2-t.offsetTop}px 0px`)}}savePreviouslyFocusedElement(){this.focusTrap||(this.focusTrap=this.focusTrapFactory.create(this.host.nativeElement)),this.document&&(this.elementFocusedBeforeModalWasOpened=this.document.activeElement,this.host.nativeElement.focus&&this.ngZone.runOutsideAngular(()=>Gc(()=>this.host.nativeElement.focus())))}trapFocus(){const t=this.host.nativeElement;if(this.config.nzAutofocus)this.focusTrap.focusInitialElementWhenReady();else{const i=this.document.activeElement;i!==t&&!t.contains(i)&&t.focus()}}restoreFocus(){const t=this.elementFocusedBeforeModalWasOpened;if(t&&"function"==typeof t.focus){const i=this.document.activeElement,s=this.host.nativeElement;(!i||i===this.document.body||i===s||s.contains(i))&&t.focus()}this.focusTrap&&this.focusTrap.destroy()}setEnterAnimationClass(){if(this.animationDisabled())return;this.setModalTransformOrigin();const t=this.modalElementRef.nativeElement,i=this.overlayRef.backdropElement;t.classList.add("ant-zoom-enter"),t.classList.add("ant-zoom-enter-active"),i&&(i.classList.add("ant-fade-enter"),i.classList.add("ant-fade-enter-active"))}setExitAnimationClass(){const t=this.modalElementRef.nativeElement;t.classList.add("ant-zoom-leave"),t.classList.add("ant-zoom-leave-active"),this.setMaskExitAnimationClass()}setMaskExitAnimationClass(t=!1){const i=this.overlayRef.backdropElement;if(i){if(this.animationDisabled()||t)return void i.classList.remove(yr);i.classList.add("ant-fade-leave"),i.classList.add("ant-fade-leave-active")}}cleanAnimationClass(){if(this.animationDisabled())return;const t=this.overlayRef.backdropElement,i=this.modalElementRef.nativeElement;t&&(t.classList.remove("ant-fade-enter"),t.classList.remove("ant-fade-enter-active")),i.classList.remove("ant-zoom-enter"),i.classList.remove("ant-zoom-enter-active"),i.classList.remove("ant-zoom-leave"),i.classList.remove("ant-zoom-leave-active")}setZIndexForBackdrop(){const t=this.overlayRef.backdropElement;t&&(0,T.DX)(this.config.nzZIndex)&&this.render.setStyle(t,"z-index",this.config.nzZIndex)}bindBackdropStyle(){const t=this.overlayRef.backdropElement;if(t&&(this.oldMaskStyle&&(Object.keys(this.oldMaskStyle).forEach(s=>{this.render.removeStyle(t,s)}),this.oldMaskStyle=null),this.setZIndexForBackdrop(),"object"==typeof this.config.nzMaskStyle&&Object.keys(this.config.nzMaskStyle).length)){const i={...this.config.nzMaskStyle};Object.keys(i).forEach(s=>{this.render.setStyle(t,s,i[s])}),this.oldMaskStyle=i}}updateMaskClassname(){const t=this.overlayRef.backdropElement;t&&(this.showMask?t.classList.add(yr):t.classList.remove(yr))}onAnimationDone(t){"enter"===t.toState?this.trapFocus():"exit"===t.toState&&this.restoreFocus(),this.cleanAnimationClass(),this.animationStateChanged.emit(t)}onAnimationStart(t){"enter"===t.toState?(this.setEnterAnimationClass(),this.bindBackdropStyle()):"exit"===t.toState&&this.setExitAnimationClass(),this.animationStateChanged.emit(t)}startExitAnimation(){this.state="exit",this.cdr.markForCheck()}ngOnDestroy(){this.setMaskExitAnimationClass(!0),this.destroy$.next(),this.destroy$.complete()}setupMouseListeners(t){this.ngZone.runOutsideAngular(()=>{(0,An.R)(this.host.nativeElement,"mouseup").pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.mouseDown&&setTimeout(()=>{this.mouseDown=!1})}),(0,An.R)(t.nativeElement,"mousedown").pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.mouseDown=!0})})}}return n.\u0275fac=function(t){o.$Z()},n.\u0275dir=o.lG2({type:n,features:[o.qOj]}),n})(),_g=(()=>{class n{constructor(t){this.config=t}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(On))},n.\u0275cmp=o.Xpm({type:n,selectors:[["button","nz-modal-close",""]],hostAttrs:["aria-label","Close",1,"ant-modal-close"],exportAs:["NzModalCloseBuiltin"],attrs:W1,decls:2,vars:1,consts:[[1,"ant-modal-close-x"],[4,"nzStringTemplateOutlet"],["nz-icon","",1,"ant-modal-close-icon",3,"nzType"]],template:function(t,i){1&t&&(o.TgZ(0,"span",0),o.YNc(1,X1,2,1,"ng-container",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("nzStringTemplateOutlet",i.config.nzCloseIcon))},dependencies:[se.f,$e.w,te.Ls],encapsulation:2,changeDetection:0}),n})(),Ix=(()=>{class n extends gg{constructor(t,i,s,r,a,l,c,u,h,d,p){super(t,s,r,a,l,c,u,h,d,p),this.i18n=i,this.config=h,this.cancelTriggered=new o.vpe,this.okTriggered=new o.vpe,this.i18n.localeChange.pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Modal")})}ngOnInit(){this.setupMouseListeners(this.modalElementRef)}onCancel(){this.cancelTriggered.emit()}onOk(){this.okTriggered.emit()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.R0b),o.Y36(Qt.wi),o.Y36(o.SBq),o.Y36(Zc),o.Y36(o.sBO),o.Y36(o.Qsj),o.Y36(Ve.Iu),o.Y36(j.jY),o.Y36(On),o.Y36(C.K0,8),o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-modal-confirm-container"]],viewQuery:function(t,i){if(1&t&&(o.Gf(Te.Pl,7),o.Gf(hg,7)),2&t){let s;o.iGM(s=o.CRH())&&(i.portalOutlet=s.first),o.iGM(s=o.CRH())&&(i.modalElementRef=s.first)}},hostAttrs:["tabindex","-1","role","dialog"],hostVars:10,hostBindings:function(t,i){1&t&&(o.WFA("@modalContainer.start",function(r){return i.onAnimationStart(r)})("@modalContainer.done",function(r){return i.onAnimationDone(r)}),o.NdJ("click",function(r){return i.onContainerClick(r)})),2&t&&(o.d8E("@.disabled",i.config.nzNoAnimation)("@modalContainer",i.state),o.Tol(i.config.nzWrapClassName?"ant-modal-wrap "+i.config.nzWrapClassName:"ant-modal-wrap"),o.Udp("z-index",i.config.nzZIndex),o.ekj("ant-modal-wrap-rtl","rtl"===i.dir)("ant-modal-centered",i.config.nzCentered))},outputs:{cancelTriggered:"cancelTriggered",okTriggered:"okTriggered"},exportAs:["nzModalConfirmContainer"],features:[o.qOj],decls:17,vars:13,consts:[["role","document",1,"ant-modal",3,"ngClass","ngStyle"],["modalElement",""],[1,"ant-modal-content"],["nz-modal-close","",3,"click",4,"ngIf"],[1,"ant-modal-body",3,"ngStyle"],[1,"ant-modal-confirm-body-wrapper"],[1,"ant-modal-confirm-body"],["nz-icon","",3,"nzType"],[1,"ant-modal-confirm-title"],[4,"nzStringTemplateOutlet"],[1,"ant-modal-confirm-content"],["cdkPortalOutlet",""],[3,"innerHTML",4,"ngIf"],[1,"ant-modal-confirm-btns"],["nz-button","",3,"nzLoading","disabled","click",4,"ngIf"],["nz-button","",3,"nzType","nzLoading","disabled","nzDanger","click",4,"ngIf"],["nz-modal-close","",3,"click"],[3,"innerHTML"],["nz-button","",3,"nzLoading","disabled","click"],["nz-button","",3,"nzType","nzLoading","disabled","nzDanger","click"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0,1),o.ALo(2,"nzToCssUnit"),o.TgZ(3,"div",2),o.YNc(4,ex,1,0,"button",3),o.TgZ(5,"div",4)(6,"div",5)(7,"div",6),o._UZ(8,"span",7),o.TgZ(9,"span",8),o.YNc(10,tx,2,1,"ng-container",9),o.qZA(),o.TgZ(11,"div",10),o.YNc(12,nx,0,0,"ng-template",11),o.YNc(13,ix,1,1,"div",12),o.qZA()(),o.TgZ(14,"div",13),o.YNc(15,ox,2,4,"button",14),o.YNc(16,sx,2,6,"button",15),o.qZA()()()()()),2&t&&(o.Udp("width",o.lcZ(2,11,null==i.config?null:i.config.nzWidth)),o.Q6J("ngClass",i.config.nzClassName)("ngStyle",i.config.nzStyle),o.xp6(4),o.Q6J("ngIf",i.config.nzClosable),o.xp6(1),o.Q6J("ngStyle",i.config.nzBodyStyle),o.xp6(3),o.Q6J("nzType",i.config.nzIconType),o.xp6(2),o.Q6J("nzStringTemplateOutlet",i.config.nzTitle),o.xp6(3),o.Q6J("ngIf",i.isStringContent),o.xp6(2),o.Q6J("ngIf",null!==i.config.nzCancelText),o.xp6(1),o.Q6J("ngIf",null!==i.config.nzOkText))},dependencies:[C.mk,C.O5,C.PC,se.f,Te.Pl,mi.ix,$e.w,_r.dQ,te.Ls,_g,Qc],encapsulation:2,data:{animation:[pg.modalContainer]}}),n})(),bx=(()=>{class n{constructor(t,i){this.i18n=t,this.config=i,this.buttonsFooter=!1,this.buttons=[],this.cancelTriggered=new o.vpe,this.okTriggered=new o.vpe,this.destroy$=new K.x,Array.isArray(i.nzFooter)&&(this.buttonsFooter=!0,this.buttons=i.nzFooter.map(Sx)),this.i18n.localeChange.pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Modal")})}onCancel(){this.cancelTriggered.emit()}onOk(){this.okTriggered.emit()}getButtonCallableProp(t,i){const s=t[i],r=this.modalRef.getContentComponent();return"function"==typeof s?s.apply(t,r&&[r]):s}onButtonClick(t){if(!this.getButtonCallableProp(t,"loading")){const s=this.getButtonCallableProp(t,"onClick");t.autoLoading&&(0,T.tI)(s)&&(t.loading=!0,s.then(()=>t.loading=!1).catch(r=>{throw t.loading=!1,r}))}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Qt.wi),o.Y36(On))},n.\u0275cmp=o.Xpm({type:n,selectors:[["div","nz-modal-footer",""]],hostAttrs:[1,"ant-modal-footer"],inputs:{modalRef:"modalRef"},outputs:{cancelTriggered:"cancelTriggered",okTriggered:"okTriggered"},exportAs:["NzModalFooterBuiltin"],attrs:rx,decls:3,vars:2,consts:[[4,"ngIf","ngIfElse"],["defaultFooterButtons",""],[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],[3,"innerHTML",4,"ngIf"],[4,"ngIf"],[3,"innerHTML"],["nz-button","",3,"hidden","nzLoading","disabled","nzType","nzDanger","nzShape","nzSize","nzGhost","click",4,"ngFor","ngForOf"],["nz-button","",3,"hidden","nzLoading","disabled","nzType","nzDanger","nzShape","nzSize","nzGhost","click"],["nz-button","",3,"nzLoading","disabled","click",4,"ngIf"],["nz-button","",3,"nzType","nzDanger","nzLoading","disabled","click",4,"ngIf"],["nz-button","",3,"nzLoading","disabled","click"],["nz-button","",3,"nzType","nzDanger","nzLoading","disabled","click"]],template:function(t,i){if(1&t&&(o.YNc(0,dx,2,5,"ng-container",0),o.YNc(1,mx,2,2,"ng-template",null,1,o.W1O)),2&t){const s=o.MAs(2);o.Q6J("ngIf",i.config.nzFooter)("ngIfElse",s)}},dependencies:[C.sg,C.O5,se.f,mi.ix,$e.w,_r.dQ],encapsulation:2}),n})();function Sx(n){return{type:null,size:"default",autoLoading:!0,show:!0,loading:!1,disabled:!1,...n}}let Nx=(()=>{class n{constructor(t){this.config=t}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(On))},n.\u0275cmp=o.Xpm({type:n,selectors:[["div","nz-modal-title",""]],hostAttrs:[1,"ant-modal-header"],exportAs:["NzModalTitleBuiltin"],attrs:gx,decls:2,vars:1,consts:[[1,"ant-modal-title"],[4,"nzStringTemplateOutlet"],[3,"innerHTML"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o.YNc(1,_x,2,1,"ng-container",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("nzStringTemplateOutlet",i.config.nzTitle))},dependencies:[se.f],encapsulation:2,changeDetection:0}),n})(),Ax=(()=>{class n extends gg{constructor(t,i,s,r,a,l,c,u,h,d){super(t,i,s,r,a,l,c,u,h,d),this.config=u}ngOnInit(){this.setupMouseListeners(this.modalElementRef)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.R0b),o.Y36(o.SBq),o.Y36(Zc),o.Y36(o.sBO),o.Y36(o.Qsj),o.Y36(Ve.Iu),o.Y36(j.jY),o.Y36(On),o.Y36(C.K0,8),o.Y36(o.QbO,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-modal-container"]],viewQuery:function(t,i){if(1&t&&(o.Gf(Te.Pl,7),o.Gf(hg,7)),2&t){let s;o.iGM(s=o.CRH())&&(i.portalOutlet=s.first),o.iGM(s=o.CRH())&&(i.modalElementRef=s.first)}},hostAttrs:["tabindex","-1","role","dialog"],hostVars:10,hostBindings:function(t,i){1&t&&(o.WFA("@modalContainer.start",function(r){return i.onAnimationStart(r)})("@modalContainer.done",function(r){return i.onAnimationDone(r)}),o.NdJ("click",function(r){return i.onContainerClick(r)})),2&t&&(o.d8E("@.disabled",i.config.nzNoAnimation)("@modalContainer",i.state),o.Tol(i.config.nzWrapClassName?"ant-modal-wrap "+i.config.nzWrapClassName:"ant-modal-wrap"),o.Udp("z-index",i.config.nzZIndex),o.ekj("ant-modal-wrap-rtl","rtl"===i.dir)("ant-modal-centered",i.config.nzCentered))},exportAs:["nzModalContainer"],features:[o.qOj],decls:10,vars:11,consts:[["role","document",1,"ant-modal",3,"ngClass","ngStyle"],["modalElement",""],[1,"ant-modal-content"],["nz-modal-close","",3,"click",4,"ngIf"],["nz-modal-title","",4,"ngIf"],[1,"ant-modal-body",3,"ngStyle"],["cdkPortalOutlet",""],[3,"innerHTML",4,"ngIf"],["nz-modal-footer","",3,"modalRef","cancelTriggered","okTriggered",4,"ngIf"],["nz-modal-close","",3,"click"],["nz-modal-title",""],[3,"innerHTML"],["nz-modal-footer","",3,"modalRef","cancelTriggered","okTriggered"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0,1),o.ALo(2,"nzToCssUnit"),o.TgZ(3,"div",2),o.YNc(4,yx,1,0,"button",3),o.YNc(5,vx,1,0,"div",4),o.TgZ(6,"div",5),o.YNc(7,Cx,0,0,"ng-template",6),o.YNc(8,zx,1,1,"div",7),o.qZA(),o.YNc(9,xx,1,1,"div",8),o.qZA()()),2&t&&(o.Udp("width",o.lcZ(2,9,null==i.config?null:i.config.nzWidth)),o.Q6J("ngClass",i.config.nzClassName)("ngStyle",i.config.nzStyle),o.xp6(4),o.Q6J("ngIf",i.config.nzClosable),o.xp6(1),o.Q6J("ngIf",i.config.nzTitle),o.xp6(1),o.Q6J("ngStyle",i.config.nzBodyStyle),o.xp6(2),o.Q6J("ngIf",i.isStringContent),o.xp6(1),o.Q6J("ngIf",null!==i.config.nzFooter))},dependencies:[C.mk,C.O5,C.PC,Te.Pl,_g,bx,Nx,Qc],encapsulation:2,data:{animation:[pg.modalContainer]}}),n})();class Cr{constructor(e,t,i){this.overlayRef=e,this.config=t,this.containerInstance=i,this.componentInstance=null,this.state=0,this.afterClose=new K.x,this.afterOpen=new K.x,this.destroy$=new K.x,i.animationStateChanged.pipe((0,xt.h)(s=>"done"===s.phaseName&&"enter"===s.toState),(0,di.q)(1)).subscribe(()=>{this.afterOpen.next(),this.afterOpen.complete(),t.nzAfterOpen instanceof o.vpe&&t.nzAfterOpen.emit()}),i.animationStateChanged.pipe((0,xt.h)(s=>"done"===s.phaseName&&"exit"===s.toState),(0,di.q)(1)).subscribe(()=>{clearTimeout(this.closeTimeout),this._finishDialogClose()}),i.containerClick.pipe((0,di.q)(1),(0,F.R)(this.destroy$)).subscribe(()=>{!this.config.nzCancelLoading&&!this.config.nzOkLoading&&this.trigger("cancel")}),e.keydownEvents().pipe((0,xt.h)(s=>this.config.nzKeyboard&&!this.config.nzCancelLoading&&!this.config.nzOkLoading&&s.keyCode===Re.hY&&!(0,Re.Vb)(s))).subscribe(s=>{s.preventDefault(),this.trigger("cancel")}),i.cancelTriggered.pipe((0,F.R)(this.destroy$)).subscribe(()=>this.trigger("cancel")),i.okTriggered.pipe((0,F.R)(this.destroy$)).subscribe(()=>this.trigger("ok")),e.detachments().subscribe(()=>{this.afterClose.next(this.result),this.afterClose.complete(),t.nzAfterClose instanceof o.vpe&&t.nzAfterClose.emit(this.result),this.componentInstance=null,this.overlayRef.dispose()})}getContentComponent(){return this.componentInstance}getElement(){return this.containerInstance.getNativeElement()}destroy(e){this.close(e)}triggerOk(){return this.trigger("ok")}triggerCancel(){return this.trigger("cancel")}close(e){0===this.state&&(this.result=e,this.containerInstance.animationStateChanged.pipe((0,xt.h)(t=>"start"===t.phaseName),(0,di.q)(1)).subscribe(t=>{this.overlayRef.detachBackdrop(),this.closeTimeout=setTimeout(()=>{this._finishDialogClose()},t.totalTime+100)}),this.containerInstance.startExitAnimation(),this.state=1)}updateConfig(e){Object.assign(this.config,e),this.containerInstance.bindBackdropStyle(),this.containerInstance.cdr.markForCheck()}getState(){return this.state}getConfig(){return this.config}getBackdropElement(){return this.overlayRef.backdropElement}trigger(e){var t=this;return(0,v.Z)(function*(){if(1===t.state)return;const i={ok:t.config.nzOnOk,cancel:t.config.nzOnCancel}[e],s={ok:"nzOkLoading",cancel:"nzCancelLoading"}[e];if(!t.config[s])if(i instanceof o.vpe)i.emit(t.getContentComponent());else if("function"==typeof i){const a=i(t.getContentComponent());if((0,T.tI)(a)){t.config[s]=!0;let l=!1;try{l=yield a}finally{t.config[s]=!1,t.closeWhitResult(l)}}else t.closeWhitResult(a)}})()}closeWhitResult(e){!1!==e&&this.close(e)}_finishDialogClose(){this.state=2,this.overlayRef.dispose(),this.destroy$.next()}}let yg=(()=>{class n{constructor(t,i,s,r,a){this.overlay=t,this.injector=i,this.nzConfigService=s,this.parentModal=r,this.directionality=a,this.openModalsAtThisLevel=[],this.afterAllClosedAtThisLevel=new K.x,this.afterAllClose=(0,Wm.P)(()=>this.openModals.length?this._afterAllClosed:this._afterAllClosed.pipe((0,ot.O)(void 0)))}get openModals(){return this.parentModal?this.parentModal.openModals:this.openModalsAtThisLevel}get _afterAllClosed(){const t=this.parentModal;return t?t._afterAllClosed:this.afterAllClosedAtThisLevel}create(t){return this.open(t.nzContent,t)}closeAll(){this.closeModals(this.openModals)}confirm(t={},i="confirm"){return"nzFooter"in t&&(0,x1.ZK)('The Confirm-Modal doesn\'t support "nzFooter", this property will be ignored.'),"nzWidth"in t||(t.nzWidth=416),"nzMaskClosable"in t||(t.nzMaskClosable=!1),t.nzModalType="confirm",t.nzClassName=`ant-modal-confirm ant-modal-confirm-${i} ${t.nzClassName||""}`,this.create(t)}info(t={}){return this.confirmFactory(t,"info")}success(t={}){return this.confirmFactory(t,"success")}error(t={}){return this.confirmFactory(t,"error")}warning(t={}){return this.confirmFactory(t,"warning")}open(t,i){const s=function Tx(n,e){return{...e,...n}}(i||{},new On),r=this.createOverlay(s),a=this.attachModalContainer(r,s),l=this.attachModalContent(t,a,r,s);return a.modalRef=l,this.openModals.push(l),l.afterClose.subscribe(()=>this.removeOpenModal(l)),l}removeOpenModal(t){const i=this.openModals.indexOf(t);i>-1&&(this.openModals.splice(i,1),this.openModals.length||this._afterAllClosed.next())}closeModals(t){let i=t.length;for(;i--;)t[i].close(),this.openModals.length||this._afterAllClosed.next()}createOverlay(t){const i=this.nzConfigService.getConfigForComponent(vr)||{},s=new Ve.X_({hasBackdrop:!0,scrollStrategy:this.overlay.scrollStrategies.block(),positionStrategy:this.overlay.position().global(),disposeOnNavigation:ko(t.nzCloseOnNavigation,i.nzCloseOnNavigation,!0),direction:ko(t.nzDirection,i.nzDirection,this.directionality.value)});return ko(t.nzMask,i.nzMask,!0)&&(s.backdropClass=yr),this.overlay.create(s)}attachModalContainer(t,i){const r=o.zs3.create({parent:i&&i.nzViewContainerRef&&i.nzViewContainerRef.injector||this.injector,providers:[{provide:Ve.Iu,useValue:t},{provide:On,useValue:i}]}),l=new Te.C5("confirm"===i.nzModalType?Ix:Ax,i.nzViewContainerRef,r);return t.attach(l).instance}attachModalContent(t,i,s,r){const a=new Cr(s,r,i);if(t instanceof o.Rgc)i.attachTemplatePortal(new Te.UE(t,null,{$implicit:r.nzComponentParams,modalRef:a}));else if((0,T.DX)(t)&&"string"!=typeof t){const l=this.createInjector(a,r),c=i.attachComponentPortal(new Te.C5(t,r.nzViewContainerRef,l));(function wx(n,e){Object.assign(n,e)})(c.instance,r.nzComponentParams),a.componentInstance=c.instance}else i.attachStringContent();return a}createInjector(t,i){return o.zs3.create({parent:i&&i.nzViewContainerRef&&i.nzViewContainerRef.injector||this.injector,providers:[{provide:Cr,useValue:t}]})}confirmFactory(t={},i){return"nzIconType"in t||(t.nzIconType={info:"info-circle",success:"check-circle",error:"close-circle",warning:"exclamation-circle"}[i]),"nzCancelText"in t||(t.nzCancelText=null),this.confirm(t,i)}ngOnDestroy(){this.closeModals(this.openModalsAtThisLevel),this.afterAllClosedAtThisLevel.complete()}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Ve.aV),o.LFG(o.zs3),o.LFG(j.jY),o.LFG(n,12),o.LFG(ae.Is,8))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),jc=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","nzModalContent",""]],exportAs:["nzModalContent"]}),n})(),Ox=(()=>{class n{constructor(t,i){this.nzModalRef=t,this.templateRef=i,this.nzModalRef&&this.nzModalRef.updateConfig({nzFooter:this.templateRef})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Cr,8),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","nzModalFooter",""]],exportAs:["nzModalFooter"]}),n})(),Dx=(()=>{class n{constructor(t,i){this.nzModalRef=t,this.templateRef=i,this.nzModalRef&&this.nzModalRef.updateConfig({nzTitle:this.templateRef})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Cr,8),o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","nzModalTitle",""]],exportAs:["nzModalTitle"]}),n})(),vg=(()=>{class n{constructor(t,i,s){this.cdr=t,this.modal=i,this.viewContainerRef=s,this.nzVisible=!1,this.nzClosable=!0,this.nzOkLoading=!1,this.nzOkDisabled=!1,this.nzCancelDisabled=!1,this.nzCancelLoading=!1,this.nzKeyboard=!0,this.nzNoAnimation=!1,this.nzCentered=!1,this.nzZIndex=1e3,this.nzWidth=520,this.nzCloseIcon="close",this.nzOkType="primary",this.nzOkDanger=!1,this.nzIconType="question-circle",this.nzModalType="default",this.nzAutofocus="auto",this.nzOnOk=new o.vpe,this.nzOnCancel=new o.vpe,this.nzAfterOpen=new o.vpe,this.nzAfterClose=new o.vpe,this.nzVisibleChange=new o.vpe,this.modalRef=null,this.destroy$=new K.x}set modalTitle(t){t&&this.setTitleWithTemplate(t)}set modalFooter(t){t&&this.setFooterWithTemplate(t)}get afterOpen(){return this.nzAfterOpen.asObservable()}get afterClose(){return this.nzAfterClose.asObservable()}open(){if(this.nzVisible||(this.nzVisible=!0,this.nzVisibleChange.emit(!0)),!this.modalRef){const t=this.getConfig();this.modalRef=this.modal.create(t),this.modalRef.afterClose.asObservable().pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.close()})}}close(t){this.nzVisible&&(this.nzVisible=!1,this.nzVisibleChange.emit(!1)),this.modalRef&&(this.modalRef.close(t),this.modalRef=null)}destroy(t){this.close(t)}triggerOk(){this.modalRef?.triggerOk()}triggerCancel(){this.modalRef?.triggerCancel()}getContentComponent(){return this.modalRef?.getContentComponent()}getElement(){return this.modalRef?.getElement()}getModalRef(){return this.modalRef}setTitleWithTemplate(t){this.nzTitle=t,this.modalRef&&Promise.resolve().then(()=>{this.modalRef.updateConfig({nzTitle:this.nzTitle})})}setFooterWithTemplate(t){this.nzFooter=t,this.modalRef&&Promise.resolve().then(()=>{this.modalRef.updateConfig({nzFooter:this.nzFooter})}),this.cdr.markForCheck()}getConfig(){const t=fg(this);return t.nzViewContainerRef=this.viewContainerRef,t.nzContent=this.nzContent||this.contentFromContentChild,t}ngOnChanges(t){const{nzVisible:i,...s}=t;Object.keys(s).length&&this.modalRef&&this.modalRef.updateConfig(fg(this)),i&&(this.nzVisible?this.open():this.close())}ngOnDestroy(){this.modalRef?._finishDialogClose(),this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.sBO),o.Y36(yg),o.Y36(o.s_b))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-modal"]],contentQueries:function(t,i,s){if(1&t&&(o.Suo(s,Dx,7,o.Rgc),o.Suo(s,jc,7,o.Rgc),o.Suo(s,Ox,7,o.Rgc)),2&t){let r;o.iGM(r=o.CRH())&&(i.modalTitle=r.first),o.iGM(r=o.CRH())&&(i.contentFromContentChild=r.first),o.iGM(r=o.CRH())&&(i.modalFooter=r.first)}},inputs:{nzMask:"nzMask",nzMaskClosable:"nzMaskClosable",nzCloseOnNavigation:"nzCloseOnNavigation",nzVisible:"nzVisible",nzClosable:"nzClosable",nzOkLoading:"nzOkLoading",nzOkDisabled:"nzOkDisabled",nzCancelDisabled:"nzCancelDisabled",nzCancelLoading:"nzCancelLoading",nzKeyboard:"nzKeyboard",nzNoAnimation:"nzNoAnimation",nzCentered:"nzCentered",nzContent:"nzContent",nzComponentParams:"nzComponentParams",nzFooter:"nzFooter",nzZIndex:"nzZIndex",nzWidth:"nzWidth",nzWrapClassName:"nzWrapClassName",nzClassName:"nzClassName",nzStyle:"nzStyle",nzTitle:"nzTitle",nzCloseIcon:"nzCloseIcon",nzMaskStyle:"nzMaskStyle",nzBodyStyle:"nzBodyStyle",nzOkText:"nzOkText",nzCancelText:"nzCancelText",nzOkType:"nzOkType",nzOkDanger:"nzOkDanger",nzIconType:"nzIconType",nzModalType:"nzModalType",nzAutofocus:"nzAutofocus",nzOnOk:"nzOnOk",nzOnCancel:"nzOnCancel"},outputs:{nzOnOk:"nzOnOk",nzOnCancel:"nzOnCancel",nzAfterOpen:"nzAfterOpen",nzAfterClose:"nzAfterClose",nzVisibleChange:"nzVisibleChange"},exportAs:["nzModal"],features:[o.TTD],decls:0,vars:0,template:function(t,i){},encapsulation:2,changeDetection:0}),(0,D.gn)([(0,T.yF)()],n.prototype,"nzMask",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzMaskClosable",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzCloseOnNavigation",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzVisible",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzClosable",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzOkLoading",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzOkDisabled",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzCancelDisabled",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzCancelLoading",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzKeyboard",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzNoAnimation",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzCentered",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzOkDanger",void 0),n})(),Ex=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({providers:[yg],imports:[C.ez,ae.vT,Ve.U8,se.T,Te.eL,Qt.YI,mi.sL,te.PV,ug,jt.g,ug]}),n})();var zr=S(6451),Mx=S(5577);function kx(n,e){if(1&n&&o._UZ(0,"span",1),2&n){const t=o.oxw();o.Q6J("nzType",t.iconType)}}let Yc=(()=>{class n{constructor(){this.formStatusChanges=new Lo.t(1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})(),xr=(()=>{class n{constructor(){this.noFormStatus=new pi.X(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac}),n})();const Fx={error:"close-circle-fill",validating:"loading",success:"check-circle-fill",warning:"exclamation-circle-fill"};let Hc=(()=>{class n{constructor(t){this.cdr=t,this.status="",this.iconType=null}ngOnChanges(t){this.updateIcon()}updateIcon(){this.iconType=this.status?Fx[this.status]:null,this.cdr.markForCheck()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-form-item-feedback-icon"]],hostAttrs:[1,"ant-form-item-feedback-icon"],hostVars:8,hostBindings:function(t,i){2&t&&o.ekj("ant-form-item-feedback-icon-error","error"===i.status)("ant-form-item-feedback-icon-warning","warning"===i.status)("ant-form-item-feedback-icon-success","success"===i.status)("ant-form-item-feedback-icon-validating","validating"===i.status)},inputs:{status:"status"},exportAs:["nzFormFeedbackIcon"],features:[o.TTD],decls:1,vars:1,consts:[["nz-icon","",3,"nzType",4,"ngIf"],["nz-icon","",3,"nzType"]],template:function(t,i){1&t&&o.YNc(0,kx,1,1,"span",0),2&t&&o.Q6J("ngIf",i.iconType)},dependencies:[C.O5,te.Ls],encapsulation:2,changeDetection:0}),n})(),Cg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[C.ez,te.PV]}),n})();const Vx=["nz-input-group-slot",""];function Rx(n,e){if(1&n&&o._UZ(0,"span",2),2&n){const t=o.oxw();o.Q6J("nzType",t.icon)}}function Lx(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Oqu(t.template)}}const zg=["*"];function Px(n,e){if(1&n&&o._UZ(0,"span",7),2&n){const t=o.oxw(2);o.Q6J("icon",t.nzAddOnBeforeIcon)("template",t.nzAddOnBefore)}}function Bx(n,e){}function Gx(n,e){if(1&n&&(o.TgZ(0,"span",8),o.YNc(1,Bx,0,0,"ng-template",9),o.qZA()),2&n){const t=o.oxw(2),i=o.MAs(4);o.ekj("ant-input-affix-wrapper-disabled",t.disabled)("ant-input-affix-wrapper-sm",t.isSmall)("ant-input-affix-wrapper-lg",t.isLarge)("ant-input-affix-wrapper-focused",t.focused),o.Q6J("ngClass",t.affixInGroupStatusCls),o.xp6(1),o.Q6J("ngTemplateOutlet",i)}}function Ux(n,e){if(1&n&&o._UZ(0,"span",7),2&n){const t=o.oxw(2);o.Q6J("icon",t.nzAddOnAfterIcon)("template",t.nzAddOnAfter)}}function Zx(n,e){if(1&n&&(o.TgZ(0,"span",4),o.YNc(1,Px,1,2,"span",5),o.YNc(2,Gx,2,10,"span",6),o.YNc(3,Ux,1,2,"span",5),o.qZA()),2&n){const t=o.oxw(),i=o.MAs(6);o.xp6(1),o.Q6J("ngIf",t.nzAddOnBefore||t.nzAddOnBeforeIcon),o.xp6(1),o.Q6J("ngIf",t.isAffix||t.hasFeedback)("ngIfElse",i),o.xp6(1),o.Q6J("ngIf",t.nzAddOnAfter||t.nzAddOnAfterIcon)}}function qx(n,e){}function $x(n,e){if(1&n&&o.YNc(0,qx,0,0,"ng-template",9),2&n){o.oxw(2);const t=o.MAs(4);o.Q6J("ngTemplateOutlet",t)}}function Qx(n,e){if(1&n&&o.YNc(0,$x,1,1,"ng-template",10),2&n){const t=o.oxw(),i=o.MAs(6);o.Q6J("ngIf",t.isAffix)("ngIfElse",i)}}function jx(n,e){if(1&n&&o._UZ(0,"span",13),2&n){const t=o.oxw(2);o.Q6J("icon",t.nzPrefixIcon)("template",t.nzPrefix)}}function Yx(n,e){}function Hx(n,e){if(1&n&&o._UZ(0,"nz-form-item-feedback-icon",16),2&n){const t=o.oxw(3);o.Q6J("status",t.status)}}function Jx(n,e){if(1&n&&(o.TgZ(0,"span",14),o.YNc(1,Hx,1,1,"nz-form-item-feedback-icon",15),o.qZA()),2&n){const t=o.oxw(2);o.Q6J("icon",t.nzSuffixIcon)("template",t.nzSuffix),o.xp6(1),o.Q6J("ngIf",t.isFeedback)}}function Kx(n,e){if(1&n&&(o.YNc(0,jx,1,2,"span",11),o.YNc(1,Yx,0,0,"ng-template",9),o.YNc(2,Jx,2,3,"span",12)),2&n){const t=o.oxw(),i=o.MAs(6);o.Q6J("ngIf",t.nzPrefix||t.nzPrefixIcon),o.xp6(1),o.Q6J("ngTemplateOutlet",i),o.xp6(1),o.Q6J("ngIf",t.nzSuffix||t.nzSuffixIcon||t.isFeedback)}}function Wx(n,e){if(1&n&&(o.TgZ(0,"span",18),o._UZ(1,"nz-form-item-feedback-icon",16),o.qZA()),2&n){const t=o.oxw(2);o.xp6(1),o.Q6J("status",t.status)}}function Xx(n,e){if(1&n&&(o.Hsn(0),o.YNc(1,Wx,2,1,"span",17)),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",!t.isAddOn&&!t.isAffix&&t.isFeedback)}}let Tr=(()=>{class n{constructor(t,i,s,r,a,l,c){this.ngControl=t,this.renderer=i,this.elementRef=s,this.hostView=r,this.directionality=a,this.nzFormStatusService=l,this.nzFormNoStatusService=c,this.nzBorderless=!1,this.nzSize="default",this.nzStatus="",this._disabled=!1,this.disabled$=new K.x,this.dir="ltr",this.prefixCls="ant-input",this.status="",this.statusCls={},this.hasFeedback=!1,this.feedbackRef=null,this.components=[],this.destroy$=new K.x,i.addClass(s.nativeElement,"ant-input")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=null!=t&&"false"!=`${t}`}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe((0,En.x)((t,i)=>t.status===i.status&&t.hasFeedback===i.hasFeedback),(0,F.R)(this.destroy$)).subscribe(({status:t,hasFeedback:i})=>{this.setStatusStyles(t,i)}),this.ngControl&&this.ngControl.statusChanges?.pipe((0,xt.h)(()=>null!==this.ngControl.disabled),(0,F.R)(this.destroy$)).subscribe(()=>{this.disabled$.next(this.ngControl.disabled)}),this.dir=this.directionality.value,this.directionality.change?.pipe((0,F.R)(this.destroy$)).subscribe(t=>{this.dir=t})}ngOnChanges(t){const{disabled:i,nzStatus:s}=t;i&&this.disabled$.next(this.disabled),s&&this.setStatusStyles(this.nzStatus,this.hasFeedback)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setStatusStyles(t,i){this.status=t,this.hasFeedback=i,this.renderFeedbackIcon(),this.statusCls=(0,T.Zu)(this.prefixCls,t,i),Object.keys(this.statusCls).forEach(s=>{this.statusCls[s]?this.renderer.addClass(this.elementRef.nativeElement,s):this.renderer.removeClass(this.elementRef.nativeElement,s)})}renderFeedbackIcon(){if(!this.status||!this.hasFeedback||this.nzFormNoStatusService)return this.hostView.clear(),void(this.feedbackRef=null);this.feedbackRef=this.feedbackRef||this.hostView.createComponent(Hc),this.feedbackRef.location.nativeElement.classList.add("ant-input-suffix"),this.feedbackRef.instance.status=this.status,this.feedbackRef.instance.updateIcon()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(zt,10),o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(o.s_b),o.Y36(ae.Is,8),o.Y36(Yc,8),o.Y36(xr,8))},n.\u0275dir=o.lG2({type:n,selectors:[["input","nz-input",""],["textarea","nz-input",""]],hostVars:11,hostBindings:function(t,i){2&t&&(o.uIk("disabled",i.disabled||null),o.ekj("ant-input-disabled",i.disabled)("ant-input-borderless",i.nzBorderless)("ant-input-lg","large"===i.nzSize)("ant-input-sm","small"===i.nzSize)("ant-input-rtl","rtl"===i.dir))},inputs:{nzBorderless:"nzBorderless",nzSize:"nzSize",nzStatus:"nzStatus",disabled:"disabled"},exportAs:["nzInput"],features:[o.TTD]}),(0,D.gn)([(0,T.yF)()],n.prototype,"nzBorderless",void 0),n})(),eT=(()=>{class n{constructor(){this.icon=null,this.type=null,this.template=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["","nz-input-group-slot",""]],hostVars:6,hostBindings:function(t,i){2&t&&o.ekj("ant-input-group-addon","addon"===i.type)("ant-input-prefix","prefix"===i.type)("ant-input-suffix","suffix"===i.type)},inputs:{icon:"icon",type:"type",template:"template"},attrs:Vx,ngContentSelectors:zg,decls:3,vars:2,consts:[["nz-icon","",3,"nzType",4,"ngIf"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType"]],template:function(t,i){1&t&&(o.F$t(),o.YNc(0,Rx,1,1,"span",0),o.YNc(1,Lx,2,1,"ng-container",1),o.Hsn(2)),2&t&&(o.Q6J("ngIf",i.icon),o.xp6(1),o.Q6J("nzStringTemplateOutlet",i.template))},dependencies:[C.O5,te.Ls,se.f],encapsulation:2,changeDetection:0}),n})(),tT=(()=>{class n{constructor(t){this.elementRef=t}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq))},n.\u0275dir=o.lG2({type:n,selectors:[["nz-input-group","nzSuffix",""],["nz-input-group","nzPrefix",""]]}),n})(),nT=(()=>{class n{constructor(t,i,s,r,a,l,c){this.focusMonitor=t,this.elementRef=i,this.renderer=s,this.cdr=r,this.directionality=a,this.nzFormStatusService=l,this.nzFormNoStatusService=c,this.nzAddOnBeforeIcon=null,this.nzAddOnAfterIcon=null,this.nzPrefixIcon=null,this.nzSuffixIcon=null,this.nzStatus="",this.nzSize="default",this.nzSearch=!1,this.nzCompact=!1,this.isLarge=!1,this.isSmall=!1,this.isAffix=!1,this.isAddOn=!1,this.isFeedback=!1,this.focused=!1,this.disabled=!1,this.dir="ltr",this.prefixCls="ant-input",this.affixStatusCls={},this.groupStatusCls={},this.affixInGroupStatusCls={},this.status="",this.hasFeedback=!1,this.destroy$=new K.x}updateChildrenInputSize(){this.listOfNzInputDirective&&this.listOfNzInputDirective.forEach(t=>t.nzSize=this.nzSize)}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe((0,En.x)((t,i)=>t.status===i.status&&t.hasFeedback===i.hasFeedback),(0,F.R)(this.destroy$)).subscribe(({status:t,hasFeedback:i})=>{this.setStatusStyles(t,i)}),this.focusMonitor.monitor(this.elementRef,!0).pipe((0,F.R)(this.destroy$)).subscribe(t=>{this.focused=!!t,this.cdr.markForCheck()}),this.dir=this.directionality.value,this.directionality.change?.pipe((0,F.R)(this.destroy$)).subscribe(t=>{this.dir=t})}ngAfterContentInit(){this.updateChildrenInputSize();const t=this.listOfNzInputDirective.changes.pipe((0,ot.O)(this.listOfNzInputDirective));t.pipe((0,yi.w)(i=>(0,zr.T)(t,...i.map(s=>s.disabled$))),(0,Mx.z)(()=>t),(0,De.U)(i=>i.some(s=>s.disabled)),(0,F.R)(this.destroy$)).subscribe(i=>{this.disabled=i,this.cdr.markForCheck()})}ngOnChanges(t){const{nzSize:i,nzSuffix:s,nzPrefix:r,nzPrefixIcon:a,nzSuffixIcon:l,nzAddOnAfter:c,nzAddOnBefore:u,nzAddOnAfterIcon:h,nzAddOnBeforeIcon:d,nzStatus:p}=t;i&&(this.updateChildrenInputSize(),this.isLarge="large"===this.nzSize,this.isSmall="small"===this.nzSize),(s||r||a||l)&&(this.isAffix=!!(this.nzSuffix||this.nzPrefix||this.nzPrefixIcon||this.nzSuffixIcon)),(c||u||h||d)&&(this.isAddOn=!!(this.nzAddOnAfter||this.nzAddOnBefore||this.nzAddOnAfterIcon||this.nzAddOnBeforeIcon),this.nzFormNoStatusService?.noFormStatus?.next(this.isAddOn)),p&&this.setStatusStyles(this.nzStatus,this.hasFeedback)}ngOnDestroy(){this.focusMonitor.stopMonitoring(this.elementRef),this.destroy$.next(),this.destroy$.complete()}setStatusStyles(t,i){this.status=t,this.hasFeedback=i,this.isFeedback=!!t&&i,this.isAffix=!!(this.nzSuffix||this.nzPrefix||this.nzPrefixIcon||this.nzSuffixIcon)||!this.isAddOn&&i,this.affixInGroupStatusCls=this.isAffix||this.isFeedback?this.affixStatusCls=(0,T.Zu)(`${this.prefixCls}-affix-wrapper`,t,i):{},this.cdr.markForCheck(),this.affixStatusCls=(0,T.Zu)(`${this.prefixCls}-affix-wrapper`,this.isAddOn?"":t,!this.isAddOn&&i),this.groupStatusCls=(0,T.Zu)(`${this.prefixCls}-group-wrapper`,this.isAddOn?t:"",!!this.isAddOn&&i);const r={...this.affixStatusCls,...this.groupStatusCls};Object.keys(r).forEach(a=>{r[a]?this.renderer.addClass(this.elementRef.nativeElement,a):this.renderer.removeClass(this.elementRef.nativeElement,a)})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(qc),o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(o.sBO),o.Y36(ae.Is,8),o.Y36(Yc,8),o.Y36(xr,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-input-group"]],contentQueries:function(t,i,s){if(1&t&&o.Suo(s,Tr,4),2&t){let r;o.iGM(r=o.CRH())&&(i.listOfNzInputDirective=r)}},hostVars:40,hostBindings:function(t,i){2&t&&o.ekj("ant-input-group-compact",i.nzCompact)("ant-input-search-enter-button",i.nzSearch)("ant-input-search",i.nzSearch)("ant-input-search-rtl","rtl"===i.dir)("ant-input-search-sm",i.nzSearch&&i.isSmall)("ant-input-search-large",i.nzSearch&&i.isLarge)("ant-input-group-wrapper",i.isAddOn)("ant-input-group-wrapper-rtl","rtl"===i.dir)("ant-input-group-wrapper-lg",i.isAddOn&&i.isLarge)("ant-input-group-wrapper-sm",i.isAddOn&&i.isSmall)("ant-input-affix-wrapper",i.isAffix&&!i.isAddOn)("ant-input-affix-wrapper-rtl","rtl"===i.dir)("ant-input-affix-wrapper-focused",i.isAffix&&i.focused)("ant-input-affix-wrapper-disabled",i.isAffix&&i.disabled)("ant-input-affix-wrapper-lg",i.isAffix&&!i.isAddOn&&i.isLarge)("ant-input-affix-wrapper-sm",i.isAffix&&!i.isAddOn&&i.isSmall)("ant-input-group",!i.isAffix&&!i.isAddOn)("ant-input-group-rtl","rtl"===i.dir)("ant-input-group-lg",!i.isAffix&&!i.isAddOn&&i.isLarge)("ant-input-group-sm",!i.isAffix&&!i.isAddOn&&i.isSmall)},inputs:{nzAddOnBeforeIcon:"nzAddOnBeforeIcon",nzAddOnAfterIcon:"nzAddOnAfterIcon",nzPrefixIcon:"nzPrefixIcon",nzSuffixIcon:"nzSuffixIcon",nzAddOnBefore:"nzAddOnBefore",nzAddOnAfter:"nzAddOnAfter",nzPrefix:"nzPrefix",nzStatus:"nzStatus",nzSuffix:"nzSuffix",nzSize:"nzSize",nzSearch:"nzSearch",nzCompact:"nzCompact"},exportAs:["nzInputGroup"],features:[o._Bn([xr]),o.TTD],ngContentSelectors:zg,decls:7,vars:2,consts:[["class","ant-input-wrapper ant-input-group",4,"ngIf","ngIfElse"],["noAddOnTemplate",""],["affixTemplate",""],["contentTemplate",""],[1,"ant-input-wrapper","ant-input-group"],["nz-input-group-slot","","type","addon",3,"icon","template",4,"ngIf"],["class","ant-input-affix-wrapper",3,"ant-input-affix-wrapper-disabled","ant-input-affix-wrapper-sm","ant-input-affix-wrapper-lg","ant-input-affix-wrapper-focused","ngClass",4,"ngIf","ngIfElse"],["nz-input-group-slot","","type","addon",3,"icon","template"],[1,"ant-input-affix-wrapper",3,"ngClass"],[3,"ngTemplateOutlet"],[3,"ngIf","ngIfElse"],["nz-input-group-slot","","type","prefix",3,"icon","template",4,"ngIf"],["nz-input-group-slot","","type","suffix",3,"icon","template",4,"ngIf"],["nz-input-group-slot","","type","prefix",3,"icon","template"],["nz-input-group-slot","","type","suffix",3,"icon","template"],[3,"status",4,"ngIf"],[3,"status"],["nz-input-group-slot","","type","suffix",4,"ngIf"],["nz-input-group-slot","","type","suffix"]],template:function(t,i){if(1&t&&(o.F$t(),o.YNc(0,Zx,4,4,"span",0),o.YNc(1,Qx,1,2,"ng-template",null,1,o.W1O),o.YNc(3,Kx,3,3,"ng-template",null,2,o.W1O),o.YNc(5,Xx,2,1,"ng-template",null,3,o.W1O)),2&t){const s=o.MAs(2);o.Q6J("ngIf",i.isAddOn)("ngIfElse",s)}},dependencies:[C.mk,C.O5,C.tP,Hc,eT],encapsulation:2,changeDetection:0}),(0,D.gn)([(0,T.yF)()],n.prototype,"nzSearch",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzCompact",void 0),n})(),iT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ae.vT,C.ez,te.PV,we.ud,se.T,Cg]}),n})();function oT(n,e){1&n&&(o.TgZ(0,"div"),o._uU(1," Please provide a name. "),o.qZA())}function sT(n,e){if(1&n&&(o.ynx(0),o.TgZ(1,"form",2)(2,"div")(3,"label"),o._uU(4," Name: "),o._UZ(5,"input",3),o.qZA(),o.YNc(6,oT,2,0,"div",4),o.qZA(),o.TgZ(7,"div")(8,"label"),o._uU(9," Description: "),o._UZ(10,"input",5),o.qZA()()(),o.BQk()),2&n){const t=o.oxw();let i;o.xp6(1),o.Q6J("formGroup",t.createIssueForm),o.xp6(5),o.Q6J("ngIf",(null==(i=t.createIssueForm.get("name"))?null:i.invalid)&&((null==(i=t.createIssueForm.get("name"))?null:i.dirty)||(null==(i=t.createIssueForm.get("name"))?null:i.touched)))}}let rT=(()=>{class n{constructor(t){this.issueService=t,this.isVisible=!1,this.cancelCreation=new o.vpe,this.createIssueForm=new Oo({name:new $t("",Dz.required),description:new $t(""),createdUserId:new $t(this.createdUserId)})}handleOk(){this.issueService.create(this.gameId,{...this.createIssueForm.value,createdTime:Date.now()}),this.cancelCreation.emit()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Uf))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-create-issue"]],inputs:{isVisible:"isVisible",gameId:"gameId",createdUserId:"createdUserId"},outputs:{cancelCreation:"cancelCreation"},decls:2,vars:1,consts:[["nzTitle","New Issue",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[3,"formGroup"],["nz-input","","type","text","id","name","formControlName","name"],[4,"ngIf"],["nz-input","","type","text","id","email","formControlName","description"]],template:function(t,i){1&t&&(o.TgZ(0,"nz-modal",0),o.NdJ("nzVisibleChange",function(r){return i.isVisible=r})("nzOnCancel",function(){return i.cancelCreation.emit()})("nzOnOk",function(){return i.handleOk()}),o.YNc(1,sT,11,2,"ng-container",1),o.qZA()),2&t&&o.Q6J("nzVisible",i.isVisible)},dependencies:[C.O5,vg,jc,Fc,ui,So,Ic,Mo,fr,Tr]}),n})();function aT(n,e){1&n&&(o.TgZ(0,"h5"),o._uU(1,"Author"),o.qZA())}function lT(n,e){if(1&n&&(o.TgZ(0,"li")(1,"div",12)(2,"div",13)(3,"div",14),o._UZ(4,"span",15),o.qZA(),o.TgZ(5,"div",16)(6,"h5"),o._uU(7),o.qZA(),o.TgZ(8,"h6"),o._uU(9),o.qZA(),o.YNc(10,aT,2,0,"h5",0),o.qZA()()()()),2&n){const t=e.$implicit,i=o.oxw().ngIf;o.xp6(7),o.Oqu(t.name),o.xp6(2),o.Oqu(t.description),o.xp6(1),o.Q6J("ngIf",i===t.createdUserId)}}function cT(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"aside",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div")(6,"h2"),o._uU(7,"Issues"),o.qZA(),o.TgZ(8,"div",5),o._uU(9,"List of issues"),o.qZA()(),o.TgZ(10,"div",6)(11,"span",7),o.NdJ("click",function(){o.CHM(t);const s=o.oxw(2);return o.KtG(s.showCreateIssue=!0)}),o.qZA(),o._UZ(12,"span",8),o.qZA()(),o.TgZ(13,"ul",9),o.YNc(14,lT,11,3,"li",10),o.ALo(15,"async"),o.qZA()()()(),o.TgZ(16,"app-create-issue",11),o.NdJ("cancelCreation",function(){o.CHM(t);const s=o.oxw(2);return o.KtG(s.showCreateIssue=!1)}),o.qZA(),o.BQk()}if(2&n){const t=e.ngIf,i=o.oxw().ngIf,s=o.oxw();o.xp6(14),o.Q6J("ngForOf",o.lcZ(15,4,s.issue$)),o.xp6(2),o.Q6J("gameId",i)("createdUserId",t)("isVisible",s.showCreateIssue)}}function uT(n,e){if(1&n&&(o.ynx(0),o.YNc(1,cT,17,6,"ng-container",0),o.ALo(2,"async"),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",o.lcZ(2,1,t.authService.currentUserId$))}}let hT=(()=>{class n{constructor(t,i){this.issueService=t,this.authService=i,this.gameId$=new Lo.t(1),this.showCreateIssue=!1,this.issue$=this.setupIssue(this.gameId$.asObservable())}set gameId(t){this.gameId$.next(t)}setupIssue(t){return t.pipe((0,yi.w)(i=>this.issueService.fetch$(i)))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Uf),o.Y36(zz.e))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-issue-box"]],inputs:{gameId:"gameId"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"left-display"],[1,"tab-pane","active"],[1,"document-tab"],[1,"theme-title"],[1,"sub-text"],[1,"media-body"],["nz-icon","","nzType","plus-circle","nzTheme","fill",3,"click"],["nz-icon","","nzType","close-circle","nzTheme","fill"],[1,"chat-main"],[4,"ngFor","ngForOf"],[3,"gameId","createdUserId","isVisible","cancelCreation"],[1,"chat-box"],[1,"media"],[1,"profile"],["nz-icon","","nzType","tag","nzTheme","fill"],[1,"details"]],template:function(t,i){1&t&&(o.YNc(0,uT,3,3,"ng-container",0),o.ALo(1,"async")),2&t&&o.Q6J("ngIf",o.lcZ(1,1,i.gameId$))},dependencies:[C.sg,C.O5,te.Ls,$e.w,rT,C.Ov],styles:["[_ngcontent-%COMP%]:root{--green: #005C53;--blue: #042940;--cyan: #45C4B0;--pink: #F2668B;--yellow: #F2C94C;--orange: #F2994A;--red: #D92525;--grey: #A67458}.left-display[_ngcontent-%COMP%]{min-width:400px;width:400px;animation:fadeInright .3s ease-in-out;transition:all .3s ease;max-height:100vh;overflow:hidden;display:block;height:100vh}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]{padding:40px 20px;min-height:100vh;overflow:auto;overflow-x:hidden;top:0;bottom:0;background-color:#fff;z-index:0;width:400px;min-width:400px}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   .theme-title[_ngcontent-%COMP%]{display:grid;grid-template-columns:3fr 1fr}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   .theme-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;padding-top:5px;font-size:30px;font-weight:600}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   .theme-title[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{font-size:14px;margin-bottom:20px;color:#647589;text-align:left!important;margin-top:-20px}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   .media-body[_ngcontent-%COMP%]   .anticon[_ngcontent-%COMP%]{font-size:32px;color:#1c9dea;margin-right:10px;cursor:pointer}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   .chat-main[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:calc(100vh - 95px);min-height:calc(100vh - 95px);overflow:auto;overflow-x:hidden;background-blend-mode:overlay}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   .chat-main[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]{display:flex;align-items:flex-start}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   .chat-main[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   .profile[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:20px;position:relative;background-color:#1c9dea26!important;display:flex;align-items:center;justify-content:center;padding-left:10px}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   .chat-main[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]{padding-top:8px;padding-bottom:5px;padding-left:16px;width:300px}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   .chat-main[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   .chat-main[_ngcontent-%COMP%]   .media[_ngcontent-%COMP%]   .anticon[_ngcontent-%COMP%]{font-size:20px;color:#1c9dea!important;margin-right:10px;cursor:pointer}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   .chat-main[_ngcontent-%COMP%]   .chat-box[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.left-display[_ngcontent-%COMP%]   .tab-pane[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;margin-bottom:0;padding:8px 0}"]}),n})(),dT=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-game"]],decls:64,vars:0,consts:[[1,"game-container"],[1,"card","voted"],[1,"front"],[1,"avatar-circle"],[1,"initials"],[1,"back"],[1,"card"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"span",4),o._uU(5,"AB"),o.qZA()()(),o.TgZ(6,"div",5),o._uU(7,"some text"),o.qZA()(),o.TgZ(8,"div",6)(9,"div",2)(10,"div",3)(11,"span",4),o._uU(12,"VJ"),o.qZA()()(),o.TgZ(13,"div",5),o._uU(14,"some text"),o.qZA()(),o.TgZ(15,"div",1)(16,"div",2)(17,"div",3)(18,"span",4),o._uU(19,"VF"),o.qZA()()(),o.TgZ(20,"div",5),o._uU(21,"some text"),o.qZA()(),o.TgZ(22,"div",6)(23,"div",2)(24,"div",3)(25,"span",4),o._uU(26,"AB"),o.qZA()()(),o.TgZ(27,"div",5),o._uU(28,"some text"),o.qZA()(),o.TgZ(29,"div",6)(30,"div",2)(31,"div",3)(32,"span",4),o._uU(33,"AB"),o.qZA()()(),o.TgZ(34,"div",5),o._uU(35,"some text"),o.qZA()(),o.TgZ(36,"div",6)(37,"div",2)(38,"div",3)(39,"span",4),o._uU(40,"AB"),o.qZA()()(),o.TgZ(41,"div",5),o._uU(42,"some text"),o.qZA()(),o.TgZ(43,"div",6)(44,"div",2)(45,"div",3)(46,"span",4),o._uU(47,"AB"),o.qZA()()(),o.TgZ(48,"div",5),o._uU(49,"some text"),o.qZA()(),o.TgZ(50,"div",6)(51,"div",2)(52,"div",3)(53,"span",4),o._uU(54,"AB"),o.qZA()()(),o.TgZ(55,"div",5),o._uU(56,"some text"),o.qZA()(),o.TgZ(57,"div",1)(58,"div",2)(59,"div",3)(60,"span",4),o._uU(61,"AB"),o.qZA()()(),o.TgZ(62,"div",5),o._uU(63,"some text"),o.qZA()()())},styles:["[_ngcontent-%COMP%]:root{--green: #005C53;--blue: #042940;--cyan: #45C4B0;--pink: #F2668B;--yellow: #F2C94C;--orange: #F2994A;--red: #D92525;--grey: #A67458}.game-container[_ngcontent-%COMP%]{flex-wrap:wrap;display:flex;justify-content:center;align-content:flex-start;flex:1;overflow:auto;padding:30px;gap:12px;height:calc(100vh - 77px)}.game-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:100px;height:150px;position:relative;font-family:Syne Mono,monospace;cursor:pointer;border:5px solid #fff;display:flex;align-items:center;justify-content:center;border-radius:12px;background-image:conic-gradient(#a8d9f7 25%,#fff 25%,#fff 50%,#a8d9f7 50%,#a8d9f7 75%,#fff 75%);background-size:5px 5px}.game-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .front[_ngcontent-%COMP%]{display:block}.game-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .back[_ngcontent-%COMP%]{display:none}.game-container[_ngcontent-%COMP%]   .voted[_ngcontent-%COMP%]{box-shadow:4px 4px 4px #1c9dea;-webkit-box-shadow:4px 4px 4px 0 #1c9dea;-moz-box-shadow:4px 4px 4px 0 #1c9dea}.game-container[_ngcontent-%COMP%]   .avatar-circle[_ngcontent-%COMP%]{width:50px;height:50px;background-color:#1c9dea;text-align:center;border-radius:50%;-webkit-border-radius:50%;-moz-border-radius:50%}.game-container[_ngcontent-%COMP%]   .initials[_ngcontent-%COMP%]{position:relative;top:12.5px;font-size:25px;line-height:25px;color:#fff;font-family:Courier New,monospace;font-weight:700}"]}),n})();const pT=["drawerTemplate"];function fT(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",11),o.NdJ("click",function(){o.CHM(t);const s=o.oxw(2);return o.KtG(s.maskClick())}),o.qZA()}if(2&n){const t=o.oxw(2);o.Q6J("ngStyle",t.nzMaskStyle)}}function mT(n,e){if(1&n&&(o.ynx(0),o._UZ(1,"span",19),o.BQk()),2&n){const t=e.$implicit;o.xp6(1),o.Q6J("nzType",t)}}function gT(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"button",17),o.NdJ("click",function(){o.CHM(t);const s=o.oxw(3);return o.KtG(s.closeClick())}),o.YNc(1,mT,2,1,"ng-container",18),o.qZA()}if(2&n){const t=o.oxw(3);o.xp6(1),o.Q6J("nzStringTemplateOutlet",t.nzCloseIcon)}}function _T(n,e){if(1&n&&(o.ynx(0),o._UZ(1,"div",21),o.BQk()),2&n){const t=o.oxw(4);o.xp6(1),o.Q6J("innerHTML",t.nzTitle,o.oJD)}}function yT(n,e){if(1&n&&(o.TgZ(0,"div",20),o.YNc(1,_T,2,1,"ng-container",18),o.qZA()),2&n){const t=o.oxw(3);o.xp6(1),o.Q6J("nzStringTemplateOutlet",t.nzTitle)}}function vT(n,e){if(1&n&&(o.ynx(0),o._UZ(1,"div",21),o.BQk()),2&n){const t=o.oxw(4);o.xp6(1),o.Q6J("innerHTML",t.nzExtra,o.oJD)}}function CT(n,e){if(1&n&&(o.TgZ(0,"div",22),o.YNc(1,vT,2,1,"ng-container",18),o.qZA()),2&n){const t=o.oxw(3);o.xp6(1),o.Q6J("nzStringTemplateOutlet",t.nzExtra)}}function zT(n,e){if(1&n&&(o.TgZ(0,"div",12)(1,"div",13),o.YNc(2,gT,2,1,"button",14),o.YNc(3,yT,2,1,"div",15),o.qZA(),o.YNc(4,CT,2,1,"div",16),o.qZA()),2&n){const t=o.oxw(2);o.ekj("ant-drawer-header-close-only",!t.nzTitle),o.xp6(2),o.Q6J("ngIf",t.nzClosable),o.xp6(1),o.Q6J("ngIf",t.nzTitle),o.xp6(1),o.Q6J("ngIf",t.nzExtra)}}function xT(n,e){}function TT(n,e){1&n&&o.GkF(0)}function wT(n,e){if(1&n&&(o.ynx(0),o.YNc(1,TT,1,0,"ng-container",24),o.BQk()),2&n){const t=o.oxw(3);o.xp6(1),o.Q6J("ngTemplateOutlet",t.nzContent)("ngTemplateOutletContext",t.templateContext)}}function IT(n,e){if(1&n&&(o.ynx(0),o.YNc(1,wT,2,2,"ng-container",23),o.BQk()),2&n){const t=o.oxw(2);o.xp6(1),o.Q6J("ngIf",t.isTemplateRef(t.nzContent))}}function bT(n,e){}function ST(n,e){if(1&n&&(o.ynx(0),o.YNc(1,bT,0,0,"ng-template",25),o.BQk()),2&n){const t=o.oxw(3);o.xp6(1),o.Q6J("ngTemplateOutlet",t.contentFromContentChild)}}function NT(n,e){if(1&n&&o.YNc(0,ST,2,1,"ng-container",23),2&n){const t=o.oxw(2);o.Q6J("ngIf",t.contentFromContentChild&&(t.isOpen||t.inAnimation))}}function AT(n,e){if(1&n&&(o.ynx(0),o._UZ(1,"div",21),o.BQk()),2&n){const t=o.oxw(3);o.xp6(1),o.Q6J("innerHTML",t.nzFooter,o.oJD)}}function OT(n,e){if(1&n&&(o.TgZ(0,"div",26),o.YNc(1,AT,2,1,"ng-container",18),o.qZA()),2&n){const t=o.oxw(2);o.xp6(1),o.Q6J("nzStringTemplateOutlet",t.nzFooter)}}function DT(n,e){if(1&n&&(o.TgZ(0,"div",1),o.YNc(1,fT,1,1,"div",2),o.TgZ(2,"div")(3,"div",3)(4,"div",4),o.YNc(5,zT,5,5,"div",5),o.TgZ(6,"div",6),o.YNc(7,xT,0,0,"ng-template",7),o.YNc(8,IT,2,1,"ng-container",8),o.YNc(9,NT,1,1,"ng-template",null,9,o.W1O),o.qZA(),o.YNc(11,OT,2,1,"div",10),o.qZA()()()()),2&n){const t=o.MAs(10),i=o.oxw();o.Udp("transform",i.offsetTransform)("transition",i.placementChanging?"none":null)("z-index",i.nzZIndex),o.ekj("ant-drawer-rtl","rtl"===i.dir)("ant-drawer-open",i.isOpen)("no-mask",!i.nzMask)("ant-drawer-top","top"===i.nzPlacement)("ant-drawer-bottom","bottom"===i.nzPlacement)("ant-drawer-right","right"===i.nzPlacement)("ant-drawer-left","left"===i.nzPlacement),o.Q6J("nzNoAnimation",i.nzNoAnimation),o.xp6(1),o.Q6J("ngIf",i.nzMask),o.xp6(1),o.Gre("ant-drawer-content-wrapper ",i.nzWrapClassName,""),o.Udp("width",i.width)("height",i.height)("transform",i.transform)("transition",i.placementChanging?"none":null),o.xp6(2),o.Udp("height",i.isLeftOrRight?"100%":null),o.xp6(1),o.Q6J("ngIf",i.nzTitle||i.nzClosable),o.xp6(1),o.Q6J("ngStyle",i.nzBodyStyle),o.xp6(2),o.Q6J("ngIf",i.nzContent)("ngIfElse",t),o.xp6(3),o.Q6J("ngIf",i.nzFooter)}}let xg=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.Rgc))},n.\u0275dir=o.lG2({type:n,selectors:[["","nzDrawerContent",""]],exportAs:["nzDrawerContent"]}),n})();class Ig{}let bg=(()=>{class n extends Ig{constructor(t,i,s,r,a,l,c,u,h,d,p){super(),this.cdr=t,this.document=i,this.nzConfigService=s,this.renderer=r,this.overlay=a,this.injector=l,this.changeDetectorRef=c,this.focusTrapFactory=u,this.viewContainerRef=h,this.overlayKeyboardDispatcher=d,this.directionality=p,this._nzModuleName="drawer",this.nzCloseIcon="close",this.nzClosable=!0,this.nzMaskClosable=!0,this.nzMask=!0,this.nzCloseOnNavigation=!0,this.nzNoAnimation=!1,this.nzKeyboard=!0,this.nzPlacement="right",this.nzSize="default",this.nzMaskStyle={},this.nzBodyStyle={},this.nzZIndex=1e3,this.nzOffsetX=0,this.nzOffsetY=0,this.componentInstance=null,this.nzOnViewInit=new o.vpe,this.nzOnClose=new o.vpe,this.nzVisibleChange=new o.vpe,this.destroy$=new K.x,this.placementChanging=!1,this.placementChangeTimeoutId=-1,this.isOpen=!1,this.inAnimation=!1,this.templateContext={$implicit:void 0,drawerRef:this},this.nzAfterOpen=new K.x,this.nzAfterClose=new K.x,this.nzDirection=void 0,this.dir="ltr"}set nzVisible(t){this.isOpen=t}get nzVisible(){return this.isOpen}get offsetTransform(){if(!this.isOpen||this.nzOffsetX+this.nzOffsetY===0)return null;switch(this.nzPlacement){case"left":return`translateX(${this.nzOffsetX}px)`;case"right":return`translateX(-${this.nzOffsetX}px)`;case"top":return`translateY(${this.nzOffsetY}px)`;case"bottom":return`translateY(-${this.nzOffsetY}px)`}}get transform(){if(this.isOpen)return null;switch(this.nzPlacement){case"left":return"translateX(-100%)";case"right":return"translateX(100%)";case"top":return"translateY(-100%)";case"bottom":return"translateY(100%)"}}get width(){if(this.isLeftOrRight){const t="large"===this.nzSize?736:378;return(0,T.WX)(void 0===this.nzWidth?t:this.nzWidth)}return null}get height(){if(!this.isLeftOrRight){const t="large"===this.nzSize?736:378;return(0,T.WX)(void 0===this.nzHeight?t:this.nzHeight)}return null}get isLeftOrRight(){return"left"===this.nzPlacement||"right"===this.nzPlacement}get afterOpen(){return this.nzAfterOpen.asObservable()}get afterClose(){return this.nzAfterClose.asObservable()}isTemplateRef(t){return t instanceof o.Rgc}ngOnInit(){this.directionality.change?.pipe((0,F.R)(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.nzDirection||this.directionality.value,this.attachOverlay(),this.updateOverlayStyle(),this.updateBodyOverflow(),this.templateContext={$implicit:this.nzContentParams,drawerRef:this},this.changeDetectorRef.detectChanges()}ngAfterViewInit(){this.attachBodyContent(),this.nzOnViewInit.observers.length&&setTimeout(()=>{this.nzOnViewInit.emit()})}ngOnChanges(t){const{nzPlacement:i,nzVisible:s}=t;s&&(t.nzVisible.currentValue?this.open():this.close()),i&&!i.isFirstChange()&&this.triggerPlacementChangeCycleOnce()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),clearTimeout(this.placementChangeTimeoutId),this.disposeOverlay()}getAnimationDuration(){return this.nzNoAnimation?0:300}triggerPlacementChangeCycleOnce(){this.nzNoAnimation||(this.placementChanging=!0,this.changeDetectorRef.markForCheck(),clearTimeout(this.placementChangeTimeoutId),this.placementChangeTimeoutId=setTimeout(()=>{this.placementChanging=!1,this.changeDetectorRef.markForCheck()},this.getAnimationDuration()))}close(t){this.isOpen=!1,this.inAnimation=!0,this.nzVisibleChange.emit(!1),this.updateOverlayStyle(),this.overlayKeyboardDispatcher.remove(this.overlayRef),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.updateBodyOverflow(),this.restoreFocus(),this.inAnimation=!1,this.nzAfterClose.next(t),this.nzAfterClose.complete(),this.componentInstance=null},this.getAnimationDuration())}open(){this.attachOverlay(),this.isOpen=!0,this.inAnimation=!0,this.nzVisibleChange.emit(!0),this.overlayKeyboardDispatcher.add(this.overlayRef),this.updateOverlayStyle(),this.updateBodyOverflow(),this.savePreviouslyFocusedElement(),this.trapFocus(),this.changeDetectorRef.detectChanges(),setTimeout(()=>{this.inAnimation=!1,this.changeDetectorRef.detectChanges(),this.nzAfterOpen.next()},this.getAnimationDuration())}getContentComponent(){return this.componentInstance}closeClick(){this.nzOnClose.emit()}maskClick(){this.nzMaskClosable&&this.nzMask&&this.nzOnClose.emit()}attachBodyContent(){if(this.bodyPortalOutlet.dispose(),this.nzContent instanceof o.DyG){const t=o.zs3.create({parent:this.injector,providers:[{provide:Ig,useValue:this}]}),i=new Te.C5(this.nzContent,null,t),s=this.bodyPortalOutlet.attachComponentPortal(i);this.componentInstance=s.instance,Object.assign(s.instance,this.nzContentParams),s.changeDetectorRef.detectChanges()}}attachOverlay(){this.overlayRef||(this.portal=new Te.UE(this.drawerTemplate,this.viewContainerRef),this.overlayRef=this.overlay.create(this.getOverlayConfig())),this.overlayRef&&!this.overlayRef.hasAttached()&&(this.overlayRef.attach(this.portal),this.overlayRef.keydownEvents().pipe((0,F.R)(this.destroy$)).subscribe(t=>{t.keyCode===Re.hY&&this.isOpen&&this.nzKeyboard&&this.nzOnClose.emit()}),this.overlayRef.detachments().pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.disposeOverlay()}))}disposeOverlay(){this.overlayRef?.dispose(),this.overlayRef=null}getOverlayConfig(){return new Ve.X_({disposeOnNavigation:this.nzCloseOnNavigation,positionStrategy:this.overlay.position().global(),scrollStrategy:this.overlay.scrollStrategies.block()})}updateOverlayStyle(){this.overlayRef&&this.overlayRef.overlayElement&&this.renderer.setStyle(this.overlayRef.overlayElement,"pointer-events",this.isOpen?"auto":"none")}updateBodyOverflow(){this.overlayRef&&(this.isOpen?this.overlayRef.getConfig().scrollStrategy.enable():this.overlayRef.getConfig().scrollStrategy.disable())}savePreviouslyFocusedElement(){this.document&&!this.previouslyFocusedElement&&(this.previouslyFocusedElement=this.document.activeElement,this.previouslyFocusedElement&&"function"==typeof this.previouslyFocusedElement.blur&&this.previouslyFocusedElement.blur())}trapFocus(){!this.focusTrap&&this.overlayRef&&this.overlayRef.overlayElement&&(this.focusTrap=this.focusTrapFactory.create(this.overlayRef.overlayElement),this.focusTrap.focusInitialElement())}restoreFocus(){this.previouslyFocusedElement&&"function"==typeof this.previouslyFocusedElement.focus&&this.previouslyFocusedElement.focus(),this.focusTrap&&this.focusTrap.destroy()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.sBO),o.Y36(C.K0,8),o.Y36(j.jY),o.Y36(o.Qsj),o.Y36(Ve.aV),o.Y36(o.zs3),o.Y36(o.sBO),o.Y36(Zc),o.Y36(o.s_b),o.Y36(Ve.Vs),o.Y36(ae.Is,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-drawer"]],contentQueries:function(t,i,s){if(1&t&&o.Suo(s,xg,7,o.Rgc),2&t){let r;o.iGM(r=o.CRH())&&(i.contentFromContentChild=r.first)}},viewQuery:function(t,i){if(1&t&&(o.Gf(pT,7),o.Gf(Te.Pl,5)),2&t){let s;o.iGM(s=o.CRH())&&(i.drawerTemplate=s.first),o.iGM(s=o.CRH())&&(i.bodyPortalOutlet=s.first)}},inputs:{nzContent:"nzContent",nzCloseIcon:"nzCloseIcon",nzClosable:"nzClosable",nzMaskClosable:"nzMaskClosable",nzMask:"nzMask",nzCloseOnNavigation:"nzCloseOnNavigation",nzNoAnimation:"nzNoAnimation",nzKeyboard:"nzKeyboard",nzTitle:"nzTitle",nzExtra:"nzExtra",nzFooter:"nzFooter",nzPlacement:"nzPlacement",nzSize:"nzSize",nzMaskStyle:"nzMaskStyle",nzBodyStyle:"nzBodyStyle",nzWrapClassName:"nzWrapClassName",nzWidth:"nzWidth",nzHeight:"nzHeight",nzZIndex:"nzZIndex",nzOffsetX:"nzOffsetX",nzOffsetY:"nzOffsetY",nzVisible:"nzVisible"},outputs:{nzOnViewInit:"nzOnViewInit",nzOnClose:"nzOnClose",nzVisibleChange:"nzVisibleChange"},exportAs:["nzDrawer"],features:[o.qOj,o.TTD],decls:2,vars:0,consts:[["drawerTemplate",""],[1,"ant-drawer",3,"nzNoAnimation"],["class","ant-drawer-mask",3,"ngStyle","click",4,"ngIf"],[1,"ant-drawer-content"],[1,"ant-drawer-wrapper-body"],["class","ant-drawer-header",3,"ant-drawer-header-close-only",4,"ngIf"],[1,"ant-drawer-body",3,"ngStyle"],["cdkPortalOutlet",""],[4,"ngIf","ngIfElse"],["contentElseTemp",""],["class","ant-drawer-footer",4,"ngIf"],[1,"ant-drawer-mask",3,"ngStyle","click"],[1,"ant-drawer-header"],[1,"ant-drawer-header-title"],["aria-label","Close","class","ant-drawer-close","style","--scroll-bar: 0px;",3,"click",4,"ngIf"],["class","ant-drawer-title",4,"ngIf"],["class","ant-drawer-extra",4,"ngIf"],["aria-label","Close",1,"ant-drawer-close",2,"--scroll-bar","0px",3,"click"],[4,"nzStringTemplateOutlet"],["nz-icon","",3,"nzType"],[1,"ant-drawer-title"],[3,"innerHTML"],[1,"ant-drawer-extra"],[4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngTemplateOutlet"],[1,"ant-drawer-footer"]],template:function(t,i){1&t&&o.YNc(0,DT,12,40,"ng-template",null,0,o.W1O)},dependencies:[C.O5,C.tP,C.PC,Te.Pl,te.Ls,se.f,jt.P],encapsulation:2,changeDetection:0}),(0,D.gn)([(0,T.yF)()],n.prototype,"nzClosable",void 0),(0,D.gn)([(0,j.oS)(),(0,T.yF)()],n.prototype,"nzMaskClosable",void 0),(0,D.gn)([(0,j.oS)(),(0,T.yF)()],n.prototype,"nzMask",void 0),(0,D.gn)([(0,j.oS)(),(0,T.yF)()],n.prototype,"nzCloseOnNavigation",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzNoAnimation",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzKeyboard",void 0),(0,D.gn)([(0,j.oS)()],n.prototype,"nzDirection",void 0),n})(),kT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({}),n})(),FT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ae.vT,C.ez,Ve.U8,Te.eL,te.PV,se.T,jt.g,kT]}),n})();function VT(n,e){if(1&n&&(o.TgZ(0,"div",2),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.xp6(1),o.hij(" ",t," ")}}const RT=function(){return[0,1,2,3,4,5,6,7,8,9,10]};let LT=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-poker-cards"]],decls:2,vars:2,consts:[[1,"card-deck"],["class","card",4,"ngFor","ngForOf"],[1,"card"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o.YNc(1,VT,2,1,"div",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngForOf",o.DdM(1,RT)))},dependencies:[C.sg],styles:["[_ngcontent-%COMP%]:root{--green: #005C53;--blue: #042940;--cyan: #45C4B0;--pink: #F2668B;--yellow: #F2C94C;--orange: #F2994A;--red: #D92525;--grey: #A67458}.card-deck[_ngcontent-%COMP%]{padding:0 10px;position:relative;z-index:999;display:flex;flex-wrap:wrap;overflow:hidden;height:85px}"]}),n})();function PT(n,e){if(1&n&&(o.TgZ(0,"div",14),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.xp6(1),o.hij(" ",t.label," ")}}function BT(n,e){if(1&n&&(o.ynx(0),o.TgZ(1,"div",5)(2,"div",6),o.YNc(3,PT,2,1,"div",7),o.qZA(),o.TgZ(4,"div",8)(5,"div",9)(6,"div",10)(7,"div"),o._UZ(8,"span",11),o.TgZ(9,"h6",12),o._uU(10,"9"),o.qZA(),o.TgZ(11,"span",13),o._uU(12,"Vote average "),o.qZA()()()()()(),o.BQk()),2&n){const t=o.oxw();o.xp6(3),o.Q6J("ngForOf",t.selectedCardValues)}}let GT=(()=>{class n{constructor(){this.visible=!1,this.selectedCardValues=[{value:"3",label:"1"},{value:"5",label:"2"},{value:"6",label:"3"},{value:"2",label:"4"}]}showGameSummary(){this.visible=!0}close(){this.visible=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-game-controls"]],decls:7,vars:3,consts:[[1,"game-control-container"],["nz-button","","nzType","primary","nzSize","large","nzShape","round",3,"click"],["nz-icon","","nzType","robot","nzTheme","outline"],["nzTitle","Game summary","nzPlacement","bottom",3,"nzVisible","nzHeight","nzClosable","nzOnClose"],[4,"nzDrawerContent"],[1,"card-summary-container"],[1,"card-summary"],["class","card",4,"ngFor","ngForOf"],[1,"card-average"],[1,"counter-box-second"],[1,"counter-box"],["nz-icon","","nzType","alert","nzTheme","outline"],[1,"counter-no","count"],[1,"text"],[1,"card"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o._UZ(1,"app-poker-cards"),o.TgZ(2,"button",1),o.NdJ("click",function(){return i.showGameSummary()}),o._UZ(3,"span",2),o._uU(4," Reveal cards "),o.qZA()(),o.TgZ(5,"nz-drawer",3),o.NdJ("nzOnClose",function(){return i.close()}),o.YNc(6,BT,13,1,"ng-container",4),o.qZA()),2&t&&(o.xp6(5),o.Q6J("nzVisible",i.visible)("nzHeight",250)("nzClosable",!0))},dependencies:[C.sg,te.Ls,mi.ix,$e.w,_r.dQ,bg,xg,LT],styles:["[_ngcontent-%COMP%]:root{--green: #005C53;--blue: #042940;--cyan: #45C4B0;--pink: #F2668B;--yellow: #F2C94C;--orange: #F2994A;--red: #D92525;--grey: #A67458}.game-control-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;height:80px;background-color:#fff}.game-control-container[_ngcontent-%COMP%]   .ant-btn-primary[_ngcontent-%COMP%]{color:#fff!important;margin-right:10px}.card-summary-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 200px}.card-summary-container[_ngcontent-%COMP%]   .card-summary[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto;display:flex;flex-wrap:wrap}.card-summary-container[_ngcontent-%COMP%]   .card-average[_ngcontent-%COMP%]   .counter-box-second[_ngcontent-%COMP%]{width:150px;height:150px;border-radius:30px;transition:box-shadow 1s;display:flex;justify-content:center;align-items:center;background:#eff7fe}.card-summary-container[_ngcontent-%COMP%]   .card-average[_ngcontent-%COMP%]   .counter-box-second[_ngcontent-%COMP%]   .anticon[_ngcontent-%COMP%]{font-size:30px;color:#1c9dea}.card-summary-container[_ngcontent-%COMP%]   .card-average[_ngcontent-%COMP%]   .counter-box-second[_ngcontent-%COMP%]   .counter-box[_ngcontent-%COMP%]{text-align:center}.card-summary-container[_ngcontent-%COMP%]   .card-average[_ngcontent-%COMP%]   .counter-box-second[_ngcontent-%COMP%]   .counter-box[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{font-size:22px}.card-summary-container[_ngcontent-%COMP%]   .card-average[_ngcontent-%COMP%]   .counter-box-second[_ngcontent-%COMP%]   .counter-box[_ngcontent-%COMP%]   .text[_ngcontent-%COMP%]{font-size:13px}.card-summary-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{width:80px;height:120px}"]}),n})(),UT=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-game-box"]],decls:2,vars:0,template:function(t,i){1&t&&o._UZ(0,"app-game")(1,"app-game-controls")},dependencies:[dT,GT],styles:["[_ngcontent-%COMP%]:root{--green: #005C53;--blue: #042940;--cyan: #45C4B0;--pink: #F2668B;--yellow: #F2C94C;--orange: #F2994A;--red: #D92525;--grey: #A67458}[_nghost-%COMP%]{background:#eff7fe;display:block;width:100%}"]}),n})();function ZT(n,e){if(1&n&&(o.ynx(0),o._UZ(1,"app-issue-box",1)(2,"app-game-box"),o.BQk()),2&n){const t=e.ngIf;o.xp6(1),o.Q6J("gameId",t)}}let qT=(()=>{class n{constructor(t){this.activatedRoute=t,this.gameId$=this.setupRouteObserver(this.activatedRoute)}setupRouteObserver(t){return t.paramMap.pipe((0,xt.h)(i=>i.has("gameId")),(0,De.U)(i=>i.get("gameId")))}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Ro.gz))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-game-board"]],decls:2,vars:3,consts:[[4,"ngIf"],[3,"gameId"]],template:function(t,i){1&t&&(o.YNc(0,ZT,3,1,"ng-container",0),o.ALo(1,"async")),2&t&&o.Q6J("ngIf",o.lcZ(1,1,i.gameId$))},dependencies:[C.O5,hT,UT,C.Ov],styles:["[_nghost-%COMP%]{display:flex;height:100vh;flex-direction:row}"]}),n})(),Sg=(()=>{class n{constructor(t){this.fireStore=t,this.deck$=this.fireStore.collection("deck").snapshotChanges().pipe((0,De.U)(i=>i.map(s=>{const r=s.payload.doc.data();return{id:s.payload.doc.id,...r}})))}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Cc))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ng=(()=>{class n{constructor(t){this.fireStore=t,this.gameCollection=this.fireStore.collection("game"),this.games$=this.gameCollection.valueChanges()}create(t){this.gameCollection.add({name:t.name,description:t.description,deck:this.fireStore.doc(`deck/${t.deckId}`).ref})}}return n.\u0275fac=function(t){return new(t||n)(o.LFG(Cc))},n.\u0275prov=o.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $T(n,e){1&n&&o.Hsn(0)}const Ag=["*"];function QT(n,e){1&n&&(o.TgZ(0,"div",4),o._UZ(1,"div",5),o.qZA()),2&n&&o.Q6J("ngClass",e.$implicit)}function jT(n,e){if(1&n&&(o.TgZ(0,"div",2),o.YNc(1,QT,2,1,"div",3),o.qZA()),2&n){const t=e.$implicit;o.xp6(1),o.Q6J("ngForOf",t)}}function YT(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw(3);o.xp6(1),o.Oqu(t.nzTitle)}}function HT(n,e){if(1&n&&(o.TgZ(0,"div",11),o.YNc(1,YT,2,1,"ng-container",12),o.qZA()),2&n){const t=o.oxw(2);o.xp6(1),o.Q6J("nzStringTemplateOutlet",t.nzTitle)}}function JT(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw(3);o.xp6(1),o.Oqu(t.nzExtra)}}function KT(n,e){if(1&n&&(o.TgZ(0,"div",13),o.YNc(1,JT,2,1,"ng-container",12),o.qZA()),2&n){const t=o.oxw(2);o.xp6(1),o.Q6J("nzStringTemplateOutlet",t.nzExtra)}}function WT(n,e){}function XT(n,e){if(1&n&&(o.ynx(0),o.YNc(1,WT,0,0,"ng-template",14),o.BQk()),2&n){const t=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",t.listOfNzCardTabComponent.template)}}function ew(n,e){if(1&n&&(o.TgZ(0,"div",6)(1,"div",7),o.YNc(2,HT,2,1,"div",8),o.YNc(3,KT,2,1,"div",9),o.qZA(),o.YNc(4,XT,2,1,"ng-container",10),o.qZA()),2&n){const t=o.oxw();o.xp6(2),o.Q6J("ngIf",t.nzTitle),o.xp6(1),o.Q6J("ngIf",t.nzExtra),o.xp6(1),o.Q6J("ngIf",t.listOfNzCardTabComponent)}}function tw(n,e){}function nw(n,e){if(1&n&&(o.TgZ(0,"div",15),o.YNc(1,tw,0,0,"ng-template",14),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngTemplateOutlet",t.nzCover)}}function iw(n,e){1&n&&(o.ynx(0),o.Hsn(1),o.BQk())}function ow(n,e){1&n&&o._UZ(0,"nz-card-loading")}function sw(n,e){}function rw(n,e){if(1&n&&(o.TgZ(0,"li")(1,"span"),o.YNc(2,sw,0,0,"ng-template",14),o.qZA()()),2&n){const t=e.$implicit,i=o.oxw(2);o.Udp("width",100/i.nzActions.length,"%"),o.xp6(2),o.Q6J("ngTemplateOutlet",t)}}function aw(n,e){if(1&n&&(o.TgZ(0,"ul",16),o.YNc(1,rw,3,3,"li",17),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.nzActions)}}let pw=(()=>{class n{constructor(){this.nzHoverable=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=o.lG2({type:n,selectors:[["","nz-card-grid",""]],hostAttrs:[1,"ant-card-grid"],hostVars:2,hostBindings:function(t,i){2&t&&o.ekj("ant-card-hoverable",i.nzHoverable)},inputs:{nzHoverable:"nzHoverable"},exportAs:["nzCardGrid"]}),(0,D.gn)([(0,T.yF)()],n.prototype,"nzHoverable",void 0),n})(),fw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-card-tab"]],viewQuery:function(t,i){if(1&t&&o.Gf(o.Rgc,7),2&t){let s;o.iGM(s=o.CRH())&&(i.template=s.first)}},exportAs:["nzCardTab"],ngContentSelectors:Ag,decls:1,vars:0,template:function(t,i){1&t&&(o.F$t(),o.YNc(0,$T,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),n})(),mw=(()=>{class n{constructor(){this.listOfLoading=[["ant-col-22"],["ant-col-8","ant-col-15"],["ant-col-6","ant-col-18"],["ant-col-13","ant-col-9"],["ant-col-4","ant-col-3","ant-col-16"],["ant-col-8","ant-col-6","ant-col-8"]]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-card-loading"]],hostAttrs:[1,"ant-card-loading-content"],exportAs:["nzCardLoading"],decls:2,vars:1,consts:[[1,"ant-card-loading-content"],["class","ant-row","style","margin-left: -4px; margin-right: -4px;",4,"ngFor","ngForOf"],[1,"ant-row",2,"margin-left","-4px","margin-right","-4px"],["style","padding-left: 4px; padding-right: 4px;",3,"ngClass",4,"ngFor","ngForOf"],[2,"padding-left","4px","padding-right","4px",3,"ngClass"],[1,"ant-card-loading-block"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o.YNc(1,jT,2,1,"div",1),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngForOf",i.listOfLoading))},dependencies:[C.mk,C.sg],encapsulation:2,changeDetection:0}),n})(),gw=(()=>{class n{constructor(t,i,s){this.nzConfigService=t,this.cdr=i,this.directionality=s,this._nzModuleName="card",this.nzBordered=!0,this.nzBorderless=!1,this.nzLoading=!1,this.nzHoverable=!1,this.nzBodyStyle=null,this.nzActions=[],this.nzType=null,this.nzSize="default",this.dir="ltr",this.destroy$=new K.x,this.nzConfigService.getConfigChangeEventForComponent("card").pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()})}ngOnInit(){this.directionality.change?.pipe((0,F.R)(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(j.jY),o.Y36(o.sBO),o.Y36(ae.Is,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-card"]],contentQueries:function(t,i,s){if(1&t&&(o.Suo(s,fw,5),o.Suo(s,pw,4)),2&t){let r;o.iGM(r=o.CRH())&&(i.listOfNzCardTabComponent=r.first),o.iGM(r=o.CRH())&&(i.listOfNzCardGridDirective=r)}},hostAttrs:[1,"ant-card"],hostVars:16,hostBindings:function(t,i){2&t&&o.ekj("ant-card-loading",i.nzLoading)("ant-card-bordered",!1===i.nzBorderless&&i.nzBordered)("ant-card-hoverable",i.nzHoverable)("ant-card-small","small"===i.nzSize)("ant-card-contain-grid",i.listOfNzCardGridDirective&&i.listOfNzCardGridDirective.length)("ant-card-type-inner","inner"===i.nzType)("ant-card-contain-tabs",!!i.listOfNzCardTabComponent)("ant-card-rtl","rtl"===i.dir)},inputs:{nzBordered:"nzBordered",nzBorderless:"nzBorderless",nzLoading:"nzLoading",nzHoverable:"nzHoverable",nzBodyStyle:"nzBodyStyle",nzCover:"nzCover",nzActions:"nzActions",nzType:"nzType",nzSize:"nzSize",nzTitle:"nzTitle",nzExtra:"nzExtra"},exportAs:["nzCard"],ngContentSelectors:Ag,decls:7,vars:6,consts:[["class","ant-card-head",4,"ngIf"],["class","ant-card-cover",4,"ngIf"],[1,"ant-card-body",3,"ngStyle"],[4,"ngIf","ngIfElse"],["loadingTemplate",""],["class","ant-card-actions",4,"ngIf"],[1,"ant-card-head"],[1,"ant-card-head-wrapper"],["class","ant-card-head-title",4,"ngIf"],["class","ant-card-extra",4,"ngIf"],[4,"ngIf"],[1,"ant-card-head-title"],[4,"nzStringTemplateOutlet"],[1,"ant-card-extra"],[3,"ngTemplateOutlet"],[1,"ant-card-cover"],[1,"ant-card-actions"],[3,"width",4,"ngFor","ngForOf"]],template:function(t,i){if(1&t&&(o.F$t(),o.YNc(0,ew,5,3,"div",0),o.YNc(1,nw,2,1,"div",1),o.TgZ(2,"div",2),o.YNc(3,iw,2,0,"ng-container",3),o.YNc(4,ow,1,0,"ng-template",null,4,o.W1O),o.qZA(),o.YNc(6,aw,2,1,"ul",5)),2&t){const s=o.MAs(5);o.Q6J("ngIf",i.nzTitle||i.nzExtra||i.listOfNzCardTabComponent),o.xp6(1),o.Q6J("ngIf",i.nzCover),o.xp6(1),o.Q6J("ngStyle",i.nzBodyStyle),o.xp6(1),o.Q6J("ngIf",!i.nzLoading)("ngIfElse",s),o.xp6(3),o.Q6J("ngIf",i.nzActions.length)}},dependencies:[C.sg,C.O5,C.tP,C.PC,se.f,mw],encapsulation:2,changeDetection:0}),(0,D.gn)([(0,j.oS)(),(0,T.yF)()],n.prototype,"nzBordered",void 0),(0,D.gn)([(0,j.oS)(),(0,T.yF)()],n.prototype,"nzBorderless",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzLoading",void 0),(0,D.gn)([(0,j.oS)(),(0,T.yF)()],n.prototype,"nzHoverable",void 0),(0,D.gn)([(0,j.oS)()],n.prototype,"nzSize",void 0),n})(),_w=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[C.ez,se.T,ae.vT]}),n})();var it=S(3303),yw=S(9841),Fo=S(2169);function vw(n,e){if(1&n&&(o.ynx(0),o._UZ(1,"img",5),o.BQk()),2&n){const t=o.oxw(2);o.xp6(1),o.Q6J("src",t.nzNotFoundImage,o.LSH)("alt",t.isContentString?t.nzNotFoundContent:"empty")}}function Cw(n,e){if(1&n&&(o.ynx(0),o.YNc(1,vw,2,2,"ng-container",4),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",t.nzNotFoundImage)}}function zw(n,e){1&n&&o._UZ(0,"nz-empty-default")}function xw(n,e){1&n&&o._UZ(0,"nz-empty-simple")}function Tw(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw(2);o.xp6(1),o.hij(" ",t.isContentString?t.nzNotFoundContent:t.locale.description," ")}}function ww(n,e){if(1&n&&(o.TgZ(0,"p",6),o.YNc(1,Tw,2,1,"ng-container",4),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",t.nzNotFoundContent)}}function Iw(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw(2);o.xp6(1),o.hij(" ",t.nzNotFoundFooter," ")}}function bw(n,e){if(1&n&&(o.TgZ(0,"div",7),o.YNc(1,Iw,2,1,"ng-container",4),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("nzStringTemplateOutlet",t.nzNotFoundFooter)}}function Sw(n,e){1&n&&o._UZ(0,"nz-empty",6),2&n&&o.Q6J("nzNotFoundImage","simple")}function Nw(n,e){1&n&&o._UZ(0,"nz-empty",7),2&n&&o.Q6J("nzNotFoundImage","simple")}function Aw(n,e){1&n&&o._UZ(0,"nz-empty")}function Ow(n,e){if(1&n&&(o.ynx(0,2),o.YNc(1,Sw,1,1,"nz-empty",3),o.YNc(2,Nw,1,1,"nz-empty",4),o.YNc(3,Aw,1,0,"nz-empty",5),o.BQk()),2&n){const t=o.oxw();o.Q6J("ngSwitch",t.size),o.xp6(1),o.Q6J("ngSwitchCase","normal"),o.xp6(1),o.Q6J("ngSwitchCase","small")}}function Dw(n,e){}function Ew(n,e){if(1&n&&o.YNc(0,Dw,0,0,"ng-template",8),2&n){const t=o.oxw(2);o.Q6J("cdkPortalOutlet",t.contentPortal)}}function Mw(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw(2);o.xp6(1),o.hij(" ",t.content," ")}}function kw(n,e){if(1&n&&(o.ynx(0),o.YNc(1,Ew,1,1,null,1),o.YNc(2,Mw,2,1,"ng-container",1),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf","string"!==t.contentType),o.xp6(1),o.Q6J("ngIf","string"===t.contentType)}}const Fw=new o.OlP("nz-empty-component-name");let Vw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-empty-default"]],exportAs:["nzEmptyDefault"],decls:12,vars:0,consts:[["width","184","height","152","viewBox","0 0 184 152","xmlns","http://www.w3.org/2000/svg",1,"ant-empty-img-default"],["fill","none","fill-rule","evenodd"],["transform","translate(24 31.67)"],["cx","67.797","cy","106.89","rx","67.797","ry","12.668",1,"ant-empty-img-default-ellipse"],["d","M122.034 69.674L98.109 40.229c-1.148-1.386-2.826-2.225-4.593-2.225h-51.44c-1.766 0-3.444.839-4.592 2.225L13.56 69.674v15.383h108.475V69.674z",1,"ant-empty-img-default-path-1"],["d","M101.537 86.214L80.63 61.102c-1.001-1.207-2.507-1.867-4.048-1.867H31.724c-1.54 0-3.047.66-4.048 1.867L6.769 86.214v13.792h94.768V86.214z","transform","translate(13.56)",1,"ant-empty-img-default-path-2"],["d","M33.83 0h67.933a4 4 0 0 1 4 4v93.344a4 4 0 0 1-4 4H33.83a4 4 0 0 1-4-4V4a4 4 0 0 1 4-4z",1,"ant-empty-img-default-path-3"],["d","M42.678 9.953h50.237a2 2 0 0 1 2 2V36.91a2 2 0 0 1-2 2H42.678a2 2 0 0 1-2-2V11.953a2 2 0 0 1 2-2zM42.94 49.767h49.713a2.262 2.262 0 1 1 0 4.524H42.94a2.262 2.262 0 0 1 0-4.524zM42.94 61.53h49.713a2.262 2.262 0 1 1 0 4.525H42.94a2.262 2.262 0 0 1 0-4.525zM121.813 105.032c-.775 3.071-3.497 5.36-6.735 5.36H20.515c-3.238 0-5.96-2.29-6.734-5.36a7.309 7.309 0 0 1-.222-1.79V69.675h26.318c2.907 0 5.25 2.448 5.25 5.42v.04c0 2.971 2.37 5.37 5.277 5.37h34.785c2.907 0 5.277-2.421 5.277-5.393V75.1c0-2.972 2.343-5.426 5.25-5.426h26.318v33.569c0 .617-.077 1.216-.221 1.789z",1,"ant-empty-img-default-path-4"],["d","M149.121 33.292l-6.83 2.65a1 1 0 0 1-1.317-1.23l1.937-6.207c-2.589-2.944-4.109-6.534-4.109-10.408C138.802 8.102 148.92 0 161.402 0 173.881 0 184 8.102 184 18.097c0 9.995-10.118 18.097-22.599 18.097-4.528 0-8.744-1.066-12.28-2.902z",1,"ant-empty-img-default-path-5"],["transform","translate(149.65 15.383)",1,"ant-empty-img-default-g"],["cx","20.654","cy","3.167","rx","2.849","ry","2.815"],["d","M5.698 5.63H0L2.898.704zM9.259.704h4.985V5.63H9.259z"]],template:function(t,i){1&t&&(o.O4$(),o.TgZ(0,"svg",0)(1,"g",1)(2,"g",2),o._UZ(3,"ellipse",3)(4,"path",4)(5,"path",5)(6,"path",6)(7,"path",7),o.qZA(),o._UZ(8,"path",8),o.TgZ(9,"g",9),o._UZ(10,"ellipse",10)(11,"path",11),o.qZA()()())},encapsulation:2,changeDetection:0}),n})(),Rw=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-empty-simple"]],exportAs:["nzEmptySimple"],decls:6,vars:0,consts:[["width","64","height","41","viewBox","0 0 64 41","xmlns","http://www.w3.org/2000/svg",1,"ant-empty-img-simple"],["transform","translate(0 1)","fill","none","fill-rule","evenodd"],["cx","32","cy","33","rx","32","ry","7",1,"ant-empty-img-simple-ellipse"],["fill-rule","nonzero",1,"ant-empty-img-simple-g"],["d","M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"],["d","M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",1,"ant-empty-img-simple-path"]],template:function(t,i){1&t&&(o.O4$(),o.TgZ(0,"svg",0)(1,"g",1),o._UZ(2,"ellipse",2),o.TgZ(3,"g",3),o._UZ(4,"path",4)(5,"path",5),o.qZA()()())},encapsulation:2,changeDetection:0}),n})();const Lw=["default","simple"];let Pw=(()=>{class n{constructor(t,i){this.i18n=t,this.cdr=i,this.nzNotFoundImage="default",this.isContentString=!1,this.isImageBuildIn=!0,this.destroy$=new K.x}ngOnChanges(t){const{nzNotFoundContent:i,nzNotFoundImage:s}=t;if(i&&(this.isContentString="string"==typeof i.currentValue),s){const r=s.currentValue||"default";this.isImageBuildIn=Lw.findIndex(a=>a===r)>-1}}ngOnInit(){this.i18n.localeChange.pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Empty"),this.cdr.markForCheck()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Qt.wi),o.Y36(o.sBO))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-empty"]],hostAttrs:[1,"ant-empty"],inputs:{nzNotFoundImage:"nzNotFoundImage",nzNotFoundContent:"nzNotFoundContent",nzNotFoundFooter:"nzNotFoundFooter"},exportAs:["nzEmpty"],features:[o.TTD],decls:6,vars:5,consts:[[1,"ant-empty-image"],[4,"ngIf"],["class","ant-empty-description",4,"ngIf"],["class","ant-empty-footer",4,"ngIf"],[4,"nzStringTemplateOutlet"],[3,"src","alt"],[1,"ant-empty-description"],[1,"ant-empty-footer"]],template:function(t,i){1&t&&(o.TgZ(0,"div",0),o.YNc(1,Cw,2,1,"ng-container",1),o.YNc(2,zw,1,0,"nz-empty-default",1),o.YNc(3,xw,1,0,"nz-empty-simple",1),o.qZA(),o.YNc(4,ww,2,1,"p",2),o.YNc(5,bw,2,1,"div",3)),2&t&&(o.xp6(1),o.Q6J("ngIf",!i.isImageBuildIn),o.xp6(1),o.Q6J("ngIf",i.isImageBuildIn&&"simple"!==i.nzNotFoundImage),o.xp6(1),o.Q6J("ngIf",i.isImageBuildIn&&"simple"===i.nzNotFoundImage),o.xp6(1),o.Q6J("ngIf",null!==i.nzNotFoundContent),o.xp6(1),o.Q6J("ngIf",i.nzNotFoundFooter))},dependencies:[C.O5,se.f,Vw,Rw],encapsulation:2,changeDetection:0}),n})(),Dg=(()=>{class n{constructor(t,i,s,r){this.configService=t,this.viewContainerRef=i,this.cdr=s,this.injector=r,this.contentType="string",this.size="",this.destroy$=new K.x}ngOnChanges(t){t.nzComponentName&&(this.size=function Bw(n){switch(n){case"table":case"list":return"normal";case"select":case"tree-select":case"cascader":case"transfer":return"small";default:return""}}(t.nzComponentName.currentValue)),t.specificContent&&!t.specificContent.isFirstChange()&&(this.content=t.specificContent.currentValue,this.renderEmpty())}ngOnInit(){this.subscribeDefaultEmptyContentChange()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}renderEmpty(){const t=this.content;if("string"==typeof t)this.contentType="string";else if(t instanceof o.Rgc){const i={$implicit:this.nzComponentName};this.contentType="template",this.contentPortal=new Te.UE(t,this.viewContainerRef,i)}else if(t instanceof o.DyG){const i=o.zs3.create({parent:this.injector,providers:[{provide:Fw,useValue:this.nzComponentName}]});this.contentType="component",this.contentPortal=new Te.C5(t,this.viewContainerRef,i)}else this.contentType="string",this.contentPortal=void 0;this.cdr.detectChanges()}subscribeDefaultEmptyContentChange(){this.configService.getConfigChangeEventForComponent("empty").pipe((0,ot.O)(!0),(0,F.R)(this.destroy$)).subscribe(()=>{this.content=this.specificContent||this.getUserDefaultEmptyContent(),this.renderEmpty()})}getUserDefaultEmptyContent(){return(this.configService.getConfigForComponent("empty")||{}).nzDefaultEmptyContent}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(j.jY),o.Y36(o.s_b),o.Y36(o.sBO),o.Y36(o.zs3))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-embed-empty"]],inputs:{nzComponentName:"nzComponentName",specificContent:"specificContent"},exportAs:["nzEmbedEmpty"],features:[o.TTD],decls:2,vars:2,consts:[[3,"ngSwitch",4,"ngIf"],[4,"ngIf"],[3,"ngSwitch"],["class","ant-empty-normal",3,"nzNotFoundImage",4,"ngSwitchCase"],["class","ant-empty-small",3,"nzNotFoundImage",4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"ant-empty-normal",3,"nzNotFoundImage"],[1,"ant-empty-small",3,"nzNotFoundImage"],[3,"cdkPortalOutlet"]],template:function(t,i){1&t&&(o.YNc(0,Ow,4,3,"ng-container",0),o.YNc(1,kw,3,2,"ng-container",1)),2&t&&(o.Q6J("ngIf",!i.content&&null!==i.specificContent),o.xp6(1),o.Q6J("ngIf",i.content))},dependencies:[C.O5,C.RF,C.n9,C.ED,Te.Pl,Pw],encapsulation:2,changeDetection:0}),n})(),Eg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ae.vT,C.ez,Te.eL,se.T,Qt.YI]}),n})();var Mg=S(4482),Gw=S(4671),kg=S(5032);let We=(()=>{class n{}return n.SLOW="0.3s",n.BASE="0.2s",n.FAST="0.1s",n})(),Le=(()=>{class n{}return n.EASE_BASE_OUT="cubic-bezier(0.7, 0.3, 0.1, 1)",n.EASE_BASE_IN="cubic-bezier(0.9, 0, 0.3, 0.7)",n.EASE_OUT="cubic-bezier(0.215, 0.61, 0.355, 1)",n.EASE_IN="cubic-bezier(0.55, 0.055, 0.675, 0.19)",n.EASE_IN_OUT="cubic-bezier(0.645, 0.045, 0.355, 1)",n.EASE_OUT_BACK="cubic-bezier(0.12, 0.4, 0.29, 1.46)",n.EASE_IN_BACK="cubic-bezier(0.71, -0.46, 0.88, 0.6)",n.EASE_IN_OUT_BACK="cubic-bezier(0.71, -0.46, 0.29, 1.46)",n.EASE_OUT_CIRC="cubic-bezier(0.08, 0.82, 0.17, 1)",n.EASE_IN_CIRC="cubic-bezier(0.6, 0.04, 0.98, 0.34)",n.EASE_IN_OUT_CIRC="cubic-bezier(0.78, 0.14, 0.15, 0.86)",n.EASE_OUT_QUINT="cubic-bezier(0.23, 1, 0.32, 1)",n.EASE_IN_QUINT="cubic-bezier(0.755, 0.05, 0.855, 0.06)",n.EASE_IN_OUT_QUINT="cubic-bezier(0.86, 0, 0.07, 1)",n})();(0,_.X$)("collapseMotion",[(0,_.SB)("expanded",(0,_.oB)({height:"*"})),(0,_.SB)("collapsed",(0,_.oB)({height:0,overflow:"hidden"})),(0,_.SB)("hidden",(0,_.oB)({height:0,overflow:"hidden",borderTopWidth:"0"})),(0,_.eR)("expanded => collapsed",(0,_.jt)(`150ms ${Le.EASE_IN_OUT}`)),(0,_.eR)("expanded => hidden",(0,_.jt)(`150ms ${Le.EASE_IN_OUT}`)),(0,_.eR)("collapsed => expanded",(0,_.jt)(`150ms ${Le.EASE_IN_OUT}`)),(0,_.eR)("hidden => expanded",(0,_.jt)(`150ms ${Le.EASE_IN_OUT}`))]),(0,_.X$)("treeCollapseMotion",[(0,_.eR)("* => *",[(0,_.IO)("nz-tree-node:leave,nz-tree-builtin-node:leave",[(0,_.oB)({overflow:"hidden"}),(0,_.EY)(0,[(0,_.jt)(`150ms ${Le.EASE_IN_OUT}`,(0,_.oB)({height:0,opacity:0,"padding-bottom":0}))])],{optional:!0}),(0,_.IO)("nz-tree-node:enter,nz-tree-builtin-node:enter",[(0,_.oB)({overflow:"hidden",height:0,opacity:0,"padding-bottom":0}),(0,_.EY)(0,[(0,_.jt)(`150ms ${Le.EASE_IN_OUT}`,(0,_.oB)({overflow:"hidden",height:"*",opacity:"*","padding-bottom":"*"}))])],{optional:!0})])]),(0,_.X$)("fadeMotion",[(0,_.eR)(":enter",[(0,_.oB)({opacity:0}),(0,_.jt)(`${We.BASE}`,(0,_.oB)({opacity:1}))]),(0,_.eR)(":leave",[(0,_.oB)({opacity:1}),(0,_.jt)(`${We.BASE}`,(0,_.oB)({opacity:0}))])]),(0,_.X$)("helpMotion",[(0,_.eR)(":enter",[(0,_.oB)({opacity:0,transform:"translateY(-5px)"}),(0,_.jt)(`${We.SLOW} ${Le.EASE_IN_OUT}`,(0,_.oB)({opacity:1,transform:"translateY(0)"}))]),(0,_.eR)(":leave",[(0,_.oB)({opacity:1,transform:"translateY(0)"}),(0,_.jt)(`${We.SLOW} ${Le.EASE_IN_OUT}`,(0,_.oB)({opacity:0,transform:"translateY(-5px)"}))])]),(0,_.X$)("moveUpMotion",[(0,_.eR)("* => enter",[(0,_.oB)({transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0}),(0,_.jt)(`${We.BASE}`,(0,_.oB)({transformOrigin:"0 0",transform:"translateY(0%)",opacity:1}))]),(0,_.eR)("* => leave",[(0,_.oB)({transformOrigin:"0 0",transform:"translateY(0%)",opacity:1}),(0,_.jt)(`${We.BASE}`,(0,_.oB)({transformOrigin:"0 0",transform:"translateY(-100%)",opacity:0}))])]),(0,_.X$)("notificationMotion",[(0,_.SB)("enterRight",(0,_.oB)({opacity:1,transform:"translateX(0)"})),(0,_.eR)("* => enterRight",[(0,_.oB)({opacity:0,transform:"translateX(5%)"}),(0,_.jt)("100ms linear")]),(0,_.SB)("enterLeft",(0,_.oB)({opacity:1,transform:"translateX(0)"})),(0,_.eR)("* => enterLeft",[(0,_.oB)({opacity:0,transform:"translateX(-5%)"}),(0,_.jt)("100ms linear")]),(0,_.SB)("enterTop",(0,_.oB)({opacity:1,transform:"translateY(0)"})),(0,_.eR)("* => enterTop",[(0,_.oB)({opacity:0,transform:"translateY(-5%)"}),(0,_.jt)("100ms linear")]),(0,_.SB)("enterBottom",(0,_.oB)({opacity:1,transform:"translateY(0)"})),(0,_.eR)("* => enterBottom",[(0,_.oB)({opacity:0,transform:"translateY(5%)"}),(0,_.jt)("100ms linear")]),(0,_.SB)("leave",(0,_.oB)({opacity:0,transform:"scaleY(0.8)",transformOrigin:"0% 0%"})),(0,_.eR)("* => leave",[(0,_.oB)({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"}),(0,_.jt)("100ms linear")])]);const Zw=`${We.BASE} ${Le.EASE_OUT_QUINT}`,qw=`${We.BASE} ${Le.EASE_IN_QUINT}`,$w=(0,_.X$)("slideMotion",[(0,_.SB)("void",(0,_.oB)({opacity:0,transform:"scaleY(0.8)"})),(0,_.SB)("enter",(0,_.oB)({opacity:1,transform:"scaleY(1)"})),(0,_.eR)("void => *",[(0,_.jt)(Zw)]),(0,_.eR)("* => void",[(0,_.jt)(qw)])]);(0,_.X$)("slideAlertMotion",[(0,_.eR)(":leave",[(0,_.oB)({opacity:1,transform:"scaleY(1)",transformOrigin:"0% 0%"}),(0,_.jt)(`${We.SLOW} ${Le.EASE_IN_OUT_CIRC}`,(0,_.oB)({opacity:0,transform:"scaleY(0)",transformOrigin:"0% 0%"}))])]),(0,_.X$)("zoomBigMotion",[(0,_.eR)("void => active",[(0,_.oB)({opacity:0,transform:"scale(0.8)"}),(0,_.jt)(`${We.BASE} ${Le.EASE_OUT_CIRC}`,(0,_.oB)({opacity:1,transform:"scale(1)"}))]),(0,_.eR)("active => void",[(0,_.oB)({opacity:1,transform:"scale(1)"}),(0,_.jt)(`${We.BASE} ${Le.EASE_IN_OUT_CIRC}`,(0,_.oB)({opacity:0,transform:"scale(0.8)"}))])]),(0,_.X$)("zoomBadgeMotion",[(0,_.eR)(":enter",[(0,_.oB)({opacity:0,transform:"scale(0) translate(50%, -50%)"}),(0,_.jt)(`${We.SLOW} ${Le.EASE_OUT_BACK}`,(0,_.oB)({opacity:1,transform:"scale(1) translate(50%, -50%)"}))]),(0,_.eR)(":leave",[(0,_.oB)({opacity:1,transform:"scale(1) translate(50%, -50%)"}),(0,_.jt)(`${We.SLOW} ${Le.EASE_IN_BACK}`,(0,_.oB)({opacity:0,transform:"scale(0) translate(50%, -50%)"}))])]),(0,_.X$)("thumbMotion",[(0,_.SB)("from",(0,_.oB)({transform:"translateX({{ transform }}px)",width:"{{ width }}px"}),{params:{transform:0,width:0}}),(0,_.SB)("to",(0,_.oB)({transform:"translateX({{ transform }}px)",width:"{{ width }}px"}),{params:{transform:100,width:0}}),(0,_.eR)("from => to",(0,_.jt)(`300ms ${Le.EASE_IN_OUT}`))]);var _i=S(1691);const Fg=["*"];function Qw(n,e){}function jw(n,e){if(1&n&&o.YNc(0,Qw,0,0,"ng-template",4),2&n){const t=o.oxw();o.Q6J("ngTemplateOutlet",t.template)}}function Yw(n,e){if(1&n&&o._uU(0),2&n){const t=o.oxw();o.Oqu(t.label)}}function Hw(n,e){1&n&&o._UZ(0,"span",7)}function Jw(n,e){if(1&n&&(o.TgZ(0,"div",5),o.YNc(1,Hw,1,0,"span",6),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",!t.icon)("ngIfElse",t.icon)}}function Kw(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Oqu(t.nzLabel)}}function Ww(n,e){if(1&n&&(o.TgZ(0,"div",4),o._UZ(1,"nz-embed-empty",5),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("specificContent",t.notFoundContent)}}function Xw(n,e){if(1&n&&o._UZ(0,"nz-option-item-group",9),2&n){const t=o.oxw().$implicit;o.Q6J("nzLabel",t.groupLabel)}}function eI(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"nz-option-item",10),o.NdJ("itemHover",function(s){o.CHM(t);const r=o.oxw(2);return o.KtG(r.onItemHover(s))})("itemClick",function(s){o.CHM(t);const r=o.oxw(2);return o.KtG(r.onItemClick(s))}),o.qZA()}if(2&n){const t=o.oxw().$implicit,i=o.oxw();o.Q6J("icon",i.menuItemSelectedIcon)("customContent",t.nzCustomContent)("template",t.template)("grouped",!!t.groupLabel)("disabled",t.nzDisabled)("showState","tags"===i.mode||"multiple"===i.mode)("label",t.nzLabel)("compareWith",i.compareWith)("activatedValue",i.activatedValue)("listOfSelectedValue",i.listOfSelectedValue)("value",t.nzValue)}}function tI(n,e){1&n&&(o.ynx(0,6),o.YNc(1,Xw,1,1,"nz-option-item-group",7),o.YNc(2,eI,1,11,"nz-option-item",8),o.BQk()),2&n&&(o.Q6J("ngSwitch",e.$implicit.type),o.xp6(1),o.Q6J("ngSwitchCase","group"),o.xp6(1),o.Q6J("ngSwitchCase","item"))}function nI(n,e){}function iI(n,e){1&n&&o.Hsn(0)}const oI=["inputElement"],sI=["mirrorElement"];function rI(n,e){1&n&&o._UZ(0,"span",3,4)}function aI(n,e){if(1&n&&(o.TgZ(0,"div",4),o._uU(1),o.qZA()),2&n){const t=o.oxw(2);o.xp6(1),o.Oqu(t.label)}}function lI(n,e){if(1&n&&o._uU(0),2&n){const t=o.oxw(2);o.Oqu(t.label)}}function cI(n,e){if(1&n&&(o.ynx(0),o.YNc(1,aI,2,1,"div",2),o.YNc(2,lI,1,1,"ng-template",null,3,o.W1O),o.BQk()),2&n){const t=o.MAs(3),i=o.oxw();o.xp6(1),o.Q6J("ngIf",i.deletable)("ngIfElse",t)}}function uI(n,e){1&n&&o._UZ(0,"span",7)}function hI(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"span",5),o.NdJ("click",function(s){o.CHM(t);const r=o.oxw();return o.KtG(r.onDelete(s))}),o.YNc(1,uI,1,0,"span",6),o.qZA()}if(2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",!t.removeIcon)("ngIfElse",t.removeIcon)}}const dI=function(n){return{$implicit:n}};function pI(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.hij(" ",t.placeholder," ")}}function fI(n,e){if(1&n&&o._UZ(0,"nz-select-item",6),2&n){const t=o.oxw(2);o.Q6J("deletable",!1)("disabled",!1)("removeIcon",t.removeIcon)("label",t.listOfTopItem[0].nzLabel)("contentTemplateOutlet",t.customTemplate)("contentTemplateOutletContext",t.listOfTopItem[0])}}function mI(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.TgZ(1,"nz-select-search",4),o.NdJ("isComposingChange",function(s){o.CHM(t);const r=o.oxw();return o.KtG(r.isComposingChange(s))})("valueChange",function(s){o.CHM(t);const r=o.oxw();return o.KtG(r.onInputValueChange(s))}),o.qZA(),o.YNc(2,fI,1,6,"nz-select-item",5),o.BQk()}if(2&n){const t=o.oxw();o.xp6(1),o.Q6J("nzId",t.nzId)("disabled",t.disabled)("value",t.inputValue)("showInput",t.showSearch)("mirrorSync",!1)("autofocus",t.autofocus)("focusTrigger",t.open),o.xp6(1),o.Q6J("ngIf",t.isShowSingleLabel)}}function gI(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"nz-select-item",9),o.NdJ("delete",function(){const r=o.CHM(t).$implicit,a=o.oxw(2);return o.KtG(a.onDeleteItem(r.contentTemplateOutletContext))}),o.qZA()}if(2&n){const t=e.$implicit,i=o.oxw(2);o.Q6J("removeIcon",i.removeIcon)("label",t.nzLabel)("disabled",t.nzDisabled||i.disabled)("contentTemplateOutlet",t.contentTemplateOutlet)("deletable",!0)("contentTemplateOutletContext",t.contentTemplateOutletContext)}}function _I(n,e){if(1&n){const t=o.EpF();o.ynx(0),o.YNc(1,gI,1,6,"nz-select-item",7),o.TgZ(2,"nz-select-search",8),o.NdJ("isComposingChange",function(s){o.CHM(t);const r=o.oxw();return o.KtG(r.isComposingChange(s))})("valueChange",function(s){o.CHM(t);const r=o.oxw();return o.KtG(r.onInputValueChange(s))}),o.qZA(),o.BQk()}if(2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngForOf",t.listOfSlicedItem)("ngForTrackBy",t.trackValue),o.xp6(1),o.Q6J("nzId",t.nzId)("disabled",t.disabled)("value",t.inputValue)("autofocus",t.autofocus)("showInput",!0)("mirrorSync",!0)("focusTrigger",t.open)}}function yI(n,e){if(1&n&&o._UZ(0,"nz-select-placeholder",10),2&n){const t=o.oxw();o.Q6J("placeholder",t.placeHolder)}}function vI(n,e){1&n&&o._UZ(0,"span",1)}function CI(n,e){1&n&&o._UZ(0,"span",3)}function zI(n,e){1&n&&o._UZ(0,"span",8)}function xI(n,e){1&n&&o._UZ(0,"span",9)}function TI(n,e){if(1&n&&(o.ynx(0),o.YNc(1,zI,1,0,"span",6),o.YNc(2,xI,1,0,"span",7),o.BQk()),2&n){const t=o.oxw(2);o.xp6(1),o.Q6J("ngIf",!t.search),o.xp6(1),o.Q6J("ngIf",t.search)}}function wI(n,e){if(1&n&&o._UZ(0,"span",11),2&n){const t=o.oxw().$implicit;o.Q6J("nzType",t)}}function II(n,e){if(1&n&&(o.ynx(0),o.YNc(1,wI,1,1,"span",10),o.BQk()),2&n){const t=e.$implicit;o.xp6(1),o.Q6J("ngIf",t)}}function bI(n,e){if(1&n&&o.YNc(0,II,2,1,"ng-container",2),2&n){const t=o.oxw(2);o.Q6J("nzStringTemplateOutlet",t.suffixIcon)}}function SI(n,e){if(1&n&&(o.YNc(0,TI,3,2,"ng-container",4),o.YNc(1,bI,1,1,"ng-template",null,5,o.W1O)),2&n){const t=o.MAs(2),i=o.oxw();o.Q6J("ngIf",i.showArrow&&!i.suffixIcon)("ngIfElse",t)}}function NI(n,e){if(1&n&&(o.ynx(0),o._uU(1),o.BQk()),2&n){const t=o.oxw();o.xp6(1),o.Oqu(t.feedbackIcon)}}function AI(n,e){if(1&n&&o._UZ(0,"nz-form-item-feedback-icon",8),2&n){const t=o.oxw(3);o.Q6J("status",t.status)}}function OI(n,e){if(1&n&&o.YNc(0,AI,1,1,"nz-form-item-feedback-icon",7),2&n){const t=o.oxw(2);o.Q6J("ngIf",t.hasFeedback&&!!t.status)}}function DI(n,e){if(1&n&&(o.TgZ(0,"nz-select-arrow",5),o.YNc(1,OI,1,1,"ng-template",null,6,o.W1O),o.qZA()),2&n){const t=o.MAs(2),i=o.oxw();o.Q6J("showArrow",i.nzShowArrow)("loading",i.nzLoading)("search",i.nzOpen&&i.nzShowSearch)("suffixIcon",i.nzSuffixIcon)("feedbackIcon",t)}}function EI(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"nz-select-clear",9),o.NdJ("clear",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.onClearSelection())}),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("clearIcon",t.nzClearIcon)}}function MI(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"nz-option-container",10),o.NdJ("keydown",function(s){o.CHM(t);const r=o.oxw();return o.KtG(r.onKeyDown(s))})("itemClick",function(s){o.CHM(t);const r=o.oxw();return o.KtG(r.onItemClick(s))})("scrollToBottom",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.nzScrollToBottom.emit())}),o.qZA()}if(2&n){const t=o.oxw();o.ekj("ant-select-dropdown-placement-bottomLeft","bottomLeft"===t.dropDownPosition)("ant-select-dropdown-placement-topLeft","topLeft"===t.dropDownPosition)("ant-select-dropdown-placement-bottomRight","bottomRight"===t.dropDownPosition)("ant-select-dropdown-placement-topRight","topRight"===t.dropDownPosition),o.Q6J("ngStyle",t.nzDropdownStyle)("itemSize",t.nzOptionHeightPx)("maxItemLength",t.nzOptionOverflowSize)("matchWidth",t.nzDropdownMatchSelectWidth)("@slideMotion","enter")("@.disabled",null==t.noAnimation?null:t.noAnimation.nzNoAnimation)("nzNoAnimation",null==t.noAnimation?null:t.noAnimation.nzNoAnimation)("listOfContainerItem",t.listOfContainerItem)("menuItemSelectedIcon",t.nzMenuItemSelectedIcon)("notFoundContent",t.nzNotFoundContent)("activatedValue",t.activatedValue)("listOfSelectedValue",t.listOfValue)("dropdownRender",t.nzDropdownRender)("compareWith",t.compareWith)("mode",t.nzMode)}}let Jc=(()=>{class n{constructor(){this.nzLabel=null,this.changes=new K.x}ngOnChanges(){this.changes.next()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-option-group"]],inputs:{nzLabel:"nzLabel"},exportAs:["nzOptionGroup"],features:[o.TTD],ngContentSelectors:Fg,decls:1,vars:0,template:function(t,i){1&t&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),n})(),kI=(()=>{class n{constructor(t,i,s){this.elementRef=t,this.ngZone=i,this.destroy$=s,this.selected=!1,this.activated=!1,this.grouped=!1,this.customContent=!1,this.template=null,this.disabled=!1,this.showState=!1,this.label=null,this.value=null,this.activatedValue=null,this.listOfSelectedValue=[],this.icon=null,this.itemClick=new o.vpe,this.itemHover=new o.vpe}ngOnChanges(t){const{value:i,activatedValue:s,listOfSelectedValue:r}=t;(i||r)&&(this.selected=this.listOfSelectedValue.some(a=>this.compareWith(a,this.value))),(i||s)&&(this.activated=this.compareWith(this.activatedValue,this.value))}ngOnInit(){this.ngZone.runOutsideAngular(()=>{(0,An.R)(this.elementRef.nativeElement,"click").pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.disabled||this.ngZone.run(()=>this.itemClick.emit(this.value))}),(0,An.R)(this.elementRef.nativeElement,"mouseenter").pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.disabled||this.ngZone.run(()=>this.itemHover.emit(this.value))})})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(it.kn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-option-item"]],hostAttrs:[1,"ant-select-item","ant-select-item-option"],hostVars:9,hostBindings:function(t,i){2&t&&(o.uIk("title",i.label),o.ekj("ant-select-item-option-grouped",i.grouped)("ant-select-item-option-selected",i.selected&&!i.disabled)("ant-select-item-option-disabled",i.disabled)("ant-select-item-option-active",i.activated&&!i.disabled))},inputs:{grouped:"grouped",customContent:"customContent",template:"template",disabled:"disabled",showState:"showState",label:"label",value:"value",activatedValue:"activatedValue",listOfSelectedValue:"listOfSelectedValue",icon:"icon",compareWith:"compareWith"},outputs:{itemClick:"itemClick",itemHover:"itemHover"},features:[o._Bn([it.kn]),o.TTD],decls:5,vars:3,consts:[[1,"ant-select-item-option-content"],[3,"ngIf","ngIfElse"],["noCustomContent",""],["class","ant-select-item-option-state","style","user-select: none","unselectable","on",4,"ngIf"],[3,"ngTemplateOutlet"],["unselectable","on",1,"ant-select-item-option-state",2,"user-select","none"],["nz-icon","","nzType","check","class","ant-select-selected-icon",4,"ngIf","ngIfElse"],["nz-icon","","nzType","check",1,"ant-select-selected-icon"]],template:function(t,i){if(1&t&&(o.TgZ(0,"div",0),o.YNc(1,jw,1,1,"ng-template",1),o.YNc(2,Yw,1,1,"ng-template",null,2,o.W1O),o.qZA(),o.YNc(4,Jw,2,2,"div",3)),2&t){const s=o.MAs(3);o.xp6(1),o.Q6J("ngIf",i.customContent)("ngIfElse",s),o.xp6(3),o.Q6J("ngIf",i.showState&&i.selected)}},dependencies:[C.O5,C.tP,te.Ls,$e.w],encapsulation:2,changeDetection:0}),n})(),FI=(()=>{class n{constructor(){this.nzLabel=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-option-item-group"]],hostAttrs:[1,"ant-select-item","ant-select-item-group"],inputs:{nzLabel:"nzLabel"},decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"]],template:function(t,i){1&t&&o.YNc(0,Kw,2,1,"ng-container",0),2&t&&o.Q6J("nzStringTemplateOutlet",i.nzLabel)},dependencies:[se.f],encapsulation:2,changeDetection:0}),n})(),VI=(()=>{class n{constructor(){this.notFoundContent=void 0,this.menuItemSelectedIcon=null,this.dropdownRender=null,this.activatedValue=null,this.listOfSelectedValue=[],this.mode="default",this.matchWidth=!0,this.itemSize=32,this.maxItemLength=8,this.listOfContainerItem=[],this.itemClick=new o.vpe,this.scrollToBottom=new o.vpe,this.scrolledIndex=0}onItemClick(t){this.itemClick.emit(t)}onItemHover(t){this.activatedValue=t}trackValue(t,i){return i.key}onScrolledIndexChange(t){this.scrolledIndex=t,t===this.listOfContainerItem.length-this.maxItemLength&&this.scrollToBottom.emit()}scrollToActivatedValue(){const t=this.listOfContainerItem.findIndex(i=>this.compareWith(i.key,this.activatedValue));(t<this.scrolledIndex||t>=this.scrolledIndex+this.maxItemLength)&&this.cdkVirtualScrollViewport.scrollToIndex(t||0)}ngOnChanges(t){const{listOfContainerItem:i,activatedValue:s}=t;(i||s)&&this.scrollToActivatedValue()}ngAfterViewInit(){setTimeout(()=>this.scrollToActivatedValue())}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-option-container"]],viewQuery:function(t,i){if(1&t&&o.Gf(Fo.N7,7),2&t){let s;o.iGM(s=o.CRH())&&(i.cdkVirtualScrollViewport=s.first)}},hostAttrs:[1,"ant-select-dropdown"],inputs:{notFoundContent:"notFoundContent",menuItemSelectedIcon:"menuItemSelectedIcon",dropdownRender:"dropdownRender",activatedValue:"activatedValue",listOfSelectedValue:"listOfSelectedValue",compareWith:"compareWith",mode:"mode",matchWidth:"matchWidth",itemSize:"itemSize",maxItemLength:"maxItemLength",listOfContainerItem:"listOfContainerItem"},outputs:{itemClick:"itemClick",scrollToBottom:"scrollToBottom"},exportAs:["nzOptionContainer"],features:[o.TTD],decls:5,vars:14,consts:[["class","ant-select-item-empty",4,"ngIf"],[3,"itemSize","maxBufferPx","minBufferPx","scrolledIndexChange"],["cdkVirtualFor","",3,"cdkVirtualForOf","cdkVirtualForTrackBy","cdkVirtualForTemplateCacheSize"],[3,"ngTemplateOutlet"],[1,"ant-select-item-empty"],["nzComponentName","select",3,"specificContent"],[3,"ngSwitch"],[3,"nzLabel",4,"ngSwitchCase"],[3,"icon","customContent","template","grouped","disabled","showState","label","compareWith","activatedValue","listOfSelectedValue","value","itemHover","itemClick",4,"ngSwitchCase"],[3,"nzLabel"],[3,"icon","customContent","template","grouped","disabled","showState","label","compareWith","activatedValue","listOfSelectedValue","value","itemHover","itemClick"]],template:function(t,i){1&t&&(o.TgZ(0,"div"),o.YNc(1,Ww,2,1,"div",0),o.TgZ(2,"cdk-virtual-scroll-viewport",1),o.NdJ("scrolledIndexChange",function(r){return i.onScrolledIndexChange(r)}),o.YNc(3,tI,3,3,"ng-template",2),o.qZA(),o.YNc(4,nI,0,0,"ng-template",3),o.qZA()),2&t&&(o.xp6(1),o.Q6J("ngIf",0===i.listOfContainerItem.length),o.xp6(1),o.Udp("height",i.listOfContainerItem.length*i.itemSize,"px")("max-height",i.itemSize*i.maxItemLength,"px"),o.ekj("full-width",!i.matchWidth),o.Q6J("itemSize",i.itemSize)("maxBufferPx",i.itemSize*i.maxItemLength)("minBufferPx",i.itemSize*i.maxItemLength),o.xp6(1),o.Q6J("cdkVirtualForOf",i.listOfContainerItem)("cdkVirtualForTrackBy",i.trackValue)("cdkVirtualForTemplateCacheSize",0),o.xp6(1),o.Q6J("ngTemplateOutlet",i.dropdownRender))},dependencies:[C.O5,C.tP,C.RF,C.n9,Fo.xd,Fo.x0,Fo.N7,Dg,kI,FI],encapsulation:2,changeDetection:0}),n})(),Vg=(()=>{class n{constructor(t,i){this.nzOptionGroupComponent=t,this.destroy$=i,this.changes=new K.x,this.groupLabel=null,this.nzLabel=null,this.nzValue=null,this.nzDisabled=!1,this.nzHide=!1,this.nzCustomContent=!1}ngOnInit(){this.nzOptionGroupComponent&&this.nzOptionGroupComponent.changes.pipe((0,ot.O)(!0),(0,F.R)(this.destroy$)).subscribe(()=>{this.groupLabel=this.nzOptionGroupComponent.nzLabel})}ngOnChanges(){this.changes.next()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Jc,8),o.Y36(it.kn))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-option"]],viewQuery:function(t,i){if(1&t&&o.Gf(o.Rgc,7),2&t){let s;o.iGM(s=o.CRH())&&(i.template=s.first)}},inputs:{nzLabel:"nzLabel",nzValue:"nzValue",nzDisabled:"nzDisabled",nzHide:"nzHide",nzCustomContent:"nzCustomContent"},exportAs:["nzOption"],features:[o._Bn([it.kn]),o.TTD],ngContentSelectors:Fg,decls:1,vars:0,template:function(t,i){1&t&&(o.F$t(),o.YNc(0,iI,1,0,"ng-template"))},encapsulation:2,changeDetection:0}),(0,D.gn)([(0,T.yF)()],n.prototype,"nzDisabled",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzHide",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzCustomContent",void 0),n})(),Rg=(()=>{class n{constructor(t,i,s){this.elementRef=t,this.renderer=i,this.focusMonitor=s,this.nzId=null,this.disabled=!1,this.mirrorSync=!1,this.showInput=!0,this.focusTrigger=!1,this.value="",this.autofocus=!1,this.valueChange=new o.vpe,this.isComposingChange=new o.vpe}setCompositionState(t){this.isComposingChange.next(t)}onValueChange(t){this.value=t,this.valueChange.next(t),this.mirrorSync&&this.syncMirrorWidth()}clearInputValue(){this.inputElement.nativeElement.value="",this.onValueChange("")}syncMirrorWidth(){const t=this.mirrorElement.nativeElement,i=this.elementRef.nativeElement,s=this.inputElement.nativeElement;this.renderer.removeStyle(i,"width"),this.renderer.setProperty(t,"textContent",`${s.value}\xa0`),this.renderer.setStyle(i,"width",`${t.scrollWidth}px`)}focus(){this.focusMonitor.focusVia(this.inputElement,"keyboard")}blur(){this.inputElement.nativeElement.blur()}ngOnChanges(t){const i=this.inputElement.nativeElement,{focusTrigger:s,showInput:r}=t;r&&(this.showInput?this.renderer.removeAttribute(i,"readonly"):this.renderer.setAttribute(i,"readonly","readonly")),s&&!0===s.currentValue&&!1===s.previousValue&&i.focus()}ngAfterViewInit(){this.mirrorSync&&this.syncMirrorWidth(),this.autofocus&&this.focus()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(qc))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-select-search"]],viewQuery:function(t,i){if(1&t&&(o.Gf(oI,7),o.Gf(sI,5)),2&t){let s;o.iGM(s=o.CRH())&&(i.inputElement=s.first),o.iGM(s=o.CRH())&&(i.mirrorElement=s.first)}},hostAttrs:[1,"ant-select-selection-search"],inputs:{nzId:"nzId",disabled:"disabled",mirrorSync:"mirrorSync",showInput:"showInput",focusTrigger:"focusTrigger",value:"value",autofocus:"autofocus"},outputs:{valueChange:"valueChange",isComposingChange:"isComposingChange"},features:[o._Bn([{provide:Qf,useValue:!1}]),o.TTD],decls:3,vars:7,consts:[["autocomplete","off",1,"ant-select-selection-search-input",3,"ngModel","disabled","ngModelChange","compositionstart","compositionend"],["inputElement",""],["class","ant-select-selection-search-mirror",4,"ngIf"],[1,"ant-select-selection-search-mirror"],["mirrorElement",""]],template:function(t,i){1&t&&(o.TgZ(0,"input",0,1),o.NdJ("ngModelChange",function(r){return i.onValueChange(r)})("compositionstart",function(){return i.setCompositionState(!0)})("compositionend",function(){return i.setCompositionState(!1)}),o.qZA(),o.YNc(2,rI,2,0,"span",2)),2&t&&(o.Udp("opacity",i.showInput?null:0),o.Q6J("ngModel",i.value)("disabled",i.disabled),o.uIk("id",i.nzId)("autofocus",i.autofocus?"autofocus":null),o.xp6(2),o.Q6J("ngIf",i.mirrorSync))},dependencies:[C.O5,ui,So,pr],encapsulation:2,changeDetection:0}),n})(),RI=(()=>{class n{constructor(){this.disabled=!1,this.label=null,this.deletable=!1,this.removeIcon=null,this.contentTemplateOutletContext=null,this.contentTemplateOutlet=null,this.delete=new o.vpe}onDelete(t){t.preventDefault(),t.stopPropagation(),this.disabled||this.delete.next(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-select-item"]],hostAttrs:[1,"ant-select-selection-item"],hostVars:3,hostBindings:function(t,i){2&t&&(o.uIk("title",i.label),o.ekj("ant-select-selection-item-disabled",i.disabled))},inputs:{disabled:"disabled",label:"label",deletable:"deletable",removeIcon:"removeIcon",contentTemplateOutletContext:"contentTemplateOutletContext",contentTemplateOutlet:"contentTemplateOutlet"},outputs:{delete:"delete"},decls:2,vars:5,consts:[[4,"nzStringTemplateOutlet","nzStringTemplateOutletContext"],["class","ant-select-selection-item-remove",3,"click",4,"ngIf"],["class","ant-select-selection-item-content",4,"ngIf","ngIfElse"],["labelTemplate",""],[1,"ant-select-selection-item-content"],[1,"ant-select-selection-item-remove",3,"click"],["nz-icon","","nzType","close",4,"ngIf","ngIfElse"],["nz-icon","","nzType","close"]],template:function(t,i){1&t&&(o.YNc(0,cI,4,2,"ng-container",0),o.YNc(1,hI,2,2,"span",1)),2&t&&(o.Q6J("nzStringTemplateOutlet",i.contentTemplateOutlet)("nzStringTemplateOutletContext",o.VKq(3,dI,i.contentTemplateOutletContext)),o.xp6(1),o.Q6J("ngIf",i.deletable&&!i.disabled))},dependencies:[C.O5,te.Ls,se.f,$e.w],encapsulation:2,changeDetection:0}),n})(),LI=(()=>{class n{constructor(){this.placeholder=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-select-placeholder"]],hostAttrs:[1,"ant-select-selection-placeholder"],inputs:{placeholder:"placeholder"},decls:1,vars:1,consts:[[4,"nzStringTemplateOutlet"]],template:function(t,i){1&t&&o.YNc(0,pI,2,1,"ng-container",0),2&t&&o.Q6J("nzStringTemplateOutlet",i.placeholder)},dependencies:[se.f],encapsulation:2,changeDetection:0}),n})(),Kc=(()=>{class n{constructor(t,i,s){this.elementRef=t,this.ngZone=i,this.noAnimation=s,this.nzId=null,this.showSearch=!1,this.placeHolder=null,this.open=!1,this.maxTagCount=1/0,this.autofocus=!1,this.disabled=!1,this.mode="default",this.customTemplate=null,this.maxTagPlaceholder=null,this.removeIcon=null,this.listOfTopItem=[],this.tokenSeparators=[],this.tokenize=new o.vpe,this.inputValueChange=new o.vpe,this.deleteItem=new o.vpe,this.listOfSlicedItem=[],this.isShowPlaceholder=!0,this.isShowSingleLabel=!1,this.isComposing=!1,this.inputValue=null,this.destroy$=new K.x}updateTemplateVariable(){const t=0===this.listOfTopItem.length;this.isShowPlaceholder=t&&!this.isComposing&&!this.inputValue,this.isShowSingleLabel=!t&&!this.isComposing&&!this.inputValue}isComposingChange(t){this.isComposing=t,this.updateTemplateVariable()}onInputValueChange(t){t!==this.inputValue&&(this.inputValue=t,this.updateTemplateVariable(),this.inputValueChange.emit(t),this.tokenSeparate(t,this.tokenSeparators))}tokenSeparate(t,i){if(t&&t.length&&i.length&&"default"!==this.mode&&((a,l)=>{for(let c=0;c<l.length;++c)if(a.lastIndexOf(l[c])>0)return!0;return!1})(t,i)){const a=((a,l)=>{const c=new RegExp(`[${l.join()}]`),u=a.split(c).filter(h=>h);return[...new Set(u)]})(t,i);this.tokenize.next(a)}}clearInputValue(){this.nzSelectSearchComponent&&this.nzSelectSearchComponent.clearInputValue()}focus(){this.nzSelectSearchComponent&&this.nzSelectSearchComponent.focus()}blur(){this.nzSelectSearchComponent&&this.nzSelectSearchComponent.blur()}trackValue(t,i){return i.nzValue}onDeleteItem(t){!this.disabled&&!t.nzDisabled&&this.deleteItem.next(t)}ngOnChanges(t){const{listOfTopItem:i,maxTagCount:s,customTemplate:r,maxTagPlaceholder:a}=t;if(i&&this.updateTemplateVariable(),i||s||r||a){const l=this.listOfTopItem.slice(0,this.maxTagCount).map(c=>({nzLabel:c.nzLabel,nzValue:c.nzValue,nzDisabled:c.nzDisabled,contentTemplateOutlet:this.customTemplate,contentTemplateOutletContext:c}));if(this.listOfTopItem.length>this.maxTagCount){const c=`+ ${this.listOfTopItem.length-this.maxTagCount} ...`,u=this.listOfTopItem.map(d=>d.nzValue),h={nzLabel:c,nzValue:"$$__nz_exceeded_item",nzDisabled:!0,contentTemplateOutlet:this.maxTagPlaceholder,contentTemplateOutletContext:u.slice(this.maxTagCount)};l.push(h)}this.listOfSlicedItem=l}}ngOnInit(){this.ngZone.runOutsideAngular(()=>{(0,An.R)(this.elementRef.nativeElement,"click").pipe((0,F.R)(this.destroy$)).subscribe(t=>{t.target!==this.nzSelectSearchComponent.inputElement.nativeElement&&this.nzSelectSearchComponent.focus()}),(0,An.R)(this.elementRef.nativeElement,"keydown").pipe((0,F.R)(this.destroy$)).subscribe(t=>{if(t.target instanceof HTMLInputElement){const i=t.target.value;t.keyCode===Re.ZH&&"default"!==this.mode&&!i&&this.listOfTopItem.length>0&&(t.preventDefault(),this.ngZone.run(()=>this.onDeleteItem(this.listOfTopItem[this.listOfTopItem.length-1])))}})})}ngOnDestroy(){this.destroy$.next()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.SBq),o.Y36(o.R0b),o.Y36(jt.P,9))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-select-top-control"]],viewQuery:function(t,i){if(1&t&&o.Gf(Rg,5),2&t){let s;o.iGM(s=o.CRH())&&(i.nzSelectSearchComponent=s.first)}},hostAttrs:[1,"ant-select-selector"],inputs:{nzId:"nzId",showSearch:"showSearch",placeHolder:"placeHolder",open:"open",maxTagCount:"maxTagCount",autofocus:"autofocus",disabled:"disabled",mode:"mode",customTemplate:"customTemplate",maxTagPlaceholder:"maxTagPlaceholder",removeIcon:"removeIcon",listOfTopItem:"listOfTopItem",tokenSeparators:"tokenSeparators"},outputs:{tokenize:"tokenize",inputValueChange:"inputValueChange",deleteItem:"deleteItem"},exportAs:["nzSelectTopControl"],features:[o.TTD],decls:4,vars:3,consts:[[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[3,"placeholder",4,"ngIf"],[3,"nzId","disabled","value","showInput","mirrorSync","autofocus","focusTrigger","isComposingChange","valueChange"],[3,"deletable","disabled","removeIcon","label","contentTemplateOutlet","contentTemplateOutletContext",4,"ngIf"],[3,"deletable","disabled","removeIcon","label","contentTemplateOutlet","contentTemplateOutletContext"],[3,"removeIcon","label","disabled","contentTemplateOutlet","deletable","contentTemplateOutletContext","delete",4,"ngFor","ngForOf","ngForTrackBy"],[3,"nzId","disabled","value","autofocus","showInput","mirrorSync","focusTrigger","isComposingChange","valueChange"],[3,"removeIcon","label","disabled","contentTemplateOutlet","deletable","contentTemplateOutletContext","delete"],[3,"placeholder"]],template:function(t,i){1&t&&(o.ynx(0,0),o.YNc(1,mI,3,8,"ng-container",1),o.YNc(2,_I,3,9,"ng-container",2),o.BQk(),o.YNc(3,yI,1,1,"nz-select-placeholder",3)),2&t&&(o.Q6J("ngSwitch",i.mode),o.xp6(1),o.Q6J("ngSwitchCase","default"),o.xp6(2),o.Q6J("ngIf",i.isShowPlaceholder))},dependencies:[C.sg,C.O5,C.RF,C.n9,C.ED,$e.w,Rg,RI,LI],encapsulation:2,changeDetection:0}),n})(),PI=(()=>{class n{constructor(){this.clearIcon=null,this.clear=new o.vpe}onClick(t){t.preventDefault(),t.stopPropagation(),this.clear.emit(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-select-clear"]],hostAttrs:[1,"ant-select-clear"],hostBindings:function(t,i){1&t&&o.NdJ("click",function(r){return i.onClick(r)})},inputs:{clearIcon:"clearIcon"},outputs:{clear:"clear"},decls:1,vars:2,consts:[["nz-icon","","nzType","close-circle","nzTheme","fill","class","ant-select-close-icon",4,"ngIf","ngIfElse"],["nz-icon","","nzType","close-circle","nzTheme","fill",1,"ant-select-close-icon"]],template:function(t,i){1&t&&o.YNc(0,vI,1,0,"span",0),2&t&&o.Q6J("ngIf",!i.clearIcon)("ngIfElse",i.clearIcon)},dependencies:[C.O5,te.Ls,$e.w],encapsulation:2,changeDetection:0}),n})(),BI=(()=>{class n{constructor(){this.loading=!1,this.search=!1,this.showArrow=!1,this.suffixIcon=null,this.feedbackIcon=null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-select-arrow"]],hostAttrs:[1,"ant-select-arrow"],hostVars:2,hostBindings:function(t,i){2&t&&o.ekj("ant-select-arrow-loading",i.loading)},inputs:{loading:"loading",search:"search",showArrow:"showArrow",suffixIcon:"suffixIcon",feedbackIcon:"feedbackIcon"},decls:4,vars:3,consts:[["nz-icon","","nzType","loading",4,"ngIf","ngIfElse"],["defaultArrow",""],[4,"nzStringTemplateOutlet"],["nz-icon","","nzType","loading"],[4,"ngIf","ngIfElse"],["suffixTemplate",""],["nz-icon","","nzType","down",4,"ngIf"],["nz-icon","","nzType","search",4,"ngIf"],["nz-icon","","nzType","down"],["nz-icon","","nzType","search"],["nz-icon","",3,"nzType",4,"ngIf"],["nz-icon","",3,"nzType"]],template:function(t,i){if(1&t&&(o.YNc(0,CI,1,0,"span",0),o.YNc(1,SI,3,2,"ng-template",null,1,o.W1O),o.YNc(3,NI,2,1,"ng-container",2)),2&t){const s=o.MAs(2);o.Q6J("ngIf",i.loading)("ngIfElse",s),o.xp6(3),o.Q6J("nzStringTemplateOutlet",i.feedbackIcon)}},dependencies:[C.O5,te.Ls,se.f,$e.w],encapsulation:2,changeDetection:0}),n})();const GI=(n,e)=>!(!e||!e.nzLabel)&&e.nzLabel.toString().toLowerCase().indexOf(n.toLowerCase())>-1;let ZI=(()=>{class n{constructor(t,i,s,r,a,l,c,u,h,d,p,g){this.ngZone=t,this.destroy$=i,this.nzConfigService=s,this.cdr=r,this.host=a,this.renderer=l,this.platform=c,this.focusMonitor=u,this.directionality=h,this.noAnimation=d,this.nzFormStatusService=p,this.nzFormNoStatusService=g,this._nzModuleName="select",this.nzId=null,this.nzSize="default",this.nzStatus="",this.nzOptionHeightPx=32,this.nzOptionOverflowSize=8,this.nzDropdownClassName=null,this.nzDropdownMatchSelectWidth=!0,this.nzDropdownStyle=null,this.nzNotFoundContent=void 0,this.nzPlaceHolder=null,this.nzPlacement=null,this.nzMaxTagCount=1/0,this.nzDropdownRender=null,this.nzCustomTemplate=null,this.nzSuffixIcon=null,this.nzClearIcon=null,this.nzRemoveIcon=null,this.nzMenuItemSelectedIcon=null,this.nzTokenSeparators=[],this.nzMaxTagPlaceholder=null,this.nzMaxMultipleCount=1/0,this.nzMode="default",this.nzFilterOption=GI,this.compareWith=(y,w)=>y===w,this.nzAllowClear=!1,this.nzBorderless=!1,this.nzShowSearch=!1,this.nzLoading=!1,this.nzAutoFocus=!1,this.nzAutoClearSearchValue=!0,this.nzServerSearch=!1,this.nzDisabled=!1,this.nzOpen=!1,this.nzBackdrop=!1,this.nzOptions=[],this.nzOnSearch=new o.vpe,this.nzScrollToBottom=new o.vpe,this.nzOpenChange=new o.vpe,this.nzBlur=new o.vpe,this.nzFocus=new o.vpe,this.listOfValue$=new pi.X([]),this.listOfTemplateItem$=new pi.X([]),this.listOfTagAndTemplateItem=[],this.searchValue="",this.isReactiveDriven=!1,this.requestId=-1,this.onChange=()=>{},this.onTouched=()=>{},this.dropDownPosition="bottomLeft",this.triggerWidth=null,this.listOfContainerItem=[],this.listOfTopItem=[],this.activatedValue=null,this.listOfValue=[],this.focused=!1,this.dir="ltr",this.positions=[],this.prefixCls="ant-select",this.statusCls={},this.status="",this.hasFeedback=!1}set nzShowArrow(t){this._nzShowArrow=t}get nzShowArrow(){return void 0===this._nzShowArrow?"default"===this.nzMode:this._nzShowArrow}generateTagItem(t){return{nzValue:t,nzLabel:t,type:"item"}}onItemClick(t){if(this.activatedValue=t,"default"===this.nzMode)(0===this.listOfValue.length||!this.compareWith(this.listOfValue[0],t))&&this.updateListOfValue([t]),this.setOpenState(!1);else{const i=this.listOfValue.findIndex(s=>this.compareWith(s,t));if(-1!==i){const s=this.listOfValue.filter((r,a)=>a!==i);this.updateListOfValue(s)}else if(this.listOfValue.length<this.nzMaxMultipleCount){const s=[...this.listOfValue,t];this.updateListOfValue(s)}this.focus(),this.nzAutoClearSearchValue&&this.clearInput()}}onItemDelete(t){const i=this.listOfValue.filter(s=>!this.compareWith(s,t.nzValue));this.updateListOfValue(i),this.clearInput()}updateListOfContainerItem(){let t=this.listOfTagAndTemplateItem.filter(r=>!r.nzHide).filter(r=>!(!this.nzServerSearch&&this.searchValue)||this.nzFilterOption(this.searchValue,r));if("tags"===this.nzMode&&this.searchValue){const r=this.listOfTagAndTemplateItem.find(a=>a.nzLabel===this.searchValue);if(r)this.activatedValue=r.nzValue;else{const a=this.generateTagItem(this.searchValue);t=[a,...t],this.activatedValue=a.nzValue}}const i=t.find(r=>r.nzLabel===this.searchValue)||t.find(r=>this.compareWith(r.nzValue,this.listOfValue[0]))||t[0];this.activatedValue=i&&i.nzValue||null;let s=[];this.isReactiveDriven?s=[...new Set(this.nzOptions.filter(r=>r.groupLabel).map(r=>r.groupLabel))]:this.listOfNzOptionGroupComponent&&(s=this.listOfNzOptionGroupComponent.map(r=>r.nzLabel)),s.forEach(r=>{const a=t.findIndex(l=>r===l.groupLabel);a>-1&&t.splice(a,0,{groupLabel:r,type:"group",key:r})}),this.listOfContainerItem=[...t],this.updateCdkConnectedOverlayPositions()}clearInput(){this.nzSelectTopControlComponent.clearInputValue()}updateListOfValue(t){const s=((r,a)=>"default"===this.nzMode?r.length>0?r[0]:null:r)(t);this.value!==s&&(this.listOfValue=t,this.listOfValue$.next(t),this.value=s,this.onChange(this.value))}onTokenSeparate(t){const i=this.listOfTagAndTemplateItem.filter(s=>-1!==t.findIndex(r=>r===s.nzLabel)).map(s=>s.nzValue).filter(s=>-1===this.listOfValue.findIndex(r=>this.compareWith(r,s)));if("multiple"===this.nzMode)this.updateListOfValue([...this.listOfValue,...i]);else if("tags"===this.nzMode){const s=t.filter(r=>-1===this.listOfTagAndTemplateItem.findIndex(a=>a.nzLabel===r));this.updateListOfValue([...this.listOfValue,...i,...s])}this.clearInput()}onKeyDown(t){if(this.nzDisabled)return;const i=this.listOfContainerItem.filter(r=>"item"===r.type).filter(r=>!r.nzDisabled),s=i.findIndex(r=>this.compareWith(r.nzValue,this.activatedValue));switch(t.keyCode){case Re.LH:t.preventDefault(),this.nzOpen&&i.length>0&&(this.activatedValue=i[s>0?s-1:i.length-1].nzValue);break;case Re.JH:t.preventDefault(),this.nzOpen&&i.length>0?this.activatedValue=i[s<i.length-1?s+1:0].nzValue:this.setOpenState(!0);break;case Re.K5:t.preventDefault(),this.nzOpen?(0,T.DX)(this.activatedValue)&&this.onItemClick(this.activatedValue):this.setOpenState(!0);break;case Re.L_:this.nzOpen||(this.setOpenState(!0),t.preventDefault());break;case Re.Mf:this.setOpenState(!1);break;case Re.hY:break;default:this.nzOpen||this.setOpenState(!0)}}setOpenState(t){this.nzOpen!==t&&(this.nzOpen=t,this.nzOpenChange.emit(t),this.onOpenChange(),this.cdr.markForCheck())}onOpenChange(){this.updateCdkConnectedOverlayStatus(),this.clearInput()}onInputValueChange(t){this.searchValue=t,this.updateListOfContainerItem(),this.nzOnSearch.emit(t),this.updateCdkConnectedOverlayPositions()}onClearSelection(){this.updateListOfValue([])}onClickOutside(t){this.host.nativeElement.contains(t.target)||this.setOpenState(!1)}focus(){this.nzSelectTopControlComponent.focus()}blur(){this.nzSelectTopControlComponent.blur()}onPositionChange(t){const i=(0,_i.d_)(t);this.dropDownPosition=i}updateCdkConnectedOverlayStatus(){if(this.platform.isBrowser&&this.originElement.nativeElement){const t=this.triggerWidth;eg(this.requestId),this.requestId=Gc(()=>{this.triggerWidth=this.originElement.nativeElement.getBoundingClientRect().width,t!==this.triggerWidth&&this.cdr.detectChanges()})}}updateCdkConnectedOverlayPositions(){Gc(()=>{this.cdkConnectedOverlay?.overlayRef?.updatePosition()})}writeValue(t){if(this.value!==t){this.value=t;const s=((r,a)=>null==r?[]:"default"===this.nzMode?[r]:r)(t);this.listOfValue=s,this.listOfValue$.next(s),this.cdr.markForCheck()}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.nzDisabled=t,t&&this.setOpenState(!1),this.cdr.markForCheck()}ngOnChanges(t){const{nzOpen:i,nzDisabled:s,nzOptions:r,nzStatus:a,nzPlacement:l}=t;if(i&&this.onOpenChange(),s&&this.nzDisabled&&this.setOpenState(!1),r){this.isReactiveDriven=!0;const u=(this.nzOptions||[]).map(h=>({template:h.label instanceof o.Rgc?h.label:null,nzLabel:"string"==typeof h.label||"number"==typeof h.label?h.label:null,nzValue:h.value,nzDisabled:h.disabled||!1,nzHide:h.hide||!1,nzCustomContent:h.label instanceof o.Rgc,groupLabel:h.groupLabel||null,type:"item",key:h.value}));this.listOfTemplateItem$.next(u)}if(a&&this.setStatusStyles(this.nzStatus,this.hasFeedback),l){const{currentValue:c}=l;this.dropDownPosition=c;const u=["bottomLeft","topLeft","bottomRight","topRight"];this.positions=c&&u.includes(c)?[_i.yW[c]]:u.map(h=>_i.yW[h])}}ngOnInit(){this.nzFormStatusService?.formStatusChanges.pipe((0,En.x)((t,i)=>t.status===i.status&&t.hasFeedback===i.hasFeedback),function Uw(...n){const e=(0,Zf.jO)(n);return(0,Mg.e)((t,i)=>{const s=n.length,r=new Array(s);let a=n.map(()=>!1),l=!1;for(let c=0;c<s;c++)(0,zc.Xf)(n[c]).subscribe((0,bo.x)(i,u=>{r[c]=u,!l&&!a[c]&&(a[c]=!0,(l=a.every(Gw.y))&&(a=null))},kg.Z));t.subscribe((0,bo.x)(i,c=>{if(l){const u=[c,...r];i.next(e?e(...u):u)}}))})}(this.nzFormNoStatusService?this.nzFormNoStatusService.noFormStatus:(0,Ci.of)(!1)),(0,De.U)(([{status:t,hasFeedback:i},s])=>({status:s?"":t,hasFeedback:i})),(0,F.R)(this.destroy$)).subscribe(({status:t,hasFeedback:i})=>{this.setStatusStyles(t,i)}),this.focusMonitor.monitor(this.host,!0).pipe((0,F.R)(this.destroy$)).subscribe(t=>{t?(this.focused=!0,this.cdr.markForCheck(),this.nzFocus.emit()):(this.focused=!1,this.cdr.markForCheck(),this.nzBlur.emit(),Promise.resolve().then(()=>{this.onTouched()}))}),(0,yw.a)([this.listOfValue$,this.listOfTemplateItem$]).pipe((0,F.R)(this.destroy$)).subscribe(([t,i])=>{const s=t.filter(()=>"tags"===this.nzMode).filter(r=>-1===i.findIndex(a=>this.compareWith(a.nzValue,r))).map(r=>this.listOfTopItem.find(a=>this.compareWith(a.nzValue,r))||this.generateTagItem(r));this.listOfTagAndTemplateItem=[...i,...s],this.listOfTopItem=this.listOfValue.map(r=>[...this.listOfTagAndTemplateItem,...this.listOfTopItem].find(a=>this.compareWith(r,a.nzValue))).filter(r=>!!r),this.updateListOfContainerItem()}),this.directionality.change?.pipe((0,F.R)(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.nzConfigService.getConfigChangeEventForComponent("select").pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.cdr.markForCheck()}),this.dir=this.directionality.value,this.ngZone.runOutsideAngular(()=>(0,An.R)(this.host.nativeElement,"click").pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.nzOpen&&this.nzShowSearch||this.nzDisabled||this.ngZone.run(()=>this.setOpenState(!this.nzOpen))})),this.cdkConnectedOverlay.overlayKeydown.pipe((0,F.R)(this.destroy$)).subscribe(t=>{t.keyCode===Re.hY&&this.setOpenState(!1)})}ngAfterContentInit(){this.isReactiveDriven||(0,zr.T)(this.listOfNzOptionGroupComponent.changes,this.listOfNzOptionComponent.changes).pipe((0,ot.O)(!0),(0,yi.w)(()=>(0,zr.T)(this.listOfNzOptionComponent.changes,this.listOfNzOptionGroupComponent.changes,...this.listOfNzOptionComponent.map(t=>t.changes),...this.listOfNzOptionGroupComponent.map(t=>t.changes)).pipe((0,ot.O)(!0))),(0,F.R)(this.destroy$)).subscribe(()=>{const t=this.listOfNzOptionComponent.toArray().map(i=>{const{template:s,nzLabel:r,nzValue:a,nzDisabled:l,nzHide:c,nzCustomContent:u,groupLabel:h}=i;return{template:s,nzLabel:r,nzValue:a,nzDisabled:l,nzHide:c,nzCustomContent:u,groupLabel:h,type:"item",key:a}});this.listOfTemplateItem$.next(t),this.cdr.markForCheck()})}ngOnDestroy(){eg(this.requestId),this.focusMonitor.stopMonitoring(this.host)}setStatusStyles(t,i){this.status=t,this.hasFeedback=i,this.cdr.markForCheck(),this.statusCls=(0,T.Zu)(this.prefixCls,t,i),Object.keys(this.statusCls).forEach(s=>{this.statusCls[s]?this.renderer.addClass(this.host.nativeElement,s):this.renderer.removeClass(this.host.nativeElement,s)})}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.R0b),o.Y36(it.kn),o.Y36(j.jY),o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.Qsj),o.Y36(we.t4),o.Y36(qc),o.Y36(ae.Is,8),o.Y36(jt.P,9),o.Y36(Yc,8),o.Y36(xr,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-select"]],contentQueries:function(t,i,s){if(1&t&&(o.Suo(s,Vg,5),o.Suo(s,Jc,5)),2&t){let r;o.iGM(r=o.CRH())&&(i.listOfNzOptionComponent=r),o.iGM(r=o.CRH())&&(i.listOfNzOptionGroupComponent=r)}},viewQuery:function(t,i){if(1&t&&(o.Gf(Ve.xu,7,o.SBq),o.Gf(Ve.pI,7),o.Gf(Kc,7),o.Gf(Jc,7,o.SBq),o.Gf(Kc,7,o.SBq)),2&t){let s;o.iGM(s=o.CRH())&&(i.originElement=s.first),o.iGM(s=o.CRH())&&(i.cdkConnectedOverlay=s.first),o.iGM(s=o.CRH())&&(i.nzSelectTopControlComponent=s.first),o.iGM(s=o.CRH())&&(i.nzOptionGroupComponentElement=s.first),o.iGM(s=o.CRH())&&(i.nzSelectTopControlComponentElement=s.first)}},hostAttrs:[1,"ant-select"],hostVars:26,hostBindings:function(t,i){2&t&&o.ekj("ant-select-in-form-item",!!i.nzFormStatusService)("ant-select-lg","large"===i.nzSize)("ant-select-sm","small"===i.nzSize)("ant-select-show-arrow",i.nzShowArrow)("ant-select-disabled",i.nzDisabled)("ant-select-show-search",(i.nzShowSearch||"default"!==i.nzMode)&&!i.nzDisabled)("ant-select-allow-clear",i.nzAllowClear)("ant-select-borderless",i.nzBorderless)("ant-select-open",i.nzOpen)("ant-select-focused",i.nzOpen||i.focused)("ant-select-single","default"===i.nzMode)("ant-select-multiple","default"!==i.nzMode)("ant-select-rtl","rtl"===i.dir)},inputs:{nzId:"nzId",nzSize:"nzSize",nzStatus:"nzStatus",nzOptionHeightPx:"nzOptionHeightPx",nzOptionOverflowSize:"nzOptionOverflowSize",nzDropdownClassName:"nzDropdownClassName",nzDropdownMatchSelectWidth:"nzDropdownMatchSelectWidth",nzDropdownStyle:"nzDropdownStyle",nzNotFoundContent:"nzNotFoundContent",nzPlaceHolder:"nzPlaceHolder",nzPlacement:"nzPlacement",nzMaxTagCount:"nzMaxTagCount",nzDropdownRender:"nzDropdownRender",nzCustomTemplate:"nzCustomTemplate",nzSuffixIcon:"nzSuffixIcon",nzClearIcon:"nzClearIcon",nzRemoveIcon:"nzRemoveIcon",nzMenuItemSelectedIcon:"nzMenuItemSelectedIcon",nzTokenSeparators:"nzTokenSeparators",nzMaxTagPlaceholder:"nzMaxTagPlaceholder",nzMaxMultipleCount:"nzMaxMultipleCount",nzMode:"nzMode",nzFilterOption:"nzFilterOption",compareWith:"compareWith",nzAllowClear:"nzAllowClear",nzBorderless:"nzBorderless",nzShowSearch:"nzShowSearch",nzLoading:"nzLoading",nzAutoFocus:"nzAutoFocus",nzAutoClearSearchValue:"nzAutoClearSearchValue",nzServerSearch:"nzServerSearch",nzDisabled:"nzDisabled",nzOpen:"nzOpen",nzBackdrop:"nzBackdrop",nzOptions:"nzOptions",nzShowArrow:"nzShowArrow"},outputs:{nzOnSearch:"nzOnSearch",nzScrollToBottom:"nzScrollToBottom",nzOpenChange:"nzOpenChange",nzBlur:"nzBlur",nzFocus:"nzFocus"},exportAs:["nzSelect"],features:[o._Bn([it.kn,{provide:nt,useExisting:(0,o.Gpc)(()=>n),multi:!0}]),o.TTD],decls:5,vars:25,consts:[["cdkOverlayOrigin","",3,"nzId","open","disabled","mode","nzNoAnimation","maxTagPlaceholder","removeIcon","placeHolder","maxTagCount","customTemplate","tokenSeparators","showSearch","autofocus","listOfTopItem","inputValueChange","tokenize","deleteItem","keydown"],["origin","cdkOverlayOrigin"],[3,"showArrow","loading","search","suffixIcon","feedbackIcon",4,"ngIf"],[3,"clearIcon","clear",4,"ngIf"],["cdkConnectedOverlay","","nzConnectedOverlay","",3,"cdkConnectedOverlayHasBackdrop","cdkConnectedOverlayMinWidth","cdkConnectedOverlayWidth","cdkConnectedOverlayOrigin","cdkConnectedOverlayTransformOriginOn","cdkConnectedOverlayPanelClass","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","overlayOutsideClick","detach","positionChange"],[3,"showArrow","loading","search","suffixIcon","feedbackIcon"],["feedbackIconTpl",""],[3,"status",4,"ngIf"],[3,"status"],[3,"clearIcon","clear"],[3,"ngStyle","itemSize","maxItemLength","matchWidth","nzNoAnimation","listOfContainerItem","menuItemSelectedIcon","notFoundContent","activatedValue","listOfSelectedValue","dropdownRender","compareWith","mode","keydown","itemClick","scrollToBottom"]],template:function(t,i){if(1&t&&(o.TgZ(0,"nz-select-top-control",0,1),o.NdJ("inputValueChange",function(r){return i.onInputValueChange(r)})("tokenize",function(r){return i.onTokenSeparate(r)})("deleteItem",function(r){return i.onItemDelete(r)})("keydown",function(r){return i.onKeyDown(r)}),o.qZA(),o.YNc(2,DI,3,5,"nz-select-arrow",2),o.YNc(3,EI,1,1,"nz-select-clear",3),o.YNc(4,MI,1,23,"ng-template",4),o.NdJ("overlayOutsideClick",function(r){return i.onClickOutside(r)})("detach",function(){return i.setOpenState(!1)})("positionChange",function(r){return i.onPositionChange(r)})),2&t){const s=o.MAs(1);o.Q6J("nzId",i.nzId)("open",i.nzOpen)("disabled",i.nzDisabled)("mode",i.nzMode)("@.disabled",null==i.noAnimation?null:i.noAnimation.nzNoAnimation)("nzNoAnimation",null==i.noAnimation?null:i.noAnimation.nzNoAnimation)("maxTagPlaceholder",i.nzMaxTagPlaceholder)("removeIcon",i.nzRemoveIcon)("placeHolder",i.nzPlaceHolder)("maxTagCount",i.nzMaxTagCount)("customTemplate",i.nzCustomTemplate)("tokenSeparators",i.nzTokenSeparators)("showSearch",i.nzShowSearch)("autofocus",i.nzAutoFocus)("listOfTopItem",i.listOfTopItem),o.xp6(2),o.Q6J("ngIf",i.nzShowArrow||i.hasFeedback&&!!i.status),o.xp6(1),o.Q6J("ngIf",i.nzAllowClear&&!i.nzDisabled&&i.listOfValue.length),o.xp6(1),o.Q6J("cdkConnectedOverlayHasBackdrop",i.nzBackdrop)("cdkConnectedOverlayMinWidth",i.nzDropdownMatchSelectWidth?null:i.triggerWidth)("cdkConnectedOverlayWidth",i.nzDropdownMatchSelectWidth?i.triggerWidth:null)("cdkConnectedOverlayOrigin",s)("cdkConnectedOverlayTransformOriginOn",".ant-select-dropdown")("cdkConnectedOverlayPanelClass",i.nzDropdownClassName)("cdkConnectedOverlayOpen",i.nzOpen)("cdkConnectedOverlayPositions",i.positions)}},dependencies:[C.O5,C.PC,Ve.pI,Ve.xu,_i.hQ,jt.P,$e.w,Hc,VI,Kc,PI,BI],encapsulation:2,data:{animation:[$w]},changeDetection:0}),(0,D.gn)([(0,j.oS)()],n.prototype,"nzSuffixIcon",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzAllowClear",void 0),(0,D.gn)([(0,j.oS)(),(0,T.yF)()],n.prototype,"nzBorderless",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzShowSearch",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzLoading",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzAutoFocus",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzAutoClearSearchValue",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzServerSearch",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzDisabled",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzOpen",void 0),(0,D.gn)([(0,j.oS)(),(0,T.yF)()],n.prototype,"nzBackdrop",void 0),n})(),Lg=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ae.vT,C.ez,Qt.YI,Km,we.ud,Ve.U8,te.PV,se.T,Eg,_i.e4,jt.g,$e.a,Cg,Fo.Cl,H1]}),n})();const qI=["nz-pagination-item",""];function $I(n,e){if(1&n&&(o.TgZ(0,"a"),o._uU(1),o.qZA()),2&n){const t=o.oxw().page;o.xp6(1),o.Oqu(t)}}function QI(n,e){1&n&&o._UZ(0,"span",9)}function jI(n,e){1&n&&o._UZ(0,"span",10)}function YI(n,e){if(1&n&&(o.TgZ(0,"button",6),o.ynx(1,2),o.YNc(2,QI,1,0,"span",7),o.YNc(3,jI,1,0,"span",8),o.BQk(),o.qZA()),2&n){const t=o.oxw(2);o.Q6J("disabled",t.disabled),o.xp6(1),o.Q6J("ngSwitch",t.direction),o.xp6(1),o.Q6J("ngSwitchCase","rtl")}}function HI(n,e){1&n&&o._UZ(0,"span",10)}function JI(n,e){1&n&&o._UZ(0,"span",9)}function KI(n,e){if(1&n&&(o.TgZ(0,"button",6),o.ynx(1,2),o.YNc(2,HI,1,0,"span",11),o.YNc(3,JI,1,0,"span",12),o.BQk(),o.qZA()),2&n){const t=o.oxw(2);o.Q6J("disabled",t.disabled),o.xp6(1),o.Q6J("ngSwitch",t.direction),o.xp6(1),o.Q6J("ngSwitchCase","rtl")}}function WI(n,e){1&n&&o._UZ(0,"span",20)}function XI(n,e){1&n&&o._UZ(0,"span",21)}function eb(n,e){if(1&n&&(o.ynx(0,2),o.YNc(1,WI,1,0,"span",18),o.YNc(2,XI,1,0,"span",19),o.BQk()),2&n){const t=o.oxw(4);o.Q6J("ngSwitch",t.direction),o.xp6(1),o.Q6J("ngSwitchCase","rtl")}}function tb(n,e){1&n&&o._UZ(0,"span",21)}function nb(n,e){1&n&&o._UZ(0,"span",20)}function ib(n,e){if(1&n&&(o.ynx(0,2),o.YNc(1,tb,1,0,"span",22),o.YNc(2,nb,1,0,"span",23),o.BQk()),2&n){const t=o.oxw(4);o.Q6J("ngSwitch",t.direction),o.xp6(1),o.Q6J("ngSwitchCase","rtl")}}function ob(n,e){if(1&n&&(o.TgZ(0,"div",15),o.ynx(1,2),o.YNc(2,eb,3,2,"ng-container",16),o.YNc(3,ib,3,2,"ng-container",16),o.BQk(),o.TgZ(4,"span",17),o._uU(5,"\u2022\u2022\u2022"),o.qZA()()),2&n){const t=o.oxw(2).$implicit;o.xp6(1),o.Q6J("ngSwitch",t),o.xp6(1),o.Q6J("ngSwitchCase","prev_5"),o.xp6(1),o.Q6J("ngSwitchCase","next_5")}}function sb(n,e){if(1&n&&(o.ynx(0),o.TgZ(1,"a",13),o.YNc(2,ob,6,3,"div",14),o.qZA(),o.BQk()),2&n){const t=o.oxw().$implicit;o.xp6(1),o.Q6J("ngSwitch",t)}}function rb(n,e){1&n&&(o.ynx(0,2),o.YNc(1,$I,2,1,"a",3),o.YNc(2,YI,4,3,"button",4),o.YNc(3,KI,4,3,"button",4),o.YNc(4,sb,3,1,"ng-container",5),o.BQk()),2&n&&(o.Q6J("ngSwitch",e.$implicit),o.xp6(1),o.Q6J("ngSwitchCase","page"),o.xp6(1),o.Q6J("ngSwitchCase","prev"),o.xp6(1),o.Q6J("ngSwitchCase","next"))}function ab(n,e){}const lb=function(n,e){return{$implicit:n,page:e}},Pg=["containerTemplate"];function cb(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"ul")(1,"li",1),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.prePage())}),o.qZA(),o.TgZ(2,"li",2)(3,"input",3),o.NdJ("keydown.enter",function(s){o.CHM(t);const r=o.oxw();return o.KtG(r.jumpToPageViaInput(s))}),o.qZA(),o.TgZ(4,"span",4),o._uU(5,"/"),o.qZA(),o._uU(6),o.qZA(),o.TgZ(7,"li",5),o.NdJ("click",function(){o.CHM(t);const s=o.oxw();return o.KtG(s.nextPage())}),o.qZA()()}if(2&n){const t=o.oxw();o.xp6(1),o.Q6J("disabled",t.isFirstIndex)("direction",t.dir)("itemRender",t.itemRender),o.uIk("title",t.locale.prev_page),o.xp6(1),o.uIk("title",t.pageIndex+"/"+t.lastIndex),o.xp6(1),o.Q6J("disabled",t.disabled)("value",t.pageIndex),o.xp6(3),o.hij(" ",t.lastIndex," "),o.xp6(1),o.Q6J("disabled",t.isLastIndex)("direction",t.dir)("itemRender",t.itemRender),o.uIk("title",null==t.locale?null:t.locale.next_page)}}const ub=["nz-pagination-options",""];function hb(n,e){if(1&n&&o._UZ(0,"nz-option",4),2&n){const t=e.$implicit;o.Q6J("nzLabel",t.label)("nzValue",t.value)}}function db(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"nz-select",2),o.NdJ("ngModelChange",function(s){o.CHM(t);const r=o.oxw();return o.KtG(r.onPageSizeChange(s))}),o.YNc(1,hb,1,2,"nz-option",3),o.qZA()}if(2&n){const t=o.oxw();o.Q6J("nzDisabled",t.disabled)("nzSize",t.nzSize)("ngModel",t.pageSize),o.xp6(1),o.Q6J("ngForOf",t.listOfPageSizeOption)("ngForTrackBy",t.trackByOption)}}function pb(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"div",5),o._uU(1),o.TgZ(2,"input",6),o.NdJ("keydown.enter",function(s){o.CHM(t);const r=o.oxw();return o.KtG(r.jumpToPageViaInput(s))}),o.qZA(),o._uU(3),o.qZA()}if(2&n){const t=o.oxw();o.xp6(1),o.hij(" ",t.locale.jump_to," "),o.xp6(1),o.Q6J("disabled",t.disabled),o.xp6(1),o.hij(" ",t.locale.page," ")}}function fb(n,e){}const mb=function(n,e){return{$implicit:n,range:e}};function gb(n,e){if(1&n&&(o.TgZ(0,"li",4),o.YNc(1,fb,0,0,"ng-template",5),o.qZA()),2&n){const t=o.oxw(2);o.xp6(1),o.Q6J("ngTemplateOutlet",t.showTotal)("ngTemplateOutletContext",o.WLB(2,mb,t.total,t.ranges))}}function _b(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"li",6),o.NdJ("gotoIndex",function(s){o.CHM(t);const r=o.oxw(2);return o.KtG(r.jumpPage(s))})("diffIndex",function(s){o.CHM(t);const r=o.oxw(2);return o.KtG(r.jumpDiff(s))}),o.qZA()}if(2&n){const t=e.$implicit,i=o.oxw(2);o.Q6J("locale",i.locale)("type",t.type)("index",t.index)("disabled",!!t.disabled)("itemRender",i.itemRender)("active",i.pageIndex===t.index)("direction",i.dir)}}function yb(n,e){if(1&n){const t=o.EpF();o.TgZ(0,"li",7),o.NdJ("pageIndexChange",function(s){o.CHM(t);const r=o.oxw(2);return o.KtG(r.onPageIndexChange(s))})("pageSizeChange",function(s){o.CHM(t);const r=o.oxw(2);return o.KtG(r.onPageSizeChange(s))}),o.qZA()}if(2&n){const t=o.oxw(2);o.Q6J("total",t.total)("locale",t.locale)("disabled",t.disabled)("nzSize",t.nzSize)("showSizeChanger",t.showSizeChanger)("showQuickJumper",t.showQuickJumper)("pageIndex",t.pageIndex)("pageSize",t.pageSize)("pageSizeOptions",t.pageSizeOptions)}}function vb(n,e){if(1&n&&(o.TgZ(0,"ul"),o.YNc(1,gb,2,5,"li",1),o.YNc(2,_b,1,7,"li",2),o.YNc(3,yb,1,9,"li",3),o.qZA()),2&n){const t=o.oxw();o.xp6(1),o.Q6J("ngIf",t.showTotal),o.xp6(1),o.Q6J("ngForOf",t.listOfPageItem)("ngForTrackBy",t.trackByPageItem),o.xp6(1),o.Q6J("ngIf",t.showQuickJumper||t.showSizeChanger)}}function Cb(n,e){}function zb(n,e){if(1&n&&(o.ynx(0),o.YNc(1,Cb,0,0,"ng-template",6),o.BQk()),2&n){o.oxw(2);const t=o.MAs(2);o.xp6(1),o.Q6J("ngTemplateOutlet",t.template)}}function xb(n,e){if(1&n&&(o.ynx(0),o.YNc(1,zb,2,1,"ng-container",5),o.BQk()),2&n){const t=o.oxw(),i=o.MAs(4);o.xp6(1),o.Q6J("ngIf",t.nzSimple)("ngIfElse",i.template)}}let Bg=(()=>{class n{constructor(){this.active=!1,this.index=null,this.disabled=!1,this.direction="ltr",this.type=null,this.itemRender=null,this.diffIndex=new o.vpe,this.gotoIndex=new o.vpe,this.title=null}clickItem(){this.disabled||("page"===this.type?this.gotoIndex.emit(this.index):this.diffIndex.emit({next:1,prev:-1,prev_5:-5,next_5:5}[this.type]))}ngOnChanges(t){const{locale:i,index:s,type:r}=t;(i||s||r)&&(this.title={page:`${this.index}`,next:this.locale?.next_page,prev:this.locale?.prev_page,prev_5:this.locale?.prev_5,next_5:this.locale?.next_5}[this.type])}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["li","nz-pagination-item",""]],hostVars:19,hostBindings:function(t,i){1&t&&o.NdJ("click",function(){return i.clickItem()}),2&t&&(o.uIk("title",i.title),o.ekj("ant-pagination-prev","prev"===i.type)("ant-pagination-next","next"===i.type)("ant-pagination-item","page"===i.type)("ant-pagination-jump-prev","prev_5"===i.type)("ant-pagination-jump-prev-custom-icon","prev_5"===i.type)("ant-pagination-jump-next","next_5"===i.type)("ant-pagination-jump-next-custom-icon","next_5"===i.type)("ant-pagination-disabled",i.disabled)("ant-pagination-item-active",i.active))},inputs:{active:"active",locale:"locale",index:"index",disabled:"disabled",direction:"direction",type:"type",itemRender:"itemRender"},outputs:{diffIndex:"diffIndex",gotoIndex:"gotoIndex"},features:[o.TTD],attrs:qI,decls:3,vars:5,consts:[["renderItemTemplate",""],[3,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch"],[4,"ngSwitchCase"],["type","button","class","ant-pagination-item-link",3,"disabled",4,"ngSwitchCase"],[4,"ngSwitchDefault"],["type","button",1,"ant-pagination-item-link",3,"disabled"],["nz-icon","","nzType","right",4,"ngSwitchCase"],["nz-icon","","nzType","left",4,"ngSwitchDefault"],["nz-icon","","nzType","right"],["nz-icon","","nzType","left"],["nz-icon","","nzType","left",4,"ngSwitchCase"],["nz-icon","","nzType","right",4,"ngSwitchDefault"],[1,"ant-pagination-item-link",3,"ngSwitch"],["class","ant-pagination-item-container",4,"ngSwitchDefault"],[1,"ant-pagination-item-container"],[3,"ngSwitch",4,"ngSwitchCase"],[1,"ant-pagination-item-ellipsis"],["nz-icon","","nzType","double-right","class","ant-pagination-item-link-icon",4,"ngSwitchCase"],["nz-icon","","nzType","double-left","class","ant-pagination-item-link-icon",4,"ngSwitchDefault"],["nz-icon","","nzType","double-right",1,"ant-pagination-item-link-icon"],["nz-icon","","nzType","double-left",1,"ant-pagination-item-link-icon"],["nz-icon","","nzType","double-left","class","ant-pagination-item-link-icon",4,"ngSwitchCase"],["nz-icon","","nzType","double-right","class","ant-pagination-item-link-icon",4,"ngSwitchDefault"]],template:function(t,i){if(1&t&&(o.YNc(0,rb,5,4,"ng-template",null,0,o.W1O),o.YNc(2,ab,0,0,"ng-template",1)),2&t){const s=o.MAs(1);o.xp6(2),o.Q6J("ngTemplateOutlet",i.itemRender||s)("ngTemplateOutletContext",o.WLB(2,lb,i.type,i.index))}},dependencies:[C.tP,C.RF,C.n9,C.ED,te.Ls],encapsulation:2,changeDetection:0}),n})(),Tb=(()=>{class n{constructor(t,i,s,r){this.cdr=t,this.renderer=i,this.elementRef=s,this.directionality=r,this.itemRender=null,this.disabled=!1,this.total=0,this.pageIndex=1,this.pageSize=10,this.pageIndexChange=new o.vpe,this.lastIndex=0,this.isFirstIndex=!1,this.isLastIndex=!1,this.dir="ltr",this.destroy$=new K.x,i.removeChild(i.parentNode(s.nativeElement),s.nativeElement)}ngOnInit(){this.directionality.change?.pipe((0,F.R)(this.destroy$)).subscribe(t=>{this.dir=t,this.updateRtlStyle(),this.cdr.detectChanges()}),this.dir=this.directionality.value,this.updateRtlStyle()}updateRtlStyle(){"rtl"===this.dir?this.renderer.addClass(this.elementRef.nativeElement,"ant-pagination-rtl"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-pagination-rtl")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}jumpToPageViaInput(t){const i=t.target,s=(0,T.He)(i.value,this.pageIndex);this.onPageIndexChange(s),i.value=`${this.pageIndex}`}prePage(){this.onPageIndexChange(this.pageIndex-1)}nextPage(){this.onPageIndexChange(this.pageIndex+1)}onPageIndexChange(t){this.pageIndexChange.next(t)}updateBindingValue(){this.lastIndex=Math.ceil(this.total/this.pageSize),this.isFirstIndex=1===this.pageIndex,this.isLastIndex=this.pageIndex===this.lastIndex}ngOnChanges(t){const{pageIndex:i,total:s,pageSize:r}=t;(i||s||r)&&this.updateBindingValue()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.sBO),o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(ae.Is,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-pagination-simple"]],viewQuery:function(t,i){if(1&t&&o.Gf(Pg,7),2&t){let s;o.iGM(s=o.CRH())&&(i.template=s.first)}},inputs:{itemRender:"itemRender",disabled:"disabled",locale:"locale",total:"total",pageIndex:"pageIndex",pageSize:"pageSize"},outputs:{pageIndexChange:"pageIndexChange"},features:[o.TTD],decls:2,vars:0,consts:[["containerTemplate",""],["nz-pagination-item","","type","prev",3,"disabled","direction","itemRender","click"],[1,"ant-pagination-simple-pager"],["size","3",3,"disabled","value","keydown.enter"],[1,"ant-pagination-slash"],["nz-pagination-item","","type","next",3,"disabled","direction","itemRender","click"]],template:function(t,i){1&t&&o.YNc(0,cb,8,12,"ng-template",null,0,o.W1O)},dependencies:[Bg],encapsulation:2,changeDetection:0}),n})(),wb=(()=>{class n{constructor(){this.nzSize="default",this.disabled=!1,this.showSizeChanger=!1,this.showQuickJumper=!1,this.total=0,this.pageIndex=1,this.pageSize=10,this.pageSizeOptions=[],this.pageIndexChange=new o.vpe,this.pageSizeChange=new o.vpe,this.listOfPageSizeOption=[]}onPageSizeChange(t){this.pageSize!==t&&this.pageSizeChange.next(t)}jumpToPageViaInput(t){const i=t.target,s=Math.floor((0,T.He)(i.value,this.pageIndex));this.pageIndexChange.next(s),i.value=""}trackByOption(t,i){return i.value}ngOnChanges(t){const{pageSize:i,pageSizeOptions:s,locale:r}=t;(i||s||r)&&(this.listOfPageSizeOption=[...new Set([...this.pageSizeOptions,this.pageSize])].map(a=>({value:a,label:`${a} ${this.locale.items_per_page}`})))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=o.Xpm({type:n,selectors:[["li","nz-pagination-options",""]],hostAttrs:[1,"ant-pagination-options"],inputs:{nzSize:"nzSize",disabled:"disabled",showSizeChanger:"showSizeChanger",showQuickJumper:"showQuickJumper",locale:"locale",total:"total",pageIndex:"pageIndex",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions"},outputs:{pageIndexChange:"pageIndexChange",pageSizeChange:"pageSizeChange"},features:[o.TTD],attrs:ub,decls:2,vars:2,consts:[["class","ant-pagination-options-size-changer",3,"nzDisabled","nzSize","ngModel","ngModelChange",4,"ngIf"],["class","ant-pagination-options-quick-jumper",4,"ngIf"],[1,"ant-pagination-options-size-changer",3,"nzDisabled","nzSize","ngModel","ngModelChange"],[3,"nzLabel","nzValue",4,"ngFor","ngForOf","ngForTrackBy"],[3,"nzLabel","nzValue"],[1,"ant-pagination-options-quick-jumper"],[3,"disabled","keydown.enter"]],template:function(t,i){1&t&&(o.YNc(0,db,2,5,"nz-select",0),o.YNc(1,pb,4,3,"div",1)),2&t&&(o.Q6J("ngIf",i.showSizeChanger),o.xp6(1),o.Q6J("ngIf",i.showQuickJumper))},dependencies:[C.sg,C.O5,So,pr,Vg,ZI],encapsulation:2,changeDetection:0}),n})(),Ib=(()=>{class n{constructor(t,i,s,r){this.cdr=t,this.renderer=i,this.elementRef=s,this.directionality=r,this.nzSize="default",this.itemRender=null,this.showTotal=null,this.disabled=!1,this.showSizeChanger=!1,this.showQuickJumper=!1,this.total=0,this.pageIndex=1,this.pageSize=10,this.pageSizeOptions=[10,20,30,40],this.pageIndexChange=new o.vpe,this.pageSizeChange=new o.vpe,this.ranges=[0,0],this.listOfPageItem=[],this.dir="ltr",this.destroy$=new K.x,i.removeChild(i.parentNode(s.nativeElement),s.nativeElement)}ngOnInit(){this.directionality.change?.pipe((0,F.R)(this.destroy$)).subscribe(t=>{this.dir=t,this.updateRtlStyle(),this.cdr.detectChanges()}),this.dir=this.directionality.value,this.updateRtlStyle()}updateRtlStyle(){"rtl"===this.dir?this.renderer.addClass(this.elementRef.nativeElement,"ant-pagination-rtl"):this.renderer.removeClass(this.elementRef.nativeElement,"ant-pagination-rtl")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}jumpPage(t){this.onPageIndexChange(t)}jumpDiff(t){this.jumpPage(this.pageIndex+t)}trackByPageItem(t,i){return`${i.type}-${i.index}`}onPageIndexChange(t){this.pageIndexChange.next(t)}onPageSizeChange(t){this.pageSizeChange.next(t)}getLastIndex(t,i){return Math.ceil(t/i)}buildIndexes(){const t=this.getLastIndex(this.total,this.pageSize);this.listOfPageItem=this.getListOfPageItem(this.pageIndex,t)}getListOfPageItem(t,i){const r=(a,l)=>{const c=[];for(let u=a;u<=l;u++)c.push({index:u,type:"page"});return c};return a=i<=9?r(1,i):((l,c)=>{let u=[];const h={type:"prev_5"},d={type:"next_5"},p=r(1,1),g=r(i,i);return u=l<5?[...r(2,4===l?6:5),d]:l<c-3?[h,...r(l-2,l+2),d]:[h,...r(l===c-3?c-5:c-4,c-1)],[...p,...u,...g]})(t,i),[{type:"prev",disabled:1===t},...a,{type:"next",disabled:t===i}];var a}ngOnChanges(t){const{pageIndex:i,pageSize:s,total:r}=t;(i||s||r)&&(this.ranges=[(this.pageIndex-1)*this.pageSize+1,Math.min(this.pageIndex*this.pageSize,this.total)],this.buildIndexes())}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(o.sBO),o.Y36(o.Qsj),o.Y36(o.SBq),o.Y36(ae.Is,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-pagination-default"]],viewQuery:function(t,i){if(1&t&&o.Gf(Pg,7),2&t){let s;o.iGM(s=o.CRH())&&(i.template=s.first)}},inputs:{nzSize:"nzSize",itemRender:"itemRender",showTotal:"showTotal",disabled:"disabled",locale:"locale",showSizeChanger:"showSizeChanger",showQuickJumper:"showQuickJumper",total:"total",pageIndex:"pageIndex",pageSize:"pageSize",pageSizeOptions:"pageSizeOptions"},outputs:{pageIndexChange:"pageIndexChange",pageSizeChange:"pageSizeChange"},features:[o.TTD],decls:2,vars:0,consts:[["containerTemplate",""],["class","ant-pagination-total-text",4,"ngIf"],["nz-pagination-item","",3,"locale","type","index","disabled","itemRender","active","direction","gotoIndex","diffIndex",4,"ngFor","ngForOf","ngForTrackBy"],["nz-pagination-options","",3,"total","locale","disabled","nzSize","showSizeChanger","showQuickJumper","pageIndex","pageSize","pageSizeOptions","pageIndexChange","pageSizeChange",4,"ngIf"],[1,"ant-pagination-total-text"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["nz-pagination-item","",3,"locale","type","index","disabled","itemRender","active","direction","gotoIndex","diffIndex"],["nz-pagination-options","",3,"total","locale","disabled","nzSize","showSizeChanger","showQuickJumper","pageIndex","pageSize","pageSizeOptions","pageIndexChange","pageSizeChange"]],template:function(t,i){1&t&&o.YNc(0,vb,4,4,"ng-template",null,0,o.W1O)},dependencies:[C.sg,C.O5,C.tP,wb,Bg],encapsulation:2,changeDetection:0}),n})(),Sb=(()=>{class n{constructor(t,i,s,r,a){this.i18n=t,this.cdr=i,this.breakpointService=s,this.nzConfigService=r,this.directionality=a,this._nzModuleName="pagination",this.nzPageSizeChange=new o.vpe,this.nzPageIndexChange=new o.vpe,this.nzShowTotal=null,this.nzItemRender=null,this.nzSize="default",this.nzPageSizeOptions=[10,20,30,40],this.nzShowSizeChanger=!1,this.nzShowQuickJumper=!1,this.nzSimple=!1,this.nzDisabled=!1,this.nzResponsive=!1,this.nzHideOnSinglePage=!1,this.nzTotal=0,this.nzPageIndex=1,this.nzPageSize=10,this.showPagination=!0,this.size="default",this.dir="ltr",this.destroy$=new K.x,this.total$=new Lo.t(1)}validatePageIndex(t,i){return t>i?i:t<1?1:t}onPageIndexChange(t){const i=this.getLastIndex(this.nzTotal,this.nzPageSize),s=this.validatePageIndex(t,i);s!==this.nzPageIndex&&!this.nzDisabled&&(this.nzPageIndex=s,this.nzPageIndexChange.emit(this.nzPageIndex))}onPageSizeChange(t){this.nzPageSize=t,this.nzPageSizeChange.emit(t);const i=this.getLastIndex(this.nzTotal,this.nzPageSize);this.nzPageIndex>i&&this.onPageIndexChange(i)}onTotalChange(t){const i=this.getLastIndex(t,this.nzPageSize);this.nzPageIndex>i&&Promise.resolve().then(()=>{this.onPageIndexChange(i),this.cdr.markForCheck()})}getLastIndex(t,i){return Math.ceil(t/i)}ngOnInit(){this.i18n.localeChange.pipe((0,F.R)(this.destroy$)).subscribe(()=>{this.locale=this.i18n.getLocaleData("Pagination"),this.cdr.markForCheck()}),this.total$.pipe((0,F.R)(this.destroy$)).subscribe(t=>{this.onTotalChange(t)}),this.breakpointService.subscribe(it.WV).pipe((0,F.R)(this.destroy$)).subscribe(t=>{this.nzResponsive&&(this.size=t===it.G_.xs?"small":"default",this.cdr.markForCheck())}),this.directionality.change?.pipe((0,F.R)(this.destroy$)).subscribe(t=>{this.dir=t,this.cdr.detectChanges()}),this.dir=this.directionality.value}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}ngOnChanges(t){const{nzHideOnSinglePage:i,nzTotal:s,nzPageSize:r,nzSize:a}=t;s&&this.total$.next(this.nzTotal),(i||s||r)&&(this.showPagination=this.nzHideOnSinglePage&&this.nzTotal>this.nzPageSize||this.nzTotal>0&&!this.nzHideOnSinglePage),a&&(this.size=a.currentValue)}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Qt.wi),o.Y36(o.sBO),o.Y36(it.r3),o.Y36(j.jY),o.Y36(ae.Is,8))},n.\u0275cmp=o.Xpm({type:n,selectors:[["nz-pagination"]],hostAttrs:[1,"ant-pagination"],hostVars:8,hostBindings:function(t,i){2&t&&o.ekj("ant-pagination-simple",i.nzSimple)("ant-pagination-disabled",i.nzDisabled)("mini",!i.nzSimple&&"small"===i.size)("ant-pagination-rtl","rtl"===i.dir)},inputs:{nzShowTotal:"nzShowTotal",nzItemRender:"nzItemRender",nzSize:"nzSize",nzPageSizeOptions:"nzPageSizeOptions",nzShowSizeChanger:"nzShowSizeChanger",nzShowQuickJumper:"nzShowQuickJumper",nzSimple:"nzSimple",nzDisabled:"nzDisabled",nzResponsive:"nzResponsive",nzHideOnSinglePage:"nzHideOnSinglePage",nzTotal:"nzTotal",nzPageIndex:"nzPageIndex",nzPageSize:"nzPageSize"},outputs:{nzPageSizeChange:"nzPageSizeChange",nzPageIndexChange:"nzPageIndexChange"},exportAs:["nzPagination"],features:[o.TTD],decls:5,vars:18,consts:[[4,"ngIf"],[3,"disabled","itemRender","locale","pageSize","total","pageIndex","pageIndexChange"],["simplePagination",""],[3,"nzSize","itemRender","showTotal","disabled","locale","showSizeChanger","showQuickJumper","total","pageIndex","pageSize","pageSizeOptions","pageIndexChange","pageSizeChange"],["defaultPagination",""],[4,"ngIf","ngIfElse"],[3,"ngTemplateOutlet"]],template:function(t,i){1&t&&(o.YNc(0,xb,2,2,"ng-container",0),o.TgZ(1,"nz-pagination-simple",1,2),o.NdJ("pageIndexChange",function(r){return i.onPageIndexChange(r)}),o.qZA(),o.TgZ(3,"nz-pagination-default",3,4),o.NdJ("pageIndexChange",function(r){return i.onPageIndexChange(r)})("pageSizeChange",function(r){return i.onPageSizeChange(r)}),o.qZA()),2&t&&(o.Q6J("ngIf",i.showPagination),o.xp6(1),o.Q6J("disabled",i.nzDisabled)("itemRender",i.nzItemRender)("locale",i.locale)("pageSize",i.nzPageSize)("total",i.nzTotal)("pageIndex",i.nzPageIndex),o.xp6(2),o.Q6J("nzSize",i.size)("itemRender",i.nzItemRender)("showTotal",i.nzShowTotal)("disabled",i.nzDisabled)("locale",i.locale)("showSizeChanger",i.nzShowSizeChanger)("showQuickJumper",i.nzShowQuickJumper)("total",i.nzTotal)("pageIndex",i.nzPageIndex)("pageSize",i.nzPageSize)("pageSizeOptions",i.nzPageSizeOptions))},dependencies:[C.O5,C.tP,Tb,Ib],encapsulation:2,changeDetection:0}),(0,D.gn)([(0,j.oS)()],n.prototype,"nzSize",void 0),(0,D.gn)([(0,j.oS)()],n.prototype,"nzPageSizeOptions",void 0),(0,D.gn)([(0,j.oS)(),(0,T.yF)()],n.prototype,"nzShowSizeChanger",void 0),(0,D.gn)([(0,j.oS)(),(0,T.yF)()],n.prototype,"nzShowQuickJumper",void 0),(0,D.gn)([(0,j.oS)(),(0,T.yF)()],n.prototype,"nzSimple",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzDisabled",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzResponsive",void 0),(0,D.gn)([(0,T.yF)()],n.prototype,"nzHideOnSinglePage",void 0),(0,D.gn)([(0,T.Rn)()],n.prototype,"nzTotal",void 0),(0,D.gn)([(0,T.Rn)()],n.prototype,"nzPageIndex",void 0),(0,D.gn)([(0,T.Rn)()],n.prototype,"nzPageSize",void 0),n})(),Nb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ae.vT,C.ez,Km,Lg,Qt.YI,te.PV]}),n})();function Ab(n,e){1&n&&(o.TgZ(0,"div"),o._uU(1," Please provide a name. "),o.qZA())}function Ob(n,e){if(1&n&&(o.TgZ(0,"option",8),o._uU(1),o.qZA()),2&n){const t=e.$implicit;o.Q6J("value",t.id),o.xp6(1),o.Oqu(t.label)}}function Db(n,e){if(1&n&&(o.ynx(0),o.TgZ(1,"form",2)(2,"div")(3,"label"),o._uU(4," Name: "),o._UZ(5,"input",3),o.qZA(),o.YNc(6,Ab,2,0,"div",4),o.qZA(),o.TgZ(7,"div")(8,"label"),o._uU(9," Description: "),o._UZ(10,"input",5),o.qZA()(),o.TgZ(11,"div")(12,"label"),o._uU(13," Deck: "),o.TgZ(14,"select",6),o.YNc(15,Ob,2,2,"option",7),o.ALo(16,"async"),o.qZA()()()(),o.BQk()),2&n){const t=o.oxw();let i;o.xp6(1),o.Q6J("formGroup",t.createGameForm),o.xp6(5),o.Q6J("ngIf",(null==(i=t.createGameForm.get("name"))?null:i.invalid)&&((null==(i=t.createGameForm.get("name"))?null:i.dirty)||(null==(i=t.createGameForm.get("name"))?null:i.touched))),o.xp6(9),o.Q6J("ngForOf",o.lcZ(16,3,t.deckService.deck$))}}let Eb=(()=>{class n{constructor(t,i){this.deckService=t,this.gameService=i,this.isVisible=!1,this.cancelCreation=new o.vpe,this.createGameForm=new Oo({name:new $t("Sammy"),description:new $t(""),deckId:new $t(null)})}handleOk(){this.gameService.create(this.createGameForm.value),this.cancelCreation.emit()}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Sg),o.Y36(Ng))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-create-game"]],inputs:{isVisible:"isVisible"},outputs:{cancelCreation:"cancelCreation"},decls:2,vars:1,consts:[["nzTitle","New game",3,"nzVisible","nzVisibleChange","nzOnCancel","nzOnOk"],[4,"nzModalContent"],[3,"formGroup"],["nz-input","","type","text","id","name","formControlName","name"],[4,"ngIf"],["nz-input","","type","text","id","email","formControlName","description"],["nz-input","","type","text","id","message","formControlName","deckId"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,i){1&t&&(o.TgZ(0,"nz-modal",0),o.NdJ("nzVisibleChange",function(r){return i.isVisible=r})("nzOnCancel",function(){return i.cancelCreation.emit()})("nzOnOk",function(){return i.handleOk()}),o.YNc(1,Db,17,5,"ng-container",1),o.qZA()),2&t&&o.Q6J("nzVisible",i.isVisible)},dependencies:[C.sg,C.O5,vg,jc,Fc,Lm,Bm,ui,mr,So,Ic,Mo,fr,Tr,C.Ov]}),n})();function Mb(n,e){1&n&&o._UZ(0,"span",17)}function kb(n,e){if(1&n&&(o.TgZ(0,"nz-card",18)(1,"p"),o._uU(2),o.qZA()()),2&n){const t=e.$implicit;o.oxw();const i=o.MAs(19);o.Q6J("nzBordered",!1)("nzTitle",t.title)("nzExtra",i),o.xp6(2),o.Oqu(t.description)}}function Fb(n,e){1&n&&(o.TgZ(0,"a",19),o._uU(1,"View"),o.qZA())}const Vb=[{path:"",component:Kg,children:[{path:"",component:(()=>{class n{constructor(t,i){this.deckService=t,this.gameService=i,this.showCreateGame=!1,this.games=[{title:"Ant Design Title 1",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."},{title:"Ant Design Title 2",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."},{title:"Ant Design Title 3",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."},{title:"Ant Design Title 4",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."},{title:"Ant Design Title 1",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."},{title:"Ant Design Title 2",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."},{title:"Ant Design Title 3",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."},{title:"Ant Design Title 4",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."},{title:"Ant Design Title 1",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."},{title:"Ant Design Title 2",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."},{title:"Ant Design Title 3",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."},{title:"Ant Design Title 4",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."},{title:"Ant Design Title 4",description:"Ant Design, a design language for background applications, is refined by Ant UED Team."}]}}return n.\u0275fac=function(t){return new(t||n)(o.Y36(Sg),o.Y36(Ng))},n.\u0275cmp=o.Xpm({type:n,selectors:[["app-game-listing"]],decls:23,vars:5,consts:[[1,"game-list-header"],[1,"game-list-title"],[1,"sub-text"],[1,"game-list-search"],[3,"nzSuffix"],["type","text","nz-input","","placeholder","input search text"],["suffixIconSearch",""],[1,"game-list-add"],["nz-button","","nzType","primary",3,"click"],["nz-icon","","nzType","plus","nzTheme","outline"],[1,"container"],[1,"game-list"],[3,"nzBordered","nzTitle","nzExtra",4,"ngFor","ngForOf"],["extraTemplate",""],[1,"pagination"],["nzSimple","",3,"nzPageIndex","nzTotal"],[3,"isVisible","cancelCreation"],["nz-icon","","nzType","search"],[3,"nzBordered","nzTitle","nzExtra"],["href","#"]],template:function(t,i){if(1&t&&(o.TgZ(0,"div",0)(1,"div",1)(2,"h2"),o._uU(3,"Games"),o.qZA(),o.TgZ(4,"div",2),o._uU(5,"List of Games"),o.qZA()(),o.TgZ(6,"div",3)(7,"nz-input-group",4),o._UZ(8,"input",5),o.qZA(),o.YNc(9,Mb,1,0,"ng-template",null,6,o.W1O),o.qZA(),o.TgZ(11,"div",7)(12,"button",8),o.NdJ("click",function(){return i.showCreateGame=!i.showCreateGame}),o._UZ(13,"span",9),o._uU(14," Add Game "),o.qZA()()(),o.TgZ(15,"div",10)(16,"div",11),o.YNc(17,kb,3,4,"nz-card",12),o.YNc(18,Fb,2,0,"ng-template",null,13,o.W1O),o.qZA(),o.TgZ(20,"div",14),o._UZ(21,"nz-pagination",15),o.qZA(),o.TgZ(22,"app-create-game",16),o.NdJ("cancelCreation",function(){return i.showCreateGame=!1}),o.qZA()()),2&t){const s=o.MAs(10);o.xp6(7),o.Q6J("nzSuffix",s),o.xp6(10),o.Q6J("ngForOf",i.games),o.xp6(4),o.Q6J("nzPageIndex",2)("nzTotal",50),o.xp6(1),o.Q6J("isVisible",i.showCreateGame)}},dependencies:[C.sg,te.Ls,mi.ix,$e.w,_r.dQ,Tr,nT,tT,gw,Sb,Eb],styles:["[_ngcontent-%COMP%]:root{--green: #005C53;--blue: #042940;--cyan: #45C4B0;--pink: #F2668B;--yellow: #F2C94C;--orange: #F2994A;--red: #D92525;--grey: #A67458}.game-list-header[_ngcontent-%COMP%]{display:grid;align-items:center;grid-template-columns:200px 1.5fr 1fr;width:100vw;height:116px;box-shadow:0 2px 4px #0000001a}.game-list-header[_ngcontent-%COMP%]   .game-list-title[_ngcontent-%COMP%]{margin-left:40px}.game-list-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;padding-top:5px;font-size:30px;font-weight:600}.game-list-header[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{font-size:14px;margin-bottom:20px;color:#647589;text-align:left!important;margin-top:-20px}.game-list-header[_ngcontent-%COMP%]   .game-list-add[_ngcontent-%COMP%]{padding-left:10px}.container[_ngcontent-%COMP%]{width:calc(100vw - 100px);height:calc(100vh - 116px);background:#eff7fe;overflow:auto}.game-list[_ngcontent-%COMP%]{display:grid;padding:20px;grid-template-columns:1fr 1fr 1fr 1fr;flex-wrap:wrap;column-gap:20px;row-gap:20px}.game-list[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]{height:200px!important;box-shadow:0 2px 4px #0000001a}.game-list[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   .ant-card-body[_ngcontent-%COMP%]{overflow:hidden}.game-list[_ngcontent-%COMP%]   nz-card[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#1c9dea!important}.pagination[_ngcontent-%COMP%]{width:calc(100vw - 100px);display:flex;background:#eff7fe;align-items:center;justify-content:flex-end;margin:-10px -20px 10px -10px}"]}),n})()},{path:":gameId",component:qT}]}];let Rb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[Ro.Bz.forChild(Vb),Ro.Bz]}),n})(),qb=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ae.vT,C.ez,te.PV,we.ud]}),n})();S(5963);let eS=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ae.vT,C.ez,tg]}),n})();var Vo=S(3679);let tN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ae.vT,C.ez,eS,Vo.Jb,qb,se.T,Eg]}),n})(),iN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ae.vT,C.ez,Ve.U8,se.T,_i.e4,jt.g]}),n})(),uN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[ae.vT,C.ez,Vo.Jb,te.PV,iN,ng.xu,we.ud,se.T,Vo.Jb]}),n})(),hN=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=o.oAB({type:n}),n.\u0275inj=o.cJS({imports:[C.ez,Rb,te.PV,mi.sL,FT,tN,Ex,uN,Lg,C1,iT,_w,Nb]}),n})()}}]);